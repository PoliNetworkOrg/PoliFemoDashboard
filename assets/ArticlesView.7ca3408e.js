import{_ as Ns,c as Os,l as Uo,f as Wo,a as Bs,b as Rs,d as Hs,o as ie,e as me,g as ft,h as En,i as $s,t as Ro,j as Mn,A as An,k as Fs,m as Zs,n as Vs,p as Us,q as Ws,r as js,u as qs,s as Zi,v as fi,w as Ks,x as Gs,F as Ho,y as Ys,z as jo,B as Js}from"./index.6bee86cd.js";var A;(function(P){P.seconds="seconds",P.minutes="minutes",P.hours="hours",P.date="date",P.month="month",P.year="year"})(A||(A={}));const Vi={month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0},Xs={hour:"2-digit",hour12:!1},$o=P=>{switch(P){case"date":return{dateStyle:"short"};case"month":return{month:"numeric",year:"numeric"};case"year":return{year:"numeric"}}};class Ut extends Date{constructor(){super(...arguments),this.locale="default",this.nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],this.leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335]}setLocale(a){return this.locale=a,this}static convert(a,u="default"){if(!a)throw new Error("A date is required");return new Ut(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).setLocale(u)}static fromString(a,u){return new Ut(a)}get clone(){return new Ut(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.getMilliseconds()).setLocale(this.locale)}startOf(a,u=0){if(this[a]===void 0)throw new Error(`Unit '${a}' is not valid`);switch(a){case"seconds":this.setMilliseconds(0);break;case"minutes":this.setSeconds(0,0);break;case"hours":this.setMinutes(0,0,0);break;case"date":this.setHours(0,0,0,0);break;case"weekDay":if(this.startOf(A.date),this.weekDay===u)break;let v=this.weekDay;u!==0&&this.weekDay===0&&(v=8-u),this.manipulate(u-v,A.date);break;case"month":this.startOf(A.date),this.setDate(1);break;case"year":this.startOf(A.date),this.setMonth(0,1);break}return this}endOf(a,u=0){if(this[a]===void 0)throw new Error(`Unit '${a}' is not valid`);switch(a){case"seconds":this.setMilliseconds(999);break;case"minutes":this.setSeconds(59,999);break;case"hours":this.setMinutes(59,59,999);break;case"date":this.setHours(23,59,59,999);break;case"weekDay":this.endOf(A.date);const v=6+u;if(this.weekDay===v)break;this.manipulate(v-this.weekDay,A.date);break;case"month":this.endOf(A.date),this.manipulate(1,A.month),this.setDate(0);break;case"year":this.endOf(A.date),this.setMonth(11,31);break}return this}manipulate(a,u){if(this[u]===void 0)throw new Error(`Unit '${u}' is not valid`);return this[u]+=a,this}format(a,u=this.locale){return new Intl.DateTimeFormat(u,a).format(this)}isBefore(a,u){if(!u)return this.valueOf()<a.valueOf();if(this[u]===void 0)throw new Error(`Unit '${u}' is not valid`);return this.clone.startOf(u).valueOf()<a.clone.startOf(u).valueOf()}isAfter(a,u){if(!u)return this.valueOf()>a.valueOf();if(this[u]===void 0)throw new Error(`Unit '${u}' is not valid`);return this.clone.startOf(u).valueOf()>a.clone.startOf(u).valueOf()}isSame(a,u){if(!u)return this.valueOf()===a.valueOf();if(this[u]===void 0)throw new Error(`Unit '${u}' is not valid`);return a=Ut.convert(a),this.clone.startOf(u).valueOf()===a.startOf(u).valueOf()}isBetween(a,u,v,g="()"){if(v&&this[v]===void 0)throw new Error(`Unit '${v}' is not valid`);const S=g[0]==="(",m=g[1]===")";return(S?this.isAfter(a,v):!this.isBefore(a,v))&&(m?this.isBefore(u,v):!this.isAfter(u,v))||(S?this.isBefore(a,v):!this.isAfter(a,v))&&(m?this.isAfter(u,v):!this.isBefore(u,v))}parts(a=this.locale,u={dateStyle:"full",timeStyle:"long"}){const v={};return new Intl.DateTimeFormat(a,u).formatToParts(this).filter(g=>g.type!=="literal").forEach(g=>v[g.type]=g.value),v}get seconds(){return this.getSeconds()}set seconds(a){this.setSeconds(a)}get secondsFormatted(){return this.parts(void 0,Vi).second}get minutes(){return this.getMinutes()}set minutes(a){this.setMinutes(a)}get minutesFormatted(){return this.parts(void 0,Vi).minute}get hours(){return this.getHours()}set hours(a){this.setHours(a)}get hoursFormatted(){return this.parts(void 0,Xs).hour}get twelveHoursFormatted(){return this.parts(void 0,Vi).hour}meridiem(a=this.locale){var u;return(u=new Intl.DateTimeFormat(a,{hour:"numeric",hour12:!0}).formatToParts(this).find(v=>v.type==="dayPeriod"))==null?void 0:u.value}get date(){return this.getDate()}set date(a){this.setDate(a)}get dateFormatted(){return this.parts(void 0,Vi).day}get weekDay(){return this.getDay()}get month(){return this.getMonth()}set month(a){const u=new Date(this.year,a+1);u.setDate(0);const v=u.getDate();this.date>v&&(this.date=v),this.setMonth(a)}get monthFormatted(){return this.parts(void 0,Vi).month}get year(){return this.getFullYear()}set year(a){this.setFullYear(a)}get week(){const a=this.computeOrdinal(),u=this.getUTCDay();let v=Math.floor((a-u+10)/7);return v<1?v=this.weeksInWeekYear(this.year-1):v>this.weeksInWeekYear(this.year)&&(v=1),v}weeksInWeekYear(a){const u=(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7,v=a-1,g=(v+Math.floor(v/4)-Math.floor(v/100)+Math.floor(v/400))%7;return u===4||g===3?53:52}get isLeapYear(){return this.year%4===0&&(this.year%100!==0||this.year%400===0)}computeOrdinal(){return this.date+(this.isLeapYear?this.leapLadder:this.nonLeapLadder)[this.month]}}class Qt extends Error{}class Qs{constructor(){this.base="TD:",this.failedToSetInvalidDate="Failed to set invalid date",this.failedToParseInput="Failed parse input field"}unexpectedOption(a){const u=new Qt(`${this.base} Unexpected option: ${a} does not match a known option.`);throw u.code=1,u}unexpectedOptions(a){const u=new Qt(`${this.base}: ${a.join(", ")}`);throw u.code=1,u}unexpectedOptionValue(a,u,v){const g=new Qt(`${this.base} Unexpected option value: ${a} does not accept a value of "${u}". Valid values are: ${v.join(", ")}`);throw g.code=2,g}typeMismatch(a,u,v){const g=new Qt(`${this.base} Mismatch types: ${a} has a type of ${u} instead of the required ${v}`);throw g.code=3,g}numbersOutOfRange(a,u,v){const g=new Qt(`${this.base} ${a} expected an array of number between ${u} and ${v}.`);throw g.code=4,g}failedToParseDate(a,u,v=!1){const g=new Qt(`${this.base} Could not correctly parse "${u}" to a date for ${a}.`);if(g.code=5,!v)throw g;console.warn(g)}mustProvideElement(){const a=new Qt(`${this.base} No element was provided.`);throw a.code=6,a}subscribeMismatch(){const a=new Qt(`${this.base} The subscribed events does not match the number of callbacks`);throw a.code=7,a}conflictingConfiguration(a){const u=new Qt(`${this.base} A configuration value conflicts with another rule. ${a}`);throw u.code=8,u}customDateFormatError(a){const u=new Qt(`${this.base} customDateFormat: ${a}`);throw u.code=9,u}dateString(){console.warn(`${this.base} Using a string for date options is not recommended unless you specify an ISO string or use the customDateFormat plugin.`)}throwError(a){const u=new Qt(`${this.base} ${a}`);throw u.code=9,u}}const qo="tempus-dominus",Ko="td";class tr{constructor(){this.key=`.${Ko}`,this.change=`change${this.key}`,this.update=`update${this.key}`,this.error=`error${this.key}`,this.show=`show${this.key}`,this.hide=`hide${this.key}`,this.blur=`blur${this.key}`,this.focus=`focus${this.key}`,this.keyup=`keyup${this.key}`,this.keydown=`keydown${this.key}`}}class er{constructor(){this.widget=`${qo}-widget`,this.calendarHeader="calendar-header",this.switch="picker-switch",this.toolbar="toolbar",this.noHighlight="no-highlight",this.sideBySide="timepicker-sbs",this.previous="previous",this.next="next",this.disabled="disabled",this.old="old",this.new="new",this.active="active",this.dateContainer="date-container",this.decadesContainer=`${this.dateContainer}-decades`,this.decade="decade",this.yearsContainer=`${this.dateContainer}-years`,this.year="year",this.monthsContainer=`${this.dateContainer}-months`,this.month="month",this.daysContainer=`${this.dateContainer}-days`,this.day="day",this.calendarWeeks="cw",this.dayOfTheWeek="dow",this.today="today",this.weekend="weekend",this.timeContainer="time-container",this.separator="separator",this.clockContainer=`${this.timeContainer}-clock`,this.hourContainer=`${this.timeContainer}-hour`,this.minuteContainer=`${this.timeContainer}-minute`,this.secondContainer=`${this.timeContainer}-second`,this.hour="hour",this.minute="minute",this.second="second",this.toggleMeridiem="toggleMeridiem",this.show="show",this.collapsing="td-collapsing",this.collapse="td-collapse",this.inline="inline",this.lightTheme="light",this.darkTheme="dark",this.isDarkPreferredQuery="(prefers-color-scheme: dark)"}}class x{}x.NAME=qo;x.dataKey=Ko;x.events=new tr;x.css=new er;x.errorMessages=new Qs;class ir{constructor(){this.cache=new Map}locate(a){const u=this.cache.get(a);if(u)return u;const v=new a;return this.cache.set(a,v),v}}const nr=()=>{K=new ir};let K;const pi=[{name:"calendar",className:x.css.daysContainer,unit:A.month,step:1},{name:"months",className:x.css.monthsContainer,unit:A.year,step:1},{name:"years",className:x.css.yearsContainer,unit:A.year,step:10},{name:"decades",className:x.css.decadesContainer,unit:A.year,step:100}];class Wt{constructor(){this._currentCalendarViewMode=0,this._viewDate=new Ut,this.minimumCalendarViewMode=0,this.currentView="calendar"}get currentCalendarViewMode(){return this._currentCalendarViewMode}set currentCalendarViewMode(a){this._currentCalendarViewMode=a,this.currentView=pi[a].name}get viewDate(){return this._viewDate}set viewDate(a){this._viewDate=a,this.options&&(this.options.viewDate=a)}refreshCurrentView(){this.currentView=pi[this.currentCalendarViewMode].name}}class te{constructor(){this.optionsStore=K.locate(Wt)}isValid(a,u){var v;if(u!==A.month&&this.optionsStore.options.restrictions.disabledDates.length>0&&this._isInDisabledDates(a)||u!==A.month&&this.optionsStore.options.restrictions.enabledDates.length>0&&!this._isInEnabledDates(a)||u!==A.month&&u!==A.year&&((v=this.optionsStore.options.restrictions.daysOfWeekDisabled)==null?void 0:v.length)>0&&this.optionsStore.options.restrictions.daysOfWeekDisabled.indexOf(a.weekDay)!==-1||this.optionsStore.options.restrictions.minDate&&a.isBefore(this.optionsStore.options.restrictions.minDate,u)||this.optionsStore.options.restrictions.maxDate&&a.isAfter(this.optionsStore.options.restrictions.maxDate,u))return!1;if(u===A.hours||u===A.minutes||u===A.seconds){if(this.optionsStore.options.restrictions.disabledHours.length>0&&this._isInDisabledHours(a)||this.optionsStore.options.restrictions.enabledHours.length>0&&!this._isInEnabledHours(a))return!1;if(this.optionsStore.options.restrictions.disabledTimeIntervals.length>0){for(let g of this.optionsStore.options.restrictions.disabledTimeIntervals)if(a.isBetween(g.from,g.to))return!1}}return!0}_isInDisabledDates(a){return!this.optionsStore.options.restrictions.disabledDates||this.optionsStore.options.restrictions.disabledDates.length===0?!1:this.optionsStore.options.restrictions.disabledDates.find(u=>u.isSame(a,A.date))}_isInEnabledDates(a){return!this.optionsStore.options.restrictions.enabledDates||this.optionsStore.options.restrictions.enabledDates.length===0?!0:this.optionsStore.options.restrictions.enabledDates.find(u=>u.isSame(a,A.date))}_isInDisabledHours(a){if(!this.optionsStore.options.restrictions.disabledHours||this.optionsStore.options.restrictions.disabledHours.length===0)return!1;const u=a.hours;return this.optionsStore.options.restrictions.disabledHours.find(v=>v===u)}_isInEnabledHours(a){if(!this.optionsStore.options.restrictions.enabledHours||this.optionsStore.options.restrictions.enabledHours.length===0)return!0;const u=a.hours;return this.optionsStore.options.restrictions.enabledHours.find(v=>v===u)}}class Ui{constructor(){this.subscribers=[]}subscribe(a){return this.subscribers.push(a),this.unsubscribe.bind(this,this.subscribers.length-1)}unsubscribe(a){this.subscribers.splice(a,1)}emit(a){this.subscribers.forEach(u=>{u(a)})}destroy(){this.subscribers=null,this.subscribers=[]}}class Dn{constructor(){this.triggerEvent=new Ui,this.viewUpdate=new Ui,this.updateDisplay=new Ui,this.action=new Ui,this.updateViewDate=new Ui}destroy(){this.triggerEvent.destroy(),this.viewUpdate.destroy(),this.updateDisplay.destroy(),this.action.destroy(),this.updateViewDate.destroy()}}const Wi={restrictions:{minDate:void 0,maxDate:void 0,disabledDates:[],enabledDates:[],daysOfWeekDisabled:[],disabledTimeIntervals:[],disabledHours:[],enabledHours:[]},display:{icons:{type:"icons",time:"fa-solid fa-clock",date:"fa-solid fa-calendar",up:"fa-solid fa-arrow-up",down:"fa-solid fa-arrow-down",previous:"fa-solid fa-chevron-left",next:"fa-solid fa-chevron-right",today:"fa-solid fa-calendar-check",clear:"fa-solid fa-trash",close:"fa-solid fa-xmark"},sideBySide:!1,calendarWeeks:!1,viewMode:"calendar",toolbarPlacement:"bottom",keepOpen:!1,buttons:{today:!1,clear:!1,close:!1},components:{calendar:!0,date:!0,month:!0,year:!0,decades:!0,clock:!0,hours:!0,minutes:!0,seconds:!1,useTwentyfourHour:void 0},inline:!1,theme:"auto"},stepping:1,useCurrent:!0,defaultDate:void 0,localization:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",previousMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",previousYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",previousDecade:"Previous Decade",nextDecade:"Next Decade",previousCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",toggleMeridiem:"Toggle Meridiem",selectTime:"Select Time",selectDate:"Select Date",dayViewHeaderFormat:{month:"long",year:"2-digit"},locale:"default",startOfTheWeek:0,dateFormats:{LTS:"h:mm:ss T",LT:"h:mm T",L:"MM/dd/yyyy",LL:"MMMM d, yyyy",LLL:"MMMM d, yyyy h:mm T",LLLL:"dddd, MMMM d, yyyy h:mm T"},ordinal:P=>P,format:"L LT"},keepInvalid:!1,debug:!1,allowInputToggle:!1,viewDate:new Ut,multipleDates:!1,multipleDatesSeparator:"; ",promptTimeOnDateChange:!1,promptTimeOnDateChangeTransitionDelay:200,meta:{},container:void 0};function Go(P,a){if(P.constructor.name===Ut.name)return P;if(P.constructor.name===Date.name)return Ut.convert(P);if(typeof P=="string"){const u=Ut.fromString(P,a);return JSON.stringify(u)==="null"?null:u}return null}function In(P,a,u){typeof P=="string"&&a!=="input"&&x.errorMessages.dateString();const v=Go(P,u);return v||x.errorMessages.failedToParseDate(a,P,a==="input"),v}function Yo(P,a,u,v){var g;Array.isArray(a)||x.errorMessages.typeMismatch(P,u,"array of DateTime or Date");for(let S=0;S<a.length;S++){let m=a[S];const I=In(m,P,v);I||x.errorMessages.typeMismatch(P,typeof m,"DateTime or Date"),I.setLocale((g=v==null?void 0:v.locale)!=null?g:"default"),a[S]=I}}function Jo(P,a,u){(!Array.isArray(a)||a.some(v=>typeof v!="number"))&&x.errorMessages.typeMismatch(P,u,"array of numbers")}function lo(P){return({value:a,providedType:u,localization:v})=>{const g=In(a,P,v);if(g!==void 0)return g.setLocale(v.locale),g;x.errorMessages.typeMismatch(P,u,"DateTime or Date")}}function Fo(P){const a=lo(P);return u=>u.value===void 0?u.value:a(u)}function Xo(P,a,u){return({value:v,providedType:g})=>v===void 0?[]:(Jo(P,v,g),v.some(S=>S<a||S>u)&&x.errorMessages.numbersOutOfRange(P,a,u),v)}function Zo(P){return Xo(P,0,23)}function Vo(P){return({value:a,providedType:u,localization:v})=>a===void 0?[]:(Yo(P,a,u,v),a)}function Pn(P){return({value:a,path:u})=>(P.includes(a)||x.errorMessages.unexpectedOptionValue(u.substring(1),a,P),a)}const or=Object.freeze({defaultDate:lo("defaultDate"),viewDate:lo("viewDate"),minDate:Fo("restrictions.minDate"),maxDate:Fo("restrictions.maxDate"),disabledHours:Zo("restrictions.disabledHours"),enabledHours:Zo("restrictions.enabledHours"),disabledDates:Vo("restrictions.disabledDates"),enabledDates:Vo("restrictions.enabledDates"),daysOfWeekDisabled:Xo("restrictions.daysOfWeekDisabled",0,6),disabledTimeIntervals:({key:P,value:a,providedType:u,localization:v})=>{if(a===void 0)return[];Array.isArray(a)||x.errorMessages.typeMismatch(P,u,"array of { from: DateTime|Date, to: DateTime|Date }");const g=a;for(let S=0;S<g.length;S++)Object.keys(g[S]).forEach(m=>{const I=`${P}[${S}].${m}`,O=g[S][m],q=In(O,I,v);q||x.errorMessages.typeMismatch(I,typeof O,"DateTime or Date"),q.setLocale(v.locale),g[S][m]=q});return g},toolbarPlacement:Pn(["top","bottom","default"]),type:Pn(["icons","sprites"]),viewMode:Pn(["clock","calendar","months","years","decades"]),theme:Pn(["light","dark","auto"]),meta:({value:P})=>P,dayViewHeaderFormat:({value:P})=>P,container:({value:P,path:a})=>(P&&!(P instanceof HTMLElement||P instanceof Element||(P==null?void 0:P.appendChild))&&x.errorMessages.typeMismatch(a.substring(1),typeof P,"HTMLElement"),P),useTwentyfourHour:({value:P,path:a,providedType:u,defaultType:v})=>{if(P===void 0||u==="boolean")return P;x.errorMessages.typeMismatch(a,u,v)}}),sr=({value:P,defaultType:a,providedType:u,path:v})=>{switch(a){case"boolean":return P==="true"||P===!0;case"number":return+P;case"string":return P.toString();case"object":return{};case"function":return P;default:x.errorMessages.typeMismatch(v,u,a)}};function rr(P){return(or[P.key]||sr)(P)}class Ot{static deepCopy(a){const u={};return Object.keys(a).forEach(v=>{const g=a[v];if(g instanceof Ut){u[v]=g.clone;return}else if(g instanceof Date){u[v]=new Date(g.valueOf());return}u[v]=g,!(typeof g!="object"||g instanceof HTMLElement||g instanceof Element)&&(Array.isArray(g)||(u[v]=Ot.deepCopy(g)))}),u}static objectPath(a,u){return a.charAt(0)==="."&&(a=a.slice(1)),a?a.split(".").reduce((v,g)=>Ot.isValue(v)||Ot.isValue(v[g])?v[g]:void 0,u):u}static spread(a,u,v="",g){const S=Ot.objectPath(v,Wi),m=Object.keys(a).filter(I=>!Object.keys(S).includes(I));if(m.length>0){const I=Ot.getFlattenDefaultOptions(),O=m.map(q=>{let z=`"${v}.${q}" in not a known option.`,U=I.find(ut=>ut.includes(q));return U&&(z+=` Did you mean "${U}"?`),z});x.errorMessages.unexpectedOptions(O)}Object.keys(a).filter(I=>I!=="__proto__"&&I!=="constructor").forEach(I=>{v+=`.${I}`,v.charAt(0)==="."&&(v=v.slice(1));const O=S[I];let q=typeof a[I],z=typeof O,U=a[I];if(U==null){u[I]=U,v=v.substring(0,v.lastIndexOf(`.${I}`));return}typeof O=="object"&&!Array.isArray(a[I])&&!(O instanceof Date||Ot.ignoreProperties.includes(I))?Ot.spread(a[I],u[I],v,g):u[I]=Ot.processKey(I,U,q,z,v,g),v=v.substring(0,v.lastIndexOf(`.${I}`))})}static processKey(a,u,v,g,S,m){return rr({key:a,value:u,providedType:v,defaultType:g,path:S,localization:m})}static _mergeOptions(a,u){var S;const v=Ot.deepCopy(u),g=((S=u.localization)==null?void 0:S.locale)!=="default"?u.localization:(a==null?void 0:a.localization)||Wi.localization;return Ot.spread(a,v,"",g),v}static _dataToOptions(a,u){const v=JSON.parse(JSON.stringify(a.dataset));if(v!=null&&v.tdTargetInput&&delete v.tdTargetInput,v!=null&&v.tdTargetToggle&&delete v.tdTargetToggle,!v||Object.keys(v).length===0||v.constructor!==DOMStringMap)return u;let g={};const S=O=>{const q={};return Object.keys(O).forEach(z=>{q[z.toLowerCase()]=z}),q},m=(O,q,z,U)=>{const St=S(z)[O[q].toLowerCase()],It={};return St===void 0||(z[St].constructor===Object?(q++,It[St]=m(O,q,z[St],U)):It[St]=U),It},I=S(u);return Object.keys(v).filter(O=>O.startsWith(x.dataKey)).map(O=>O.substring(2)).forEach(O=>{let q=I[O.toLowerCase()];if(O.includes("_")){const z=O.split("_");q=I[z[0].toLowerCase()],q!==void 0&&u[q].constructor===Object&&(g[q]=m(z,1,u[q],v[`td${O}`]))}else q!==void 0&&(g[q]=v[`td${O}`])}),this._mergeOptions(g,u)}static _dateTypeCheck(a,u){return Go(a,u)}static _typeCheckDateArray(a,u,v,g){return Yo(a,u,v,g)}static _typeCheckNumberArray(a,u,v){return Jo(a,u,v)}static dateConversion(a,u,v){return In(a,u,v)}static getFlattenDefaultOptions(){if(this._flattenDefaults)return this._flattenDefaults;const a=(u,v=[])=>Array.isArray(u)?[]:Object(u)===u?Object.entries(u).flatMap(([g,S])=>a(S,[...v,g])):v.join(".");return this._flattenDefaults=a(Wi),this._flattenDefaults}static _validateConflicts(a){a.display.sideBySide&&(!a.display.components.clock||!(a.display.components.hours||a.display.components.minutes||a.display.components.seconds))&&x.errorMessages.conflictingConfiguration("Cannot use side by side mode without the clock components"),a.restrictions.minDate&&a.restrictions.maxDate&&(a.restrictions.minDate.isAfter(a.restrictions.maxDate)&&x.errorMessages.conflictingConfiguration("minDate is after maxDate"),a.restrictions.maxDate.isBefore(a.restrictions.minDate)&&x.errorMessages.conflictingConfiguration("maxDate is before minDate"))}}Ot.ignoreProperties=["meta","dayViewHeaderFormat","container","dateForms","ordinal"];Ot.isValue=P=>P!=null;class ve{constructor(){this._dates=[],this.optionsStore=K.locate(Wt),this.validation=K.locate(te),this._eventEmitters=K.locate(Dn)}get picked(){return this._dates}get lastPicked(){return this._dates[this.lastPickedIndex]}get lastPickedIndex(){return this._dates.length===0?0:this._dates.length-1}formatInput(a){const u=this.optionsStore.options.display.components;return a?a.format({year:u.calendar&&u.year?"numeric":void 0,month:u.calendar&&u.month?"2-digit":void 0,day:u.calendar&&u.date?"2-digit":void 0,hour:u.clock&&u.hours?u.useTwentyfourHour?"2-digit":"numeric":void 0,minute:u.clock&&u.minutes?"2-digit":void 0,second:u.clock&&u.seconds?"2-digit":void 0,hour12:!u.useTwentyfourHour}):""}parseInput(a){return Ot.dateConversion(a,"input",this.optionsStore.options.localization)}setFromInput(a,u){if(!a){this.setValue(void 0,u);return}const v=this.parseInput(a);v&&(v.setLocale(this.optionsStore.options.localization.locale),this.setValue(v,u))}add(a){this._dates.push(a)}isPicked(a,u){if(!u)return this._dates.find(S=>S===a)!==void 0;const v=$o(u);let g=a.format(v);return this._dates.map(S=>S.format(v)).find(S=>S===g)!==void 0}pickedIndex(a,u){if(!u)return this._dates.indexOf(a);const v=$o(u);let g=a.format(v);return this._dates.map(S=>S.format(v)).indexOf(g)}clear(){this.optionsStore.unset=!0,this._eventEmitters.triggerEvent.emit({type:x.events.change,date:void 0,oldDate:this.lastPicked,isClear:!0,isValid:!0}),this._dates=[]}static getStartEndYear(a,u){const v=a/10,g=Math.floor(u/a)*a,S=g+v*9,m=Math.floor(u/v)*v;return[g,S,m]}updateInput(a){if(!this.optionsStore.input)return;let u=this.formatInput(a);this.optionsStore.options.multipleDates&&(u=this._dates.map(v=>this.formatInput(v)).join(this.optionsStore.options.multipleDatesSeparator)),this.optionsStore.input.value!=u&&(this.optionsStore.input.value=u)}setValue(a,u){const v=typeof u>"u",g=!a&&v;let S=this.optionsStore.unset?null:this._dates[u];if(!S&&!this.optionsStore.unset&&v&&g&&(S=this.lastPicked),a&&(S==null?void 0:S.isSame(a))){this.updateInput(a);return}if(!a){!this.optionsStore.options.multipleDates||this._dates.length===1||g?(this.optionsStore.unset=!0,this._dates=[]):this._dates.splice(u,1),this.updateInput(),this._eventEmitters.triggerEvent.emit({type:x.events.change,date:void 0,oldDate:S,isClear:g,isValid:!0}),this._eventEmitters.updateDisplay.emit("all");return}if(u=u||0,a=a.clone,this.optionsStore.options.stepping!==1&&(a.minutes=Math.round(a.minutes/this.optionsStore.options.stepping)*this.optionsStore.options.stepping,a.seconds=0),this.validation.isValid(a)){this._dates[u]=a,this._eventEmitters.updateViewDate.emit(a.clone),this.updateInput(a),this.optionsStore.unset=!1,this._eventEmitters.updateDisplay.emit("all"),this._eventEmitters.triggerEvent.emit({type:x.events.change,date:a,oldDate:S,isClear:g,isValid:!0});return}this.optionsStore.options.keepInvalid&&(this._dates[u]=a,this._eventEmitters.updateViewDate.emit(a.clone),this.updateInput(a),this._eventEmitters.triggerEvent.emit({type:x.events.change,date:a,oldDate:S,isClear:g,isValid:!1})),this._eventEmitters.triggerEvent.emit({type:x.events.error,reason:x.errorMessages.failedToSetInvalidDate,date:a,oldDate:S})}}var co;(function(P){P.next="next",P.previous="previous",P.changeCalendarView="changeCalendarView",P.selectMonth="selectMonth",P.selectYear="selectYear",P.selectDecade="selectDecade",P.selectDay="selectDay",P.selectHour="selectHour",P.selectMinute="selectMinute",P.selectSecond="selectSecond",P.incrementHours="incrementHours",P.incrementMinutes="incrementMinutes",P.incrementSeconds="incrementSeconds",P.decrementHours="decrementHours",P.decrementMinutes="decrementMinutes",P.decrementSeconds="decrementSeconds",P.toggleMeridiem="toggleMeridiem",P.togglePicker="togglePicker",P.showClock="showClock",P.showHours="showHours",P.showMinutes="showMinutes",P.showSeconds="showSeconds",P.clear="clear",P.close="close",P.today="today"})(co||(co={}));var F=co;class ar{constructor(){this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");if(a.classList.add(x.css.daysContainer),a.append(...this._daysOfTheWeek()),this.optionsStore.options.display.calendarWeeks){const u=document.createElement("div");u.classList.add(x.css.calendarWeeks,x.css.noHighlight),a.appendChild(u)}for(let u=0;u<42;u++){if(u!==0&&u%7===0&&this.optionsStore.options.display.calendarWeeks){const g=document.createElement("div");g.classList.add(x.css.calendarWeeks,x.css.noHighlight),a.appendChild(g)}const v=document.createElement("div");v.setAttribute("data-action",F.selectDay),a.appendChild(v)}return a}_update(a,u){const v=a.getElementsByClassName(x.css.daysContainer)[0];if(this.optionsStore.currentView==="calendar"){const[S,m,I]=v.parentElement.getElementsByClassName(x.css.calendarHeader)[0].getElementsByTagName("div");m.setAttribute(x.css.daysContainer,this.optionsStore.viewDate.format(this.optionsStore.options.localization.dayViewHeaderFormat)),this.optionsStore.options.display.components.month?m.classList.remove(x.css.disabled):m.classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(-1,A.month),A.month)?S.classList.remove(x.css.disabled):S.classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(1,A.month),A.month)?I.classList.remove(x.css.disabled):I.classList.add(x.css.disabled)}let g=this.optionsStore.viewDate.clone.startOf(A.month).startOf("weekDay",this.optionsStore.options.localization.startOfTheWeek).manipulate(12,A.hours);v.querySelectorAll(`[data-action="${F.selectDay}"], .${x.css.calendarWeeks}`).forEach(S=>{if(this.optionsStore.options.display.calendarWeeks&&S.classList.contains(x.css.calendarWeeks)){if(S.innerText==="#")return;S.innerText=`${g.week}`;return}let m=[];m.push(x.css.day),g.isBefore(this.optionsStore.viewDate,A.month)&&m.push(x.css.old),g.isAfter(this.optionsStore.viewDate,A.month)&&m.push(x.css.new),!this.optionsStore.unset&&this.dates.isPicked(g,A.date)&&m.push(x.css.active),this.validation.isValid(g,A.date)||m.push(x.css.disabled),g.isSame(new Ut,A.date)&&m.push(x.css.today),(g.weekDay===0||g.weekDay===6)&&m.push(x.css.weekend),u(A.date,g,m,S),S.classList.remove(...S.classList),S.classList.add(...m),S.setAttribute("data-value",`${g.year}-${g.monthFormatted}-${g.dateFormatted}`),S.setAttribute("data-day",`${g.date}`),S.innerText=g.format({day:"numeric"}),g.manipulate(1,A.date)})}_daysOfTheWeek(){let a=this.optionsStore.viewDate.clone.startOf("weekDay",this.optionsStore.options.localization.startOfTheWeek).startOf(A.date);const u=[];if(document.createElement("div"),this.optionsStore.options.display.calendarWeeks){const v=document.createElement("div");v.classList.add(x.css.calendarWeeks,x.css.noHighlight),v.innerText="#",u.push(v)}for(let v=0;v<7;v++){const g=document.createElement("div");g.classList.add(x.css.dayOfTheWeek,x.css.noHighlight),g.innerText=a.format({weekday:"short"}),a.manipulate(1,A.date),u.push(g)}return u}}class lr{constructor(){this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.monthsContainer);for(let u=0;u<12;u++){const v=document.createElement("div");v.setAttribute("data-action",F.selectMonth),a.appendChild(v)}return a}_update(a,u){const v=a.getElementsByClassName(x.css.monthsContainer)[0];if(this.optionsStore.currentView==="months"){const[S,m,I]=v.parentElement.getElementsByClassName(x.css.calendarHeader)[0].getElementsByTagName("div");m.setAttribute(x.css.monthsContainer,this.optionsStore.viewDate.format({year:"numeric"})),this.optionsStore.options.display.components.year?m.classList.remove(x.css.disabled):m.classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(-1,A.year),A.year)?S.classList.remove(x.css.disabled):S.classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(1,A.year),A.year)?I.classList.remove(x.css.disabled):I.classList.add(x.css.disabled)}let g=this.optionsStore.viewDate.clone.startOf(A.year);v.querySelectorAll(`[data-action="${F.selectMonth}"]`).forEach((S,m)=>{let I=[];I.push(x.css.month),!this.optionsStore.unset&&this.dates.isPicked(g,A.month)&&I.push(x.css.active),this.validation.isValid(g,A.month)||I.push(x.css.disabled),u(A.month,g,I,S),S.classList.remove(...S.classList),S.classList.add(...I),S.setAttribute("data-value",`${m}`),S.innerText=`${g.format({month:"short"})}`,g.manipulate(1,A.month)})}}class cr{constructor(){this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.yearsContainer);for(let u=0;u<12;u++){const v=document.createElement("div");v.setAttribute("data-action",F.selectYear),a.appendChild(v)}return a}_update(a,u){this._startYear=this.optionsStore.viewDate.clone.manipulate(-1,A.year),this._endYear=this.optionsStore.viewDate.clone.manipulate(10,A.year);const v=a.getElementsByClassName(x.css.yearsContainer)[0];if(this.optionsStore.currentView==="years"){const[S,m,I]=v.parentElement.getElementsByClassName(x.css.calendarHeader)[0].getElementsByTagName("div");m.setAttribute(x.css.yearsContainer,`${this._startYear.format({year:"numeric"})}-${this._endYear.format({year:"numeric"})}`),this.optionsStore.options.display.components.decades?m.classList.remove(x.css.disabled):m.classList.add(x.css.disabled),this.validation.isValid(this._startYear,A.year)?S.classList.remove(x.css.disabled):S.classList.add(x.css.disabled),this.validation.isValid(this._endYear,A.year)?I.classList.remove(x.css.disabled):I.classList.add(x.css.disabled)}let g=this.optionsStore.viewDate.clone.startOf(A.year).manipulate(-1,A.year);v.querySelectorAll(`[data-action="${F.selectYear}"]`).forEach(S=>{let m=[];m.push(x.css.year),!this.optionsStore.unset&&this.dates.isPicked(g,A.year)&&m.push(x.css.active),this.validation.isValid(g,A.year)||m.push(x.css.disabled),u(A.year,g,m,S),S.classList.remove(...S.classList),S.classList.add(...m),S.setAttribute("data-value",`${g.year}`),S.innerText=g.format({year:"numeric"}),g.manipulate(1,A.year)})}}class hr{constructor(){this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.decadesContainer);for(let u=0;u<12;u++){const v=document.createElement("div");v.setAttribute("data-action",F.selectDecade),a.appendChild(v)}return a}_update(a,u){const[v,g]=ve.getStartEndYear(100,this.optionsStore.viewDate.year);this._startDecade=this.optionsStore.viewDate.clone.startOf(A.year),this._startDecade.year=v,this._endDecade=this.optionsStore.viewDate.clone.startOf(A.year),this._endDecade.year=g;const S=a.getElementsByClassName(x.css.decadesContainer)[0],[m,I,O]=S.parentElement.getElementsByClassName(x.css.calendarHeader)[0].getElementsByTagName("div");this.optionsStore.currentView==="decades"&&(I.setAttribute(x.css.decadesContainer,`${this._startDecade.format({year:"numeric"})}-${this._endDecade.format({year:"numeric"})}`),this.validation.isValid(this._startDecade,A.year)?m.classList.remove(x.css.disabled):m.classList.add(x.css.disabled),this.validation.isValid(this._endDecade,A.year)?O.classList.remove(x.css.disabled):O.classList.add(x.css.disabled));const q=this.dates.picked.map(z=>z.year);S.querySelectorAll(`[data-action="${F.selectDecade}"]`).forEach((z,U)=>{if(U===0)if(z.classList.add(x.css.old),this._startDecade.year-10<0){z.textContent=" ",m.classList.add(x.css.disabled),z.classList.add(x.css.disabled),z.setAttribute("data-value","");return}else{z.innerText=this._startDecade.clone.manipulate(-10,A.year).format({year:"numeric"}),z.setAttribute("data-value",`${this._startDecade.year}`);return}let ut=[];ut.push(x.css.decade);const St=this._startDecade.year,It=this._startDecade.year+9;!this.optionsStore.unset&&q.filter(ct=>ct>=St&&ct<=It).length>0&&ut.push(x.css.active),u("decade",this._startDecade,ut,z),z.classList.remove(...z.classList),z.classList.add(...ut),z.setAttribute("data-value",`${this._startDecade.year}`),z.innerText=`${this._startDecade.format({year:"numeric"})}`,this._startDecade.manipulate(10,A.year)})}}class ur{constructor(){this._gridColumns="",this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te)}getPicker(a){const u=document.createElement("div");return u.classList.add(x.css.clockContainer),u.append(...this._grid(a)),u}_update(a){const u=a.getElementsByClassName(x.css.clockContainer)[0],v=(this.dates.lastPicked||this.optionsStore.viewDate).clone;if(u.querySelectorAll(".disabled").forEach(g=>g.classList.remove(x.css.disabled)),this.optionsStore.options.display.components.hours&&(this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(1,A.hours),A.hours)||u.querySelector(`[data-action=${F.incrementHours}]`).classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(-1,A.hours),A.hours)||u.querySelector(`[data-action=${F.decrementHours}]`).classList.add(x.css.disabled),u.querySelector(`[data-time-component=${A.hours}]`).innerText=this.optionsStore.options.display.components.useTwentyfourHour?v.hoursFormatted:v.twelveHoursFormatted),this.optionsStore.options.display.components.minutes&&(this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(1,A.minutes),A.minutes)||u.querySelector(`[data-action=${F.incrementMinutes}]`).classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(-1,A.minutes),A.minutes)||u.querySelector(`[data-action=${F.decrementMinutes}]`).classList.add(x.css.disabled),u.querySelector(`[data-time-component=${A.minutes}]`).innerText=v.minutesFormatted),this.optionsStore.options.display.components.seconds&&(this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(1,A.seconds),A.seconds)||u.querySelector(`[data-action=${F.incrementSeconds}]`).classList.add(x.css.disabled),this.validation.isValid(this.optionsStore.viewDate.clone.manipulate(-1,A.seconds),A.seconds)||u.querySelector(`[data-action=${F.decrementSeconds}]`).classList.add(x.css.disabled),u.querySelector(`[data-time-component=${A.seconds}]`).innerText=v.secondsFormatted),!this.optionsStore.options.display.components.useTwentyfourHour){const g=u.querySelector(`[data-action=${F.toggleMeridiem}]`);g.innerText=v.meridiem(),this.validation.isValid(v.clone.manipulate(v.hours>=12?-12:12,A.hours))?g.classList.remove(x.css.disabled):g.classList.add(x.css.disabled)}u.style.gridTemplateAreas=`"${this._gridColumns}"`}_grid(a){this._gridColumns="";const u=[],v=[],g=[],S=document.createElement("div"),m=a(this.optionsStore.options.display.icons.up),I=a(this.optionsStore.options.display.icons.down);S.classList.add(x.css.separator,x.css.noHighlight);const O=S.cloneNode(!0);O.innerHTML=":";const q=(z=!1)=>z?O.cloneNode(!0):S.cloneNode(!0);if(this.optionsStore.options.display.components.hours){let z=document.createElement("div");z.setAttribute("title",this.optionsStore.options.localization.incrementHour),z.setAttribute("data-action",F.incrementHours),z.appendChild(m.cloneNode(!0)),u.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.pickHour),z.setAttribute("data-action",F.showHours),z.setAttribute("data-time-component",A.hours),v.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.decrementHour),z.setAttribute("data-action",F.decrementHours),z.appendChild(I.cloneNode(!0)),g.push(z),this._gridColumns+="a"}if(this.optionsStore.options.display.components.minutes){this._gridColumns+=" a",this.optionsStore.options.display.components.hours&&(u.push(q()),v.push(q(!0)),g.push(q()),this._gridColumns+=" a");let z=document.createElement("div");z.setAttribute("title",this.optionsStore.options.localization.incrementMinute),z.setAttribute("data-action",F.incrementMinutes),z.appendChild(m.cloneNode(!0)),u.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.pickMinute),z.setAttribute("data-action",F.showMinutes),z.setAttribute("data-time-component",A.minutes),v.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.decrementMinute),z.setAttribute("data-action",F.decrementMinutes),z.appendChild(I.cloneNode(!0)),g.push(z)}if(this.optionsStore.options.display.components.seconds){this._gridColumns+=" a",this.optionsStore.options.display.components.minutes&&(u.push(q()),v.push(q(!0)),g.push(q()),this._gridColumns+=" a");let z=document.createElement("div");z.setAttribute("title",this.optionsStore.options.localization.incrementSecond),z.setAttribute("data-action",F.incrementSeconds),z.appendChild(m.cloneNode(!0)),u.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.pickSecond),z.setAttribute("data-action",F.showSeconds),z.setAttribute("data-time-component",A.seconds),v.push(z),z=document.createElement("div"),z.setAttribute("title",this.optionsStore.options.localization.decrementSecond),z.setAttribute("data-action",F.decrementSeconds),z.appendChild(I.cloneNode(!0)),g.push(z)}if(!this.optionsStore.options.display.components.useTwentyfourHour){this._gridColumns+=" a";let z=q();u.push(z);let U=document.createElement("button");U.setAttribute("title",this.optionsStore.options.localization.toggleMeridiem),U.setAttribute("data-action",F.toggleMeridiem),U.setAttribute("tabindex","-1"),x.css.toggleMeridiem.includes(",")?U.classList.add(...x.css.toggleMeridiem.split(",")):U.classList.add(x.css.toggleMeridiem),z=document.createElement("div"),z.classList.add(x.css.noHighlight),z.appendChild(U),v.push(z),z=q(),g.push(z)}return this._gridColumns=this._gridColumns.trim(),[...u,...v,...g]}}class dr{constructor(){this.optionsStore=K.locate(Wt),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.hourContainer);for(let u=0;u<(this.optionsStore.options.display.components.useTwentyfourHour?24:12);u++){const v=document.createElement("div");v.setAttribute("data-action",F.selectHour),a.appendChild(v)}return a}_update(a,u){const v=a.getElementsByClassName(x.css.hourContainer)[0];let g=this.optionsStore.viewDate.clone.startOf(A.date);v.querySelectorAll(`[data-action="${F.selectHour}"]`).forEach(S=>{let m=[];m.push(x.css.hour),this.validation.isValid(g,A.hours)||m.push(x.css.disabled),u(A.hours,g,m,S),S.classList.remove(...S.classList),S.classList.add(...m),S.setAttribute("data-value",`${g.hours}`),S.innerText=this.optionsStore.options.display.components.useTwentyfourHour?g.hoursFormatted:g.twelveHoursFormatted,g.manipulate(1,A.hours)})}}class fr{constructor(){this.optionsStore=K.locate(Wt),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.minuteContainer);let u=this.optionsStore.options.stepping===1?5:this.optionsStore.options.stepping;for(let v=0;v<60/u;v++){const g=document.createElement("div");g.setAttribute("data-action",F.selectMinute),a.appendChild(g)}return a}_update(a,u){const v=a.getElementsByClassName(x.css.minuteContainer)[0];let g=this.optionsStore.viewDate.clone.startOf(A.hours),S=this.optionsStore.options.stepping===1?5:this.optionsStore.options.stepping;v.querySelectorAll(`[data-action="${F.selectMinute}"]`).forEach(m=>{let I=[];I.push(x.css.minute),this.validation.isValid(g,A.minutes)||I.push(x.css.disabled),u(A.minutes,g,I,m),m.classList.remove(...m.classList),m.classList.add(...I),m.setAttribute("data-value",`${g.minutes}`),m.innerText=g.minutesFormatted,g.manipulate(S,A.minutes)})}}class pr{constructor(){this.optionsStore=K.locate(Wt),this.validation=K.locate(te)}getPicker(){const a=document.createElement("div");a.classList.add(x.css.secondContainer);for(let u=0;u<12;u++){const v=document.createElement("div");v.setAttribute("data-action",F.selectSecond),a.appendChild(v)}return a}_update(a,u){const v=a.getElementsByClassName(x.css.secondContainer)[0];let g=this.optionsStore.viewDate.clone.startOf(A.minutes);v.querySelectorAll(`[data-action="${F.selectSecond}"]`).forEach(S=>{let m=[];m.push(x.css.second),this.validation.isValid(g,A.seconds)||m.push(x.css.disabled),u(A.seconds,g,m,S),S.classList.remove(...S.classList),S.classList.add(...m),S.setAttribute("data-value",`${g.seconds}`),S.innerText=g.secondsFormatted,g.manipulate(5,A.seconds)})}}class ne{static toggle(a){a.classList.contains(x.css.show)?this.hide(a):this.show(a)}static showImmediately(a){a.classList.remove(x.css.collapsing),a.classList.add(x.css.collapse,x.css.show),a.style.height=""}static show(a){if(a.classList.contains(x.css.collapsing)||a.classList.contains(x.css.show))return;const u=()=>{ne.showImmediately(a)};a.style.height="0",a.classList.remove(x.css.collapse),a.classList.add(x.css.collapsing),setTimeout(u,this.getTransitionDurationFromElement(a)),a.style.height=`${a.scrollHeight}px`}static hideImmediately(a){!a||(a.classList.remove(x.css.collapsing,x.css.show),a.classList.add(x.css.collapse))}static hide(a){if(a.classList.contains(x.css.collapsing)||!a.classList.contains(x.css.show))return;const u=()=>{ne.hideImmediately(a)};a.style.height=`${a.getBoundingClientRect().height}px`,(g=>g.offsetHeight)(a),a.classList.remove(x.css.collapse,x.css.show),a.classList.add(x.css.collapsing),a.style.height="",setTimeout(u,this.getTransitionDurationFromElement(a))}}ne.getTransitionDurationFromElement=P=>{if(!P)return 0;let{transitionDuration:a,transitionDelay:u}=window.getComputedStyle(P);const v=Number.parseFloat(a),g=Number.parseFloat(u);return!v&&!g?0:(a=a.split(",")[0],u=u.split(",")[0],(Number.parseFloat(a)+Number.parseFloat(u))*1e3)};class Qo{constructor(){this._isVisible=!1,this._documentClickEvent=a=>{var u;this.optionsStore.options.debug||window.debug||this._isVisible&&!a.composedPath().includes(this.widget)&&!((u=a.composedPath())!=null&&u.includes(this.optionsStore.element))&&this.hide()},this._actionsClickEvent=a=>{this._eventEmitters.action.emit({e:a})},this.optionsStore=K.locate(Wt),this.validation=K.locate(te),this.dates=K.locate(ve),this.dateDisplay=K.locate(ar),this.monthDisplay=K.locate(lr),this.yearDisplay=K.locate(cr),this.decadeDisplay=K.locate(hr),this.timeDisplay=K.locate(ur),this.hourDisplay=K.locate(dr),this.minuteDisplay=K.locate(fr),this.secondDisplay=K.locate(pr),this._eventEmitters=K.locate(Dn),this._widget=void 0,this._eventEmitters.updateDisplay.subscribe(a=>{this._update(a)})}get widget(){return this._widget}get isVisible(){return this._isVisible}_update(a){if(!!this.widget)switch(a){case A.seconds:this.secondDisplay._update(this.widget,this.paint);break;case A.minutes:this.minuteDisplay._update(this.widget,this.paint);break;case A.hours:this.hourDisplay._update(this.widget,this.paint);break;case A.date:this.dateDisplay._update(this.widget,this.paint);break;case A.month:this.monthDisplay._update(this.widget,this.paint);break;case A.year:this.yearDisplay._update(this.widget,this.paint);break;case"clock":if(!this._hasTime)break;this.timeDisplay._update(this.widget),this._update(A.hours),this._update(A.minutes),this._update(A.seconds);break;case"calendar":this._update(A.date),this._update(A.year),this._update(A.month),this.decadeDisplay._update(this.widget,this.paint),this._updateCalendarHeader();break;case"all":this._hasTime&&this._update("clock"),this._hasDate&&this._update("calendar")}}paint(a,u,v,g){}show(){var a,u;if(this.widget==null){if(this.dates.picked.length==0){if(this.optionsStore.options.useCurrent&&!this.optionsStore.options.defaultDate){const g=new Ut().setLocale(this.optionsStore.options.localization.locale);if(!this.optionsStore.options.keepInvalid){let S=0,m=1;for((a=this.optionsStore.options.restrictions.maxDate)!=null&&a.isBefore(g)&&(m=-1);!this.validation.isValid(g)&&(g.manipulate(m,A.date),!(S>31));)S++}this.dates.setValue(g)}this.optionsStore.options.defaultDate&&this.dates.setValue(this.optionsStore.options.defaultDate)}this._buildWidget(),this._updateTheme();const v=this._hasTime&&!this._hasDate;v&&(this.optionsStore.currentView="clock",this._eventEmitters.action.emit({e:null,action:F.showClock})),this.optionsStore.currentCalendarViewMode||(this.optionsStore.currentCalendarViewMode=this.optionsStore.minimumCalendarViewMode),!v&&this.optionsStore.options.display.viewMode!=="clock"&&(this._hasTime&&(this.optionsStore.options.display.sideBySide?ne.show(this.widget.querySelector(`div.${x.css.timeContainer}`)):ne.hideImmediately(this.widget.querySelector(`div.${x.css.timeContainer}`))),ne.show(this.widget.querySelector(`div.${x.css.dateContainer}`))),this._hasDate&&this._showMode(),this.optionsStore.options.display.inline?this.optionsStore.element.appendChild(this.widget):((((u=this.optionsStore.options)==null?void 0:u.container)||document.body).appendChild(this.widget),this.createPopup(this.optionsStore.element,this.widget,{modifiers:[{name:"eventListeners",enabled:!0}],placement:document.documentElement.dir==="rtl"?"bottom-end":"bottom-start"}).then()),this.optionsStore.options.display.viewMode=="clock"&&this._eventEmitters.action.emit({e:null,action:F.showClock}),this.widget.querySelectorAll("[data-action]").forEach(g=>g.addEventListener("click",this._actionsClickEvent)),this._hasTime&&this.optionsStore.options.display.sideBySide&&(this.timeDisplay._update(this.widget),this.widget.getElementsByClassName(x.css.clockContainer)[0].style.display="grid")}this.widget.classList.add(x.css.show),this.optionsStore.options.display.inline||(this.updatePopup(),document.addEventListener("click",this._documentClickEvent)),this._eventEmitters.triggerEvent.emit({type:x.events.show}),this._isVisible=!0}async createPopup(a,u,v){var S;let g;if(window!=null&&window.Popper)g=(S=window==null?void 0:window.Popper)==null?void 0:S.createPopper;else{const{createPopper:m}=await Ns(()=>import("./index.30e94252.js"),[]);g=m}g&&(this._popperInstance=g(a,u,v))}updatePopup(){var a;(a=this._popperInstance)==null||a.update()}_showMode(a){if(!this.widget)return;if(a){const g=Math.max(this.optionsStore.minimumCalendarViewMode,Math.min(3,this.optionsStore.currentCalendarViewMode+a));if(this.optionsStore.currentCalendarViewMode==g)return;this.optionsStore.currentCalendarViewMode=g}this.widget.querySelectorAll(`.${x.css.dateContainer} > div:not(.${x.css.calendarHeader}), .${x.css.timeContainer} > div:not(.${x.css.clockContainer})`).forEach(g=>g.style.display="none");const u=pi[this.optionsStore.currentCalendarViewMode];let v=this.widget.querySelector(`.${u.className}`);switch(u.className){case x.css.decadesContainer:this.decadeDisplay._update(this.widget,this.paint);break;case x.css.yearsContainer:this.yearDisplay._update(this.widget,this.paint);break;case x.css.monthsContainer:this.monthDisplay._update(this.widget,this.paint);break;case x.css.daysContainer:this.dateDisplay._update(this.widget,this.paint);break}v.style.display="grid",this.optionsStore.options.display.sideBySide&&(this.widget.querySelectorAll(`.${x.css.clockContainer}`)[0].style.display="grid"),this._updateCalendarHeader(),this._eventEmitters.viewUpdate.emit()}_updateTheme(a){if(!!this.widget){if(a){if(this.optionsStore.options.display.theme===a)return;this.optionsStore.options.display.theme=a}this.widget.classList.remove("light","dark"),this.widget.classList.add(this._getThemeClass()),this.optionsStore.options.display.theme==="auto"?window.matchMedia(x.css.isDarkPreferredQuery).addEventListener("change",()=>this._updateTheme()):window.matchMedia(x.css.isDarkPreferredQuery).removeEventListener("change",()=>this._updateTheme())}}_getThemeClass(){const a=this.optionsStore.options.display.theme||"auto",u=window.matchMedia&&window.matchMedia(x.css.isDarkPreferredQuery).matches;switch(a){case"light":return x.css.lightTheme;case"dark":return x.css.darkTheme;case"auto":return u?x.css.darkTheme:x.css.lightTheme}}_updateCalendarHeader(){const a=[...this.widget.querySelector(`.${x.css.dateContainer} div[style*="display: grid"]`).classList].find(S=>S.startsWith(x.css.dateContainer)),[u,v,g]=this.widget.getElementsByClassName(x.css.calendarHeader)[0].getElementsByTagName("div");switch(a){case x.css.decadesContainer:u.setAttribute("title",this.optionsStore.options.localization.previousCentury),v.setAttribute("title",""),g.setAttribute("title",this.optionsStore.options.localization.nextCentury);break;case x.css.yearsContainer:u.setAttribute("title",this.optionsStore.options.localization.previousDecade),v.setAttribute("title",this.optionsStore.options.localization.selectDecade),g.setAttribute("title",this.optionsStore.options.localization.nextDecade);break;case x.css.monthsContainer:u.setAttribute("title",this.optionsStore.options.localization.previousYear),v.setAttribute("title",this.optionsStore.options.localization.selectYear),g.setAttribute("title",this.optionsStore.options.localization.nextYear);break;case x.css.daysContainer:u.setAttribute("title",this.optionsStore.options.localization.previousMonth),v.setAttribute("title",this.optionsStore.options.localization.selectMonth),g.setAttribute("title",this.optionsStore.options.localization.nextMonth),v.setAttribute(a,this.optionsStore.viewDate.format(this.optionsStore.options.localization.dayViewHeaderFormat));break}v.innerText=v.getAttribute(a)}hide(){!this.widget||!this._isVisible||(this.widget.classList.remove(x.css.show),this._isVisible&&(this._eventEmitters.triggerEvent.emit({type:x.events.hide,date:this.optionsStore.unset?null:this.dates.lastPicked?this.dates.lastPicked.clone:void 0}),this._isVisible=!1),document.removeEventListener("click",this._documentClickEvent))}toggle(){return this._isVisible?this.hide():this.show()}_dispose(){document.removeEventListener("click",this._documentClickEvent),this.widget&&(this.widget.querySelectorAll("[data-action]").forEach(a=>a.removeEventListener("click",this._actionsClickEvent)),this.widget.parentNode.removeChild(this.widget),this._widget=void 0)}_buildWidget(){const a=document.createElement("div");a.classList.add(x.css.widget);const u=document.createElement("div");u.classList.add(x.css.dateContainer),u.append(this.getHeadTemplate(),this.decadeDisplay.getPicker(),this.yearDisplay.getPicker(),this.monthDisplay.getPicker(),this.dateDisplay.getPicker());const v=document.createElement("div");v.classList.add(x.css.timeContainer),v.appendChild(this.timeDisplay.getPicker(this._iconTag.bind(this))),v.appendChild(this.hourDisplay.getPicker()),v.appendChild(this.minuteDisplay.getPicker()),v.appendChild(this.secondDisplay.getPicker());const g=document.createElement("div");if(g.classList.add(x.css.toolbar),g.append(...this.getToolbarElements()),this.optionsStore.options.display.inline&&a.classList.add(x.css.inline),this.optionsStore.options.display.calendarWeeks&&a.classList.add("calendarWeeks"),this.optionsStore.options.display.sideBySide&&this._hasDate&&this._hasTime){a.classList.add(x.css.sideBySide),this.optionsStore.options.display.toolbarPlacement==="top"&&a.appendChild(g);const m=document.createElement("div");m.classList.add("td-row"),u.classList.add("td-half"),v.classList.add("td-half"),m.appendChild(u),m.appendChild(v),a.appendChild(m),this.optionsStore.options.display.toolbarPlacement==="bottom"&&a.appendChild(g),this._widget=a;return}this.optionsStore.options.display.toolbarPlacement==="top"&&a.appendChild(g),this._hasDate&&(this._hasTime&&(u.classList.add(x.css.collapse),this.optionsStore.options.display.viewMode!=="clock"&&u.classList.add(x.css.show)),a.appendChild(u)),this._hasTime&&(this._hasDate&&(v.classList.add(x.css.collapse),this.optionsStore.options.display.viewMode==="clock"&&v.classList.add(x.css.show)),a.appendChild(v)),this.optionsStore.options.display.toolbarPlacement==="bottom"&&a.appendChild(g);const S=document.createElement("div");S.classList.add("arrow"),S.setAttribute("data-popper-arrow",""),a.appendChild(S),this._widget=a}get _hasTime(){return this.optionsStore.options.display.components.clock&&(this.optionsStore.options.display.components.hours||this.optionsStore.options.display.components.minutes||this.optionsStore.options.display.components.seconds)}get _hasDate(){return this.optionsStore.options.display.components.calendar&&(this.optionsStore.options.display.components.year||this.optionsStore.options.display.components.month||this.optionsStore.options.display.components.date)}getToolbarElements(){const a=[];if(this.optionsStore.options.display.buttons.today){const u=document.createElement("div");u.setAttribute("data-action",F.today),u.setAttribute("title",this.optionsStore.options.localization.today),u.appendChild(this._iconTag(this.optionsStore.options.display.icons.today)),a.push(u)}if(!this.optionsStore.options.display.sideBySide&&this._hasDate&&this._hasTime){let u,v;this.optionsStore.options.display.viewMode==="clock"?(u=this.optionsStore.options.localization.selectDate,v=this.optionsStore.options.display.icons.date):(u=this.optionsStore.options.localization.selectTime,v=this.optionsStore.options.display.icons.time);const g=document.createElement("div");g.setAttribute("data-action",F.togglePicker),g.setAttribute("title",u),g.appendChild(this._iconTag(v)),a.push(g)}if(this.optionsStore.options.display.buttons.clear){const u=document.createElement("div");u.setAttribute("data-action",F.clear),u.setAttribute("title",this.optionsStore.options.localization.clear),u.appendChild(this._iconTag(this.optionsStore.options.display.icons.clear)),a.push(u)}if(this.optionsStore.options.display.buttons.close){const u=document.createElement("div");u.setAttribute("data-action",F.close),u.setAttribute("title",this.optionsStore.options.localization.close),u.appendChild(this._iconTag(this.optionsStore.options.display.icons.close)),a.push(u)}return a}getHeadTemplate(){const a=document.createElement("div");a.classList.add(x.css.calendarHeader);const u=document.createElement("div");u.classList.add(x.css.previous),u.setAttribute("data-action",F.previous),u.appendChild(this._iconTag(this.optionsStore.options.display.icons.previous));const v=document.createElement("div");v.classList.add(x.css.switch),v.setAttribute("data-action",F.changeCalendarView);const g=document.createElement("div");return g.classList.add(x.css.next),g.setAttribute("data-action",F.next),g.appendChild(this._iconTag(this.optionsStore.options.display.icons.next)),a.append(u,v,g),a}_iconTag(a){if(this.optionsStore.options.display.icons.type==="sprites"){const v=document.createElementNS("http://www.w3.org/2000/svg","svg"),g=document.createElementNS("http://www.w3.org/2000/svg","use");return g.setAttribute("xlink:href",a),g.setAttribute("href",a),v.appendChild(g),v}const u=document.createElement("i");return u.classList.add(...a.split(" ")),u}_rebuild(){const a=this._isVisible;a&&this.hide(),this._dispose(),a&&this.show()}}class mr{constructor(){this.optionsStore=K.locate(Wt),this.dates=K.locate(ve),this.validation=K.locate(te),this.display=K.locate(Qo),this._eventEmitters=K.locate(Dn),this._eventEmitters.action.subscribe(a=>{this.do(a.e,a.action)})}do(a,u){var S,m;const v=a==null?void 0:a.currentTarget;if((S=v==null?void 0:v.classList)!=null&&S.contains(x.css.disabled))return!1;u=u||((m=v==null?void 0:v.dataset)==null?void 0:m.action);const g=(this.dates.lastPicked||this.optionsStore.viewDate).clone;switch(u){case F.next:case F.previous:this.handleNextPrevious(u);break;case F.changeCalendarView:this.display._showMode(1),this.display._updateCalendarHeader();break;case F.selectMonth:case F.selectYear:case F.selectDecade:const I=+v.dataset.value;switch(u){case F.selectMonth:this.optionsStore.viewDate.month=I;break;case F.selectYear:case F.selectDecade:this.optionsStore.viewDate.year=I;break}this.optionsStore.currentCalendarViewMode===this.optionsStore.minimumCalendarViewMode?(this.dates.setValue(this.optionsStore.viewDate,this.dates.lastPickedIndex),this.optionsStore.options.display.inline||this.display.hide()):this.display._showMode(-1);break;case F.selectDay:const O=this.optionsStore.viewDate.clone;v.classList.contains(x.css.old)&&O.manipulate(-1,A.month),v.classList.contains(x.css.new)&&O.manipulate(1,A.month),O.date=+v.dataset.day;let q=0;this.optionsStore.options.multipleDates?(q=this.dates.pickedIndex(O,A.date),q!==-1?this.dates.setValue(null,q):this.dates.setValue(O,this.dates.lastPickedIndex+1)):this.dates.setValue(O,this.dates.lastPickedIndex),!this.display._hasTime&&!this.optionsStore.options.display.keepOpen&&!this.optionsStore.options.display.inline&&!this.optionsStore.options.multipleDates&&this.display.hide();break;case F.selectHour:let z=+v.dataset.value;g.hours>=12&&!this.optionsStore.options.display.components.useTwentyfourHour&&(z+=12),g.hours=z,this.dates.setValue(g,this.dates.lastPickedIndex),this.hideOrClock(a);break;case F.selectMinute:g.minutes=+v.dataset.value,this.dates.setValue(g,this.dates.lastPickedIndex),this.hideOrClock(a);break;case F.selectSecond:g.seconds=+v.dataset.value,this.dates.setValue(g,this.dates.lastPickedIndex),this.hideOrClock(a);break;case F.incrementHours:this.manipulateAndSet(g,A.hours);break;case F.incrementMinutes:this.manipulateAndSet(g,A.minutes,this.optionsStore.options.stepping);break;case F.incrementSeconds:this.manipulateAndSet(g,A.seconds);break;case F.decrementHours:this.manipulateAndSet(g,A.hours,-1);break;case F.decrementMinutes:this.manipulateAndSet(g,A.minutes,this.optionsStore.options.stepping*-1);break;case F.decrementSeconds:this.manipulateAndSet(g,A.seconds,-1);break;case F.toggleMeridiem:this.manipulateAndSet(g,A.hours,this.dates.lastPicked.hours>=12?-12:12);break;case F.togglePicker:v.getAttribute("title")===this.optionsStore.options.localization.selectDate?(v.setAttribute("title",this.optionsStore.options.localization.selectTime),v.innerHTML=this.display._iconTag(this.optionsStore.options.display.icons.time).outerHTML,this.display._updateCalendarHeader(),this.optionsStore.refreshCurrentView()):(v.setAttribute("title",this.optionsStore.options.localization.selectDate),v.innerHTML=this.display._iconTag(this.optionsStore.options.display.icons.date).outerHTML,this.display._hasTime&&(this.handleShowClockContainers(F.showClock),this.display._update("clock"))),this.display.widget.querySelectorAll(`.${x.css.dateContainer}, .${x.css.timeContainer}`).forEach(ut=>ne.toggle(ut)),this._eventEmitters.viewUpdate.emit();break;case F.showClock:case F.showHours:case F.showMinutes:case F.showSeconds:!this.optionsStore.options.display.sideBySide&&this.optionsStore.currentView!=="clock"&&(ne.hideImmediately(this.display.widget.querySelector(`div.${x.css.dateContainer}`)),ne.showImmediately(this.display.widget.querySelector(`div.${x.css.timeContainer}`))),this.handleShowClockContainers(u);break;case F.clear:this.dates.setValue(null),this.display._updateCalendarHeader();break;case F.close:this.display.hide();break;case F.today:const U=new Ut().setLocale(this.optionsStore.options.localization.locale);this._eventEmitters.updateViewDate.emit(U),this.validation.isValid(U,A.date)&&this.dates.setValue(U,this.dates.lastPickedIndex);break}}handleShowClockContainers(a){if(!this.display._hasTime){x.errorMessages.throwError("Cannot show clock containers when time is disabled.");return}this.optionsStore.currentView="clock",this.display.widget.querySelectorAll(`.${x.css.timeContainer} > div`).forEach(v=>v.style.display="none");let u="";switch(a){case F.showClock:u=x.css.clockContainer,this.display._update("clock");break;case F.showHours:u=x.css.hourContainer,this.display._update(A.hours);break;case F.showMinutes:u=x.css.minuteContainer,this.display._update(A.minutes);break;case F.showSeconds:u=x.css.secondContainer,this.display._update(A.seconds);break}this.display.widget.getElementsByClassName(u)[0].style.display="grid"}handleNextPrevious(a){const{unit:u,step:v}=pi[this.optionsStore.currentCalendarViewMode];a===F.next?this.optionsStore.viewDate.manipulate(v,u):this.optionsStore.viewDate.manipulate(v*-1,u),this._eventEmitters.viewUpdate.emit(),this.display._showMode()}hideOrClock(a){this.optionsStore.options.display.components.useTwentyfourHour&&!this.optionsStore.options.display.components.minutes&&!this.optionsStore.options.display.keepOpen&&!this.optionsStore.options.display.inline?this.display.hide():this.do(a,F.showClock)}manipulateAndSet(a,u,v=1){const g=a.manipulate(v,u);this.validation.isValid(g,u)&&this.dates.setValue(g,this.dates.lastPickedIndex)}}class vr{constructor(a,u={}){this._subscribers={},this._isDisabled=!1,this._inputChangeEvent=v=>{if(v==null?void 0:v.detail)return;const S=()=>{this.dates.lastPicked&&(this.optionsStore.viewDate=this.dates.lastPicked.clone)},m=this.optionsStore.input.value;if(this.optionsStore.options.multipleDates)try{const I=m.split(this.optionsStore.options.multipleDatesSeparator);for(let O=0;O<I.length;O++)this.dates.setFromInput(I[O],O);S()}catch{console.warn("TD: Something went wrong trying to set the multipleDates values from the input field.")}else this.dates.setFromInput(m,0),S()},this._toggleClickEvent=()=>{var v,g;((v=this.optionsStore.element)==null?void 0:v.disabled)||((g=this.optionsStore.input)==null?void 0:g.disabled)||this.toggle()},nr(),this._eventEmitters=K.locate(Dn),this.optionsStore=K.locate(Wt),this.display=K.locate(Qo),this.dates=K.locate(ve),this.actions=K.locate(mr),a||x.errorMessages.mustProvideElement(),this.optionsStore.element=a,this._initializeOptions(u,Wi,!0),this.optionsStore.viewDate.setLocale(this.optionsStore.options.localization.locale),this.optionsStore.unset=!0,this._initializeInput(),this._initializeToggle(),this.optionsStore.options.display.inline&&this.display.show(),this._eventEmitters.triggerEvent.subscribe(v=>{this._triggerEvent(v)}),this._eventEmitters.viewUpdate.subscribe(()=>{this._viewUpdate()}),this._eventEmitters.updateViewDate.subscribe(v=>{this.viewDate=v})}get viewDate(){return this.optionsStore.viewDate}set viewDate(a){this.optionsStore.viewDate=a,this.optionsStore.viewDate.setLocale(this.optionsStore.options.localization.locale),this.display._update(this.optionsStore.currentView==="clock"?"clock":"calendar")}updateOptions(a,u=!1){u?this._initializeOptions(a,Wi):this._initializeOptions(a,this.optionsStore.options),this.display._rebuild()}toggle(){this._isDisabled||this.display.toggle()}show(){this._isDisabled||this.display.show()}hide(){this.display.hide()}disable(){var a;this._isDisabled=!0,(a=this.optionsStore.input)==null||a.setAttribute("disabled","disabled"),this.display.hide()}enable(){var a;this._isDisabled=!1,(a=this.optionsStore.input)==null||a.removeAttribute("disabled")}clear(){this.optionsStore.input.value="",this.dates.clear()}subscribe(a,u){typeof a=="string"&&(a=[a]);let v;Array.isArray(u)?v=u:v=[u],a.length!==v.length&&x.errorMessages.subscribeMismatch();const g=[];for(let S=0;S<a.length;S++){const m=a[S];if(Array.isArray(this._subscribers[m])||(this._subscribers[m]=[]),this._subscribers[m].push(v[S]),g.push({unsubscribe:this._unsubscribe.bind(this,m,this._subscribers[m].length-1)}),a.length===1)return g[0]}return g}dispose(){var a,u,v;this.display.hide(),this.display._dispose(),this._eventEmitters.destroy(),(a=this.optionsStore.input)==null||a.removeEventListener("change",this._inputChangeEvent),this.optionsStore.options.allowInputToggle&&((u=this.optionsStore.input)==null||u.removeEventListener("click",this._toggleClickEvent)),(v=this._toggle)==null||v.removeEventListener("click",this._toggleClickEvent),this._subscribers={}}locale(a){let u=gr[a];!u||this.updateOptions({localization:u})}_triggerEvent(a){var v,g;a.viewMode=this.optionsStore.currentView;const u=a.type===x.events.change;if(u){const{date:S,oldDate:m,isClear:I}=a;if(S&&m&&S.isSame(m)||!I&&!S&&!m)return;this._handleAfterChangeEvent(a),(v=this.optionsStore.input)==null||v.dispatchEvent(new CustomEvent(a.type,{detail:a})),(g=this.optionsStore.input)==null||g.dispatchEvent(new CustomEvent("change",{detail:a}))}if(this.optionsStore.element.dispatchEvent(new CustomEvent(a.type,{detail:a})),window.jQuery){const S=window.jQuery;u&&this.optionsStore.input?S(this.optionsStore.input).trigger(a):S(this.optionsStore.element).trigger(a)}this._publish(a)}_publish(a){!Array.isArray(this._subscribers[a.type])||this._subscribers[a.type].forEach(u=>{u(a)})}_viewUpdate(){this._triggerEvent({type:x.events.update,viewDate:this.optionsStore.viewDate.clone})}_unsubscribe(a,u){this._subscribers[a].splice(u,1)}_initializeOptions(a,u,v=!1){var S,m;let g=Ot.deepCopy(a);g=Ot._mergeOptions(g,u),v&&(g=Ot._dataToOptions(this.optionsStore.element,g)),Ot._validateConflicts(g),g.viewDate=g.viewDate.setLocale(g.localization.locale),this.optionsStore.viewDate.isSame(g.viewDate)||(this.optionsStore.viewDate=g.viewDate),g.display.components.year&&(this.optionsStore.minimumCalendarViewMode=2),g.display.components.month&&(this.optionsStore.minimumCalendarViewMode=1),g.display.components.date&&(this.optionsStore.minimumCalendarViewMode=0),this.optionsStore.currentCalendarViewMode=Math.max(this.optionsStore.minimumCalendarViewMode,this.optionsStore.currentCalendarViewMode),pi[this.optionsStore.currentCalendarViewMode].name!==g.display.viewMode&&(this.optionsStore.currentCalendarViewMode=Math.max(pi.findIndex(I=>I.name===g.display.viewMode),this.optionsStore.minimumCalendarViewMode)),(S=this.display)!=null&&S.isVisible&&this.display._update("all"),g.display.components.useTwentyfourHour===void 0&&(g.display.components.useTwentyfourHour=!((m=g.viewDate.parts())!=null&&m.dayPeriod)),this.optionsStore.options=g}_initializeInput(){if(this.optionsStore.element.tagName=="INPUT")this.optionsStore.input=this.optionsStore.element;else{let a=this.optionsStore.element.dataset.tdTargetInput;a==null||a=="nearest"?this.optionsStore.input=this.optionsStore.element.querySelector("input"):this.optionsStore.input=this.optionsStore.element.querySelector(a)}!this.optionsStore.input||(!this.optionsStore.input.value&&this.optionsStore.options.defaultDate&&(this.optionsStore.input.value=this.dates.formatInput(this.optionsStore.options.defaultDate)),this.optionsStore.input.addEventListener("change",this._inputChangeEvent),this.optionsStore.options.allowInputToggle&&this.optionsStore.input.addEventListener("click",this._toggleClickEvent),this.optionsStore.input.value&&this._inputChangeEvent())}_initializeToggle(){if(this.optionsStore.options.display.inline)return;let a=this.optionsStore.element.dataset.tdTargetToggle;a=="nearest"&&(a='[data-td-toggle="datetimepicker"]'),this._toggle=a==null?this.optionsStore.element:this.optionsStore.element.querySelector(a),this._toggle.addEventListener("click",this._toggleClickEvent)}_handleAfterChangeEvent(a){var u,v;!this.optionsStore.options.promptTimeOnDateChange||this.optionsStore.options.display.inline||this.optionsStore.options.display.sideBySide||!this.display._hasTime||((u=this.display.widget)==null?void 0:u.getElementsByClassName(x.css.show)[0].classList.contains(x.css.timeContainer))||!a.oldDate&&this.optionsStore.options.useCurrent||a.oldDate&&((v=a.date)==null?void 0:v.isSame(a.oldDate))||(clearTimeout(this._currentPromptTimeTimeout),this._currentPromptTimeTimeout=setTimeout(()=>{this.display.widget&&this._eventEmitters.action.emit({e:{currentTarget:this.display.widget.querySelector(`.${x.css.switch} div`)},action:F.togglePicker})},this.optionsStore.options.promptTimeOnDateChangeTransitionDelay))}}const gr={};var ji={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(P,a){(function(u,v){v(a)})(Os,function(u){var v="1.9.3";function g(t){var e,n,r,c;for(n=1,r=arguments.length;n<r;n++){c=arguments[n];for(e in c)t[e]=c[e]}return t}var S=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function m(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var I=0;function O(t){return"_leaflet_id"in t||(t._leaflet_id=++I),t._leaflet_id}function q(t,e,n){var r,c,p,k;return k=function(){r=!1,c&&(p.apply(n,c),c=!1)},p=function(){r?c=arguments:(t.apply(n,arguments),setTimeout(k,e),r=!0)},p}function z(t,e,n){var r=e[1],c=e[0],p=r-c;return t===r&&n?t:((t-c)%p+p)%p+c}function U(){return!1}function ut(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function St(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function It(t){return St(t).split(/\s+/)}function ct(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?S(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function _t(t,e,n){var r=[];for(var c in t)r.push(encodeURIComponent(n?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!e||e.indexOf("?")===-1?"?":"&")+r.join("&")}var qi=/\{ *([\w_ -]+) *\}/g;function et(t,e){return t.replace(qi,function(n,r){var c=e[r];if(c===void 0)throw new Error("No value provided for variable "+n);return typeof c=="function"&&(c=c(e)),c})}var Ft=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Ee(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var Me="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function qe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var B=0;function Ke(t){var e=+new Date,n=Math.max(0,16-(e-B));return B=e+n,window.setTimeout(t,n)}var $t=window.requestAnimationFrame||qe("RequestAnimationFrame")||Ke,Ct=window.cancelAnimationFrame||qe("CancelAnimationFrame")||qe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function pt(t,e,n){if(n&&$t===Ke)t.call(e);else return $t.call(window,m(t,e))}function Bt(t){t&&Ct.call(window,t)}var ge={__proto__:null,extend:g,create:S,bind:m,get lastId(){return I},stamp:O,throttle:q,wrapNum:z,falseFn:U,formatNum:ut,trim:St,splitWords:It,setOptions:ct,getParamString:_t,template:et,isArray:Ft,indexOf:Ee,emptyImageUrl:Me,requestFn:$t,cancelFn:Ct,requestAnimFrame:pt,cancelAnimFrame:Bt};function Yt(){}Yt.extend=function(t){var e=function(){ct(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=S(n);r.constructor=e,e.prototype=r;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(e[c]=this[c]);return t.statics&&g(e,t.statics),t.includes&&(Ki(t.includes),g.apply(null,[r].concat(t.includes))),g(r,t),delete r.statics,delete r.includes,r.options&&(r.options=n.options?S(n.options):{},g(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,k=r._initHooks.length;p<k;p++)r._initHooks[p].call(this)}},e},Yt.include=function(t){var e=this.prototype.options;return g(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},Yt.mergeOptions=function(t){return g(this.prototype.options,t),this},Yt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Ki(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Ft(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(t,e,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],e);else{t=It(t);for(var c=0,p=t.length;c<p;c++)this._on(t[c],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var r in t)this._off(r,t[r],e);else{t=It(t);for(var c=arguments.length===1,p=0,k=t.length;p<k;p++)c?this._off(t[p]):this._off(t[p],e,n)}return this},_on:function(t,e,n,r){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var c={fn:e,ctx:n};r&&(c.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(c)}},_off:function(t,e,n){var r,c,p;if(!!this._events&&(r=this._events[t],!!r)){if(arguments.length===1){if(this._firingCount)for(c=0,p=r.length;c<p;c++)r[c].fn=U;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var k=this._listens(t,e,n);if(k!==!1){var T=r[k];this._firingCount&&(T.fn=U,this._events[t]=r=r.slice()),r.splice(k,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=g({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var p=0,k=c.length;p<k;p++){var T=c[p],E=T.fn;T.once&&this.off(t,E,T.ctx),E.call(T.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e,n,r){typeof t!="string"&&console.warn('"string" type argument expected');var c=e;typeof e!="function"&&(r=!!e,c=void 0,n=void 0);var p=this._events&&this._events[t];if(p&&p.length&&this._listens(t,c,n)!==!1)return!0;if(r){for(var k in this._eventParents)if(this._eventParents[k].listens(t,e,n,r))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;n===this&&(n=void 0);for(var c=0,p=r.length;c<p;c++)if(r[c].fn===e&&r[c].ctx===n)return c;return!1},once:function(t,e,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],e,!0);else{t=It(t);for(var c=0,p=t.length;c<p;c++)this._on(t[c],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[O(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[O(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,g({layer:t.target,propagatedFrom:t.target},t),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var _e=Yt.extend(Rt);function G(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var mi=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(J(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(J(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mi(this.x),this.y=mi(this.y),this},distanceTo:function(t){t=J(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=J(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=J(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+ut(this.x)+", "+ut(this.y)+")"}};function J(t,e,n){return t instanceof G?t:Ft(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,e,n)}function mt(t,e){if(!!t)for(var n=e?[t,e]:t,r=0,c=n.length;r<c;r++)this.extend(n[r])}mt.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)e=n=J(t);else if(t=zt(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof G?t=J(t):t=zt(t),t instanceof mt?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=zt(t);var e=this.min,n=this.max,r=t.min,c=t.max,p=c.x>=e.x&&r.x<=n.x,k=c.y>=e.y&&r.y<=n.y;return p&&k},overlaps:function(t){t=zt(t);var e=this.min,n=this.max,r=t.min,c=t.max,p=c.x>e.x&&r.x<n.x,k=c.y>e.y&&r.y<n.y;return p&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,r=Math.abs(e.x-n.x)*t,c=Math.abs(e.y-n.y)*t;return zt(J(e.x-r,e.y-c),J(n.x+r,n.y+c))},equals:function(t){return t?(t=zt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function zt(t,e){return!t||t instanceof mt?t:new mt(t,e)}function Nt(t,e){if(!!t)for(var n=e?[t,e]:t,r=0,c=n.length;r<c;r++)this.extend(n[r])}Nt.prototype={extend:function(t){var e=this._southWest,n=this._northEast,r,c;if(t instanceof rt)r=t,c=t;else if(t instanceof Nt){if(r=t._southWest,c=t._northEast,!r||!c)return this}else return t?this.extend(ot(t)||Lt(t)):this;return!e&&!n?(this._southWest=new rt(r.lat,r.lng),this._northEast=new rt(c.lat,c.lng)):(e.lat=Math.min(r.lat,e.lat),e.lng=Math.min(r.lng,e.lng),n.lat=Math.max(c.lat,n.lat),n.lng=Math.max(c.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,c=Math.abs(e.lng-n.lng)*t;return new Nt(new rt(e.lat-r,e.lng-c),new rt(n.lat+r,n.lng+c))},getCenter:function(){return new rt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new rt(this.getNorth(),this.getWest())},getSouthEast:function(){return new rt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof rt||"lat"in t?t=ot(t):t=Lt(t);var e=this._southWest,n=this._northEast,r,c;return t instanceof Nt?(r=t.getSouthWest(),c=t.getNorthEast()):r=c=t,r.lat>=e.lat&&c.lat<=n.lat&&r.lng>=e.lng&&c.lng<=n.lng},intersects:function(t){t=Lt(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),c=t.getNorthEast(),p=c.lat>=e.lat&&r.lat<=n.lat,k=c.lng>=e.lng&&r.lng<=n.lng;return p&&k},overlaps:function(t){t=Lt(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),c=t.getNorthEast(),p=c.lat>e.lat&&r.lat<n.lat,k=c.lng>e.lng&&r.lng<n.lng;return p&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=Lt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Lt(t,e){return t instanceof Nt?t:new Nt(t,e)}function rt(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}rt.prototype={equals:function(t,e){if(!t)return!1;t=ot(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+ut(this.lat,t)+", "+ut(this.lng,t)+")"},distanceTo:function(t){return At.distance(this,ot(t))},wrap:function(){return At.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return Lt([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new rt(this.lat,this.lng,this.alt)}};function ot(t,e,n){return t instanceof rt?t:Ft(t)&&typeof t[0]!="object"?t.length===3?new rt(t[0],t[1],t[2]):t.length===2?new rt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new rt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new rt(t,e,n)}var wt={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),c=this.transformation.transform(e.max,n);return new mt(r,c)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?z(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?z(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new rt(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,c=e.lng-n.lng;if(r===0&&c===0)return t;var p=t.getSouthWest(),k=t.getNorthEast(),T=new rt(p.lat-r,p.lng-c),E=new rt(k.lat-r,k.lng-c);return new Nt(T,E)}},At=g({},wt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,c=e.lat*n,p=Math.sin((e.lat-t.lat)*n/2),k=Math.sin((e.lng-t.lng)*n/2),T=p*p+Math.cos(r)*Math.cos(c)*k*k,E=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return this.R*E}}),vi=6378137,ye={R:vi,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),c=Math.sin(r*e);return new G(this.R*t.lng*e,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var e=180/Math.PI;return new rt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=vi*Math.PI;return new mt([-t,-t],[t,t])}()};function jt(t,e,n,r){if(Ft(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=r}jt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new G((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function be(t,e,n,r){return new jt(t,e,n,r)}var Ae=g({},At,{code:"EPSG:3857",projection:ye,transformation:function(){var t=.5/(Math.PI*ye.R);return be(t,.5,-t,.5)}()}),gi=g({},Ae,{code:"EPSG:900913"});function De(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function we(t,e){var n="",r,c,p,k,T,E;for(r=0,p=t.length;r<p;r++){for(T=t[r],c=0,k=T.length;c<k;c++)E=T[c],n+=(c?"L":"M")+E.x+" "+E.y;n+=e?V.svg?"z":"x":""}return n||"M0 0"}var Ge=document.documentElement.style,Ie="ActiveXObject"in window,Gi=Ie&&!document.addEventListener,Jt="msLaunchUri"in navigator&&!("documentMode"in document),oe=qt("webkit"),_i=qt("android"),yi=qt("android 2")||qt("android 3"),Yi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ji=_i&&qt("Google")&&Yi<537&&!("AudioNode"in window),Ye=!!window.opera,Je=!Jt&&qt("chrome"),bi=qt("gecko")&&!oe&&!Ye&&!Ie,Xi=!Je&&qt("safari"),ke=qt("phantom"),wi="OTransition"in Ge,Qi=navigator.platform.indexOf("Win")===0,y=Ie&&"transition"in Ge,ki="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yi,tn="MozPerspective"in Ge,xi=!window.L_DISABLE_3D&&(y||ki||tn)&&!wi&&!ke,ze=typeof orientation<"u"||qt("mobile"),en=ze&&oe,nn=ze&&ki,xe=!window.PointerEvent&&window.MSPointerEvent,st=!!(window.PointerEvent||xe),Tt="ontouchstart"in window||!!window.TouchEvent,at=!window.L_NO_TOUCH&&(Tt||st),zn=ze&&Ye,Nn=ze&&bi,On=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bn=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",U,e),window.removeEventListener("testPassiveEventSupport",U,e)}catch{}return t}(),Rn=function(){return!!document.createElement("canvas").getContext}(),Xe=!!(document.createElementNS&&De("svg").createSVGRect),Hn=!!Xe&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),$n=!Xe&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Fn=navigator.platform.indexOf("Mac")===0,dt=navigator.platform.indexOf("Linux")===0;function qt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var V={ie:Ie,ielt9:Gi,edge:Jt,webkit:oe,android:_i,android23:yi,androidStock:Ji,opera:Ye,chrome:Je,gecko:bi,safari:Xi,phantom:ke,opera12:wi,win:Qi,ie3d:y,webkit3d:ki,gecko3d:tn,any3d:xi,mobile:ze,mobileWebkit:en,mobileWebkit3d:nn,msPointer:xe,pointer:st,touch:at,touchNative:Tt,mobileOpera:zn,mobileGecko:Nn,retina:On,passiveEvents:Bn,canvas:Rn,svg:Xe,vml:$n,inlineSvg:Hn,mac:Fn,linux:dt},on=V.msPointer?"MSPointerDown":"pointerdown",sn=V.msPointer?"MSPointerMove":"pointermove",rn=V.msPointer?"MSPointerUp":"pointerup",an=V.msPointer?"MSPointerCancel":"pointercancel",Si={touchstart:on,touchmove:sn,touchend:rn,touchcancel:an},ln={touchstart:qn,touchmove:Qe,touchend:Qe,touchcancel:Qe},se={},cn=!1;function Zn(t,e,n){return e==="touchstart"&&jn(),ln[e]?(n=ln[e].bind(this,n),t.addEventListener(Si[e],n,!1),n):(console.warn("wrong event specified:",e),U)}function Vn(t,e,n){if(!Si[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Si[e],n,!1)}function Un(t){se[t.pointerId]=t}function Wn(t){se[t.pointerId]&&(se[t.pointerId]=t)}function hn(t){delete se[t.pointerId]}function jn(){cn||(document.addEventListener(on,Un,!0),document.addEventListener(sn,Wn,!0),document.addEventListener(rn,hn,!0),document.addEventListener(an,hn,!0),cn=!0)}function Qe(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in se)e.touches.push(se[n]);e.changedTouches=[e],t(e)}}function qn(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Dt(e),Qe(t,e)}function Kn(t){var e={},n,r;for(r in t)n=t[r],e[r]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Gn=200;function Yn(t,e){t.addEventListener("dblclick",e);var n=0,r;function c(p){if(p.detail!==1){r=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var k=Ni(p);if(!(k.some(function(E){return E instanceof HTMLLabelElement&&E.attributes.for})&&!k.some(function(E){return E instanceof HTMLInputElement||E instanceof HTMLSelectElement}))){var T=Date.now();T-n<=Gn?(r++,r===2&&e(Kn(p))):r=1,n=T}}}return t.addEventListener("click",c),{dblclick:e,simDblclick:c}}function Jn(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Ci=ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ne=ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),un=Ne==="webkitTransition"||Ne==="OTransition"?Ne+"End":"transitionend";function dn(t){return typeof t=="string"?document.getElementById(t):t}function Oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return n==="auto"?null:n}function nt(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function vt(t){var e=t.parentNode;e&&e.removeChild(t)}function ti(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Se(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Li(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=ei(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function tt(t,e){if(t.classList!==void 0)for(var n=It(e),r=0,c=n.length;r<c;r++)t.classList.add(n[r]);else if(!Li(t,e)){var p=ei(t);Ti(t,(p?p+" ":"")+e)}}function yt(t,e){t.classList!==void 0?t.classList.remove(e):Ti(t,St((" "+ei(t)+" ").replace(" "+e+" "," ")))}function Ti(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function ei(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Zt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Xn(t,e)}function Xn(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function ii(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function re(t,e,n){var r=e||new G(0,0);t.style[Ci]=(V.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function kt(t,e){t._leaflet_pos=e,V.any3d?re(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ae(t){return t._leaflet_pos||new G(0,0)}var Be,Re,Pi;if("onselectstart"in document)Be=function(){Y(window,"selectstart",Dt)},Re=function(){lt(window,"selectstart",Dt)};else{var He=ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Be=function(){if(He){var t=document.documentElement.style;Pi=t[He],t[He]="none"}},Re=function(){He&&(document.documentElement.style[He]=Pi,Pi=void 0)}}function Ei(){Y(window,"dragstart",Dt)}function $e(){lt(window,"dragstart",Dt)}var ni,Mi;function Pt(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(Le(),ni=t,Mi=t.style.outline,t.style.outline="none",Y(window,"keydown",Le))}function Le(){!ni||(ni.style.outline=Mi,ni=void 0,Mi=void 0,lt(window,"keydown",Le))}function oi(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Fe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var si={__proto__:null,TRANSFORM:Ci,TRANSITION:Ne,TRANSITION_END:un,get:dn,getStyle:Oe,create:nt,remove:vt,empty:ti,toFront:Se,toBack:Ce,hasClass:Li,addClass:tt,removeClass:yt,setClass:Ti,getClass:ei,setOpacity:Zt,testProp:ii,setTransform:re,setPosition:kt,getPosition:ae,get disableTextSelection(){return Be},get enableTextSelection(){return Re},disableImageDrag:Ei,enableImageDrag:$e,preventOutline:Pt,restoreOutline:Le,getSizedParentNode:oi,getScale:Fe};function Y(t,e,n,r){if(e&&typeof e=="object")for(var c in e)Di(t,c,e[c],n);else{e=It(e);for(var p=0,k=e.length;p<k;p++)Di(t,e[p],n,r)}return this}var Vt="_leaflet_events";function lt(t,e,n,r){if(arguments.length===1)Ai(t),delete t[Vt];else if(e&&typeof e=="object")for(var c in e)Ii(t,c,e[c],n);else if(e=It(e),arguments.length===2)Ai(t,function(T){return Ee(e,T)!==-1});else for(var p=0,k=e.length;p<k;p++)Ii(t,e[p],n,r);return this}function Ai(t,e){for(var n in t[Vt]){var r=n.split(/\d/)[0];(!e||e(r))&&Ii(t,r,null,null,n)}}var ri={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Di(t,e,n,r){var c=e+O(n)+(r?"_"+O(r):"");if(t[Vt]&&t[Vt][c])return this;var p=function(T){return n.call(r||t,T||window.event)},k=p;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?p=Zn(t,e,p):V.touch&&e==="dblclick"?p=Yn(t,p):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(ri[e]||e,p,V.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(p=function(T){T=T||window.event,i(t,T)&&k(T)},t.addEventListener(ri[e],p,!1)):t.addEventListener(e,k,!1):t.attachEvent("on"+e,p),t[Vt]=t[Vt]||{},t[Vt][c]=p}function Ii(t,e,n,r,c){c=c||e+O(n)+(r?"_"+O(r):"");var p=t[Vt]&&t[Vt][c];if(!p)return this;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?Vn(t,e,p):V.touch&&e==="dblclick"?Jn(t,p):"removeEventListener"in t?t.removeEventListener(ri[e]||e,p,!1):t.detachEvent("on"+e,p),t[Vt][c]=null}function le(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function zi(t){return Di(t,"wheel",le),this}function Ze(t){return Y(t,"mousedown touchstart dblclick contextmenu",le),t._leaflet_disable_click=!0,this}function Dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ce(t){return Dt(t),le(t),this}function Ni(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function s(t,e){if(!e)return new G(t.clientX,t.clientY);var n=Fe(e),r=n.boundingClientRect;return new G((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var h=V.linux&&V.chrome?window.devicePixelRatio:V.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function f(t){return V.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/h:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function i(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var o={__proto__:null,on:Y,off:lt,stopPropagation:le,disableScrollPropagation:zi,disableClickPropagation:Ze,preventDefault:Dt,stop:ce,getPropagationPath:Ni,getMousePosition:s,getWheelDelta:f,isExternalTarget:i,addListener:Y,removeListener:lt},l=_e.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=ae(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=pt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),kt(this._el,n),this.fire("step")},_complete:function(){Bt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),d=_e.extend({options:{crs:Ae,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=ct(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(ot(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ne&&V.any3d&&!V.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Y(this._proxy,un,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(ot(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=g({animate:n.animate},n.zoom),n.pan=g({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),c=this.getSize().divideBy(2),p=t instanceof G?t:this.latLngToContainerPoint(t),k=p.subtract(c).multiplyBy(1-1/r),T=this.containerPointToLatLng(c.add(k));return this.setView(T,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():Lt(t);var n=J(e.paddingTopLeft||e.padding||[0,0]),r=J(e.paddingBottomRight||e.padding||[0,0]),c=this.getBoundsZoom(t,!1,n.add(r));if(c=typeof e.maxZoom=="number"?Math.min(e.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var p=r.subtract(n).divideBy(2),k=this.project(t.getSouthWest(),c),T=this.project(t.getNorthEast(),c),E=this.unproject(k.add(T).divideBy(2).add(p),c);return{center:E,zoom:c}},fitBounds:function(t,e){if(t=Lt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=J(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new l,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!V.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),c=this.project(t),p=this.getSize(),k=this._zoom;t=ot(t),e=e===void 0?k:e;var T=Math.max(p.x,p.y),E=T*this.getZoomScale(k,e),N=c.distanceTo(r)||1,Z=1.42,Q=Z*Z;function it(Mt){var Tn=Mt?-1:1,As=Mt?E:T,Ds=E*E-T*T+Tn*Q*Q*N*N,Is=2*As*Q*N,ro=Ds/Is,Bo=Math.sqrt(ro*ro+1)-ro,zs=Bo<1e-9?-18:Math.log(Bo);return zs}function Gt(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function je(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}function Ln(Mt){return Gt(Mt)/je(Mt)}var Pe=it(0);function so(Mt){return T*(je(Pe)/je(Pe+Z*Mt))}function Ts(Mt){return T*(je(Pe)*Ln(Pe+Z*Mt)-Gt(Pe))/Q}function Ps(Mt){return 1-Math.pow(1-Mt,1.5)}var Es=Date.now(),No=(it(1)-Pe)/Z,Ms=n.duration?1e3*n.duration:1e3*No*.8;function Oo(){var Mt=(Date.now()-Es)/Ms,Tn=Ps(Mt)*No;Mt<=1?(this._flyToFrame=pt(Oo,this),this._move(this.unproject(r.add(c.subtract(r).multiplyBy(Ts(Tn)/N)),k),this.getScaleZoom(T/so(Tn),k),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Oo.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=Lt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,Lt(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=J(e.paddingTopLeft||e.padding||[0,0]),r=J(e.paddingBottomRight||e.padding||[0,0]),c=this.project(this.getCenter()),p=this.project(t),k=this.getPixelBounds(),T=zt([k.min.add(n),k.max.subtract(r)]),E=T.getSize();if(!T.contains(p)){this._enforcingBounds=!0;var N=p.subtract(T.getCenter()),Z=T.extend(p).getSize().subtract(E);c.x+=N.x<0?-Z.x:Z.x,c.y+=N.y<0?-Z.y:Z.y,this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=g({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),c=n.divideBy(2).round(),p=r.subtract(c);return!p.x&&!p.y?this:(t.animate&&t.pan?this.panBy(p):(t.pan&&this._rawPanBy(p),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=g({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=m(this._handleGeolocationResponse,this),n=m(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,r=new rt(e,n),c=r.toBounds(t.coords.accuracy*2),p=this._locateOptions;if(p.setView){var k=this.getBoundsZoom(c);this.setView(r,p.maxZoom?Math.min(k,p.maxZoom):k)}var T={latlng:r,bounds:c,timestamp:t.timestamp};for(var E in t.coords)typeof t.coords[E]=="number"&&(T[E]=t.coords[E]);this.fire("locationfound",T)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Bt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)vt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=nt("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new Nt(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=Lt(t),n=J(n||[0,0]);var r=this.getZoom()||0,c=this.getMinZoom(),p=this.getMaxZoom(),k=t.getNorthWest(),T=t.getSouthEast(),E=this.getSize().subtract(n),N=zt(this.project(T,r),this.project(k,r)).getSize(),Z=V.any3d?this.options.zoomSnap:1,Q=E.x/N.x,it=E.y/N.y,Gt=e?Math.max(Q,it):Math.min(Q,it);return r=this.getScaleZoom(Gt,r),Z&&(r=Math.round(r/(Z/100))*(Z/100),r=e?Math.ceil(r/Z)*Z:Math.floor(r/Z)*Z),Math.max(c,Math.min(p,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new mt(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(ot(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(J(t),e)},layerPointToLatLng:function(t){var e=J(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(ot(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ot(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Lt(t))},distance:function(t,e){return this.options.crs.distance(ot(t),ot(e))},containerPointToLayerPoint:function(t){return J(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return J(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(J(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ot(t)))},mouseEventToContainerPoint:function(t){return s(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=dn(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Y(e,"scroll",this._onScroll,this),this._containerId=O(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&V.any3d,tt(t,"leaflet-container"+(V.touch?" leaflet-touch":"")+(V.retina?" leaflet-retina":"")+(V.ielt9?" leaflet-oldie":"")+(V.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Oe(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(t.markerPane,"leaflet-zoom-hide"),tt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){kt(this._mapPane,new G(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var c=this._zoom!==e;this._moveStart(c,n)._move(t,e)._moveEnd(c),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,r){e===void 0&&(e=this._zoom);var c=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((c||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Bt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){kt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[O(this._container)]=this;var e=t?lt:Y;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),V.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Bt(this._resizeRequest),this._resizeRequest=pt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],r,c=e==="mouseout"||e==="mouseover",p=t.target||t.srcElement,k=!1;p;){if(r=this._targets[O(p)],r&&(e==="click"||e==="preclick")&&this._draggableMoved(r)){k=!0;break}if(r&&r.listens(e,!0)&&(c&&!i(p,t)||(n.push(r),c))||p===this._container)break;p=p.parentNode}return!n.length&&!k&&!c&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&Pt(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var r=g({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}var c=this._findEventTargets(t,e);if(n){for(var p=[],k=0;k<n.length;k++)n[k].listens(e,!0)&&p.push(n[k]);c=p.concat(c)}if(!!c.length){e==="contextmenu"&&Dt(t);var T=c[0],E={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var N=T.getLatLng&&(!T._radius||T._radius<=10);E.containerPoint=N?this.latLngToContainerPoint(T.getLatLng()):this.mouseEventToContainerPoint(t),E.layerPoint=this.containerPointToLayerPoint(E.containerPoint),E.latlng=N?T.getLatLng():this.layerPointToLatLng(E.layerPoint)}for(k=0;k<c.length;k++)if(c[k].fire(e,E,!0),E.originalEvent._stopped||c[k].options.bubblingMouseEvents===!1&&Ee(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ae(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return zt([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),c=this.getSize().divideBy(2),p=new mt(r.subtract(c),r.add(c)),k=this._getBoundsOffset(p,n,e);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?t:this.unproject(r.add(k),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new mt(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=zt(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),c=r.min.subtract(t.min),p=r.max.subtract(t.max),k=this._rebound(c.x,-p.x),T=this._rebound(c.y,-p.y);return new G(k,T)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=V.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=Ci,r=this._proxy.style[n];re(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();re(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),c=this._getCenterOffset(t)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(c)?!1:(pt(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){!this._mapPane||(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _(t,e){return new d(t,e)}var b=Yt.extend({options:{position:"topright"},initialize:function(t){ct(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return tt(e,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),w=function(t){return new b(t)};d.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=nt("div",e+"control-container",this._container);function r(c,p){var k=e+c+" "+e+p;t[c+p]=nt("div",k,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)vt(this._controlCorners[t]);vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var C=b.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){ct(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return b.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(O(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=nt("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ze(e),zi(e);var r=this._section=nt("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Y(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=nt("a",t+"-toggle",e);c.href="#",c.title="Layers",c.setAttribute("role","button"),Y(c,{keydown:function(p){p.keyCode===13&&this._expandSafely()},click:function(p){Dt(p),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=nt("div",t+"-base",r),this._separator=nt("div",t+"-separator",r),this._overlaysList=nt("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&O(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(m(function(r,c){return this.options.sortFunction(r.layer,c.layer,r.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ti(this._baseLayersList),ti(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,c=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,c+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(O(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),r;t.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=n):r=this._createRadioElement("leaflet-base-layers_"+O(this),n),this._layerControlInputs.push(r),r.layerId=O(t.layer),Y(r,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var p=document.createElement("span");e.appendChild(p),p.appendChild(r),p.appendChild(c);var k=t.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t=this._layerControlInputs,e,n,r=[],c=[];this._handlingClick=!0;for(var p=t.length-1;p>=0;p--)e=t[p],n=this._getLayer(e.layerId).layer,e.checked?r.push(n):e.checked||c.push(n);for(p=0;p<c.length;p++)this._map.hasLayer(c[p])&&this._map.removeLayer(c[p]);for(p=0;p<r.length;p++)this._map.hasLayer(r[p])||this._map.addLayer(r[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,r=this._map.getZoom(),c=t.length-1;c>=0;c--)e=t[c],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;Y(t,"click",Dt),this.expand(),setTimeout(function(){lt(t,"click",Dt)})}}),M=function(t,e,n){return new C(t,e,n)},D=b.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=nt("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,c){var p=nt("a",n,r);return p.innerHTML=t,p.href="#",p.title=e,p.setAttribute("role","button"),p.setAttribute("aria-label",e),Ze(p),Y(p,"click",ce),Y(p,"click",c,this),Y(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";yt(this._zoomInButton,e),yt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(tt(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(tt(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});d.mergeOptions({zoomControl:!0}),d.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new D,this.addControl(this.zoomControl))});var R=function(t){return new D(t)},W=b.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=nt("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=nt("div",e,n)),t.imperial&&(this._iScale=nt("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,r,c;e>5280?(n=e/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+" mi",r/n)):(c=this._getRoundNum(e),this._updateScale(this._iScale,c+" ft",c/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),H=function(t){return new W(t)},j='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',X=b.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(V.inlineSvg?j+" ":"")+"Leaflet</a>"},initialize:function(t){ct(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=nt("div","leaflet-control-attribution"),Ze(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});d.mergeOptions({attributionControl:!0}),d.addInitHook(function(){this.options.attributionControl&&new X().addTo(this)});var ht=function(t){return new X(t)};b.Layers=C,b.Zoom=D,b.Scale=W,b.Attribution=X,w.layers=M,w.zoom=R,w.scale=H,w.attribution=ht;var gt=Yt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gt.addTo=function(t,e){return t.addHandler(e,this),this};var xt={Events:Rt},Ht=V.touch?"touchstart mousedown":"mousedown",bt=_e.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){ct(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Y(this._dragStartTarget,Ht,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(bt._dragging===this&&this.finishDrag(!0),lt(this._dragStartTarget,Ht,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!Li(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){bt._dragging===this&&this.finishDrag();return}if(!(bt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(bt._dragging=this,this._preventOutline&&Pt(this._element),Ei(),Be(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=oi(this._element);this._startPoint=new G(e.clientX,e.clientY),this._startPos=ae(this._element),this._parentScale=Fe(n);var r=t.type==="mousedown";Y(document,r?"mousemove":"touchmove",this._onMove,this),Y(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new G(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,tt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),kt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),lt(document,"mousemove touchmove",this._onMove,this),lt(document,"mouseup touchend touchcancel",this._onUp,this),$e(),Re(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,bt._dragging=!1}});function Et(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=fn(t,n),t=Ue(t,n),t}function Ve(t,e,n){return Math.sqrt(Bi(t,e,n,!0))}function he(t,e,n){return Bi(t,e,n)}function Ue(t,e){var n=t.length,r=typeof Uint8Array!=void 0+""?Uint8Array:Array,c=new r(n);c[0]=c[n-1]=1,ai(t,c,e,0,n-1);var p,k=[];for(p=0;p<n;p++)c[p]&&k.push(t[p]);return k}function ai(t,e,n,r,c){var p=0,k,T,E;for(T=r+1;T<=c-1;T++)E=Bi(t[T],t[r],t[c],!0),E>p&&(k=T,p=E);p>n&&(e[k]=1,ai(t,e,n,r,k),ai(t,e,n,k,c))}function fn(t,e){for(var n=[t[0]],r=1,c=0,p=t.length;r<p;r++)ts(t[r],t[c])>e&&(n.push(t[r]),c=r);return c<p-1&&n.push(t[p-1]),n}var Oi;function pn(t,e,n,r,c){var p=r?Oi:We(t,n),k=We(e,n),T,E,N;for(Oi=k;;){if(!(p|k))return[t,e];if(p&k)return!1;T=p||k,E=mn(t,e,T,n,c),N=We(E,n),T===p?(t=E,p=N):(e=E,k=N)}}function mn(t,e,n,r,c){var p=e.x-t.x,k=e.y-t.y,T=r.min,E=r.max,N,Z;return n&8?(N=t.x+p*(E.y-t.y)/k,Z=E.y):n&4?(N=t.x+p*(T.y-t.y)/k,Z=T.y):n&2?(N=E.x,Z=t.y+k*(E.x-t.x)/p):n&1&&(N=T.x,Z=t.y+k*(T.x-t.x)/p),new G(N,Z,c)}function We(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function ts(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Bi(t,e,n,r){var c=e.x,p=e.y,k=n.x-c,T=n.y-p,E=k*k+T*T,N;return E>0&&(N=((t.x-c)*k+(t.y-p)*T)/E,N>1?(c=n.x,p=n.y):N>0&&(c+=k*N,p+=T*N)),k=t.x-c,T=t.y-p,r?k*k+T*T:new G(c,p)}function Kt(t){return!Ft(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function ho(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kt(t)}function uo(t,e){var n,r,c,p,k,T,E,N;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Z=[];for(var Q in t)Z.push(e.project(ot(t[Q])));var it=Z.length;for(n=0,r=0;n<it-1;n++)r+=Z[n].distanceTo(Z[n+1])/2;if(r===0)N=Z[0];else for(n=0,p=0;n<it-1;n++)if(k=Z[n],T=Z[n+1],c=k.distanceTo(T),p+=c,p>r){E=(p-r)/c,N=[T.x-E*(T.x-k.x),T.y-E*(T.y-k.y)];break}return e.unproject(J(N))}var es={__proto__:null,simplify:Et,pointToSegmentDistance:Ve,closestPointOnSegment:he,clipSegment:pn,_getEdgeIntersection:mn,_getBitCode:We,_sqClosestPointOnSegment:Bi,isFlat:Kt,_flat:ho,polylineCenter:uo};function fo(t,e,n){var r,c=[1,4,2,8],p,k,T,E,N,Z,Q,it;for(p=0,Z=t.length;p<Z;p++)t[p]._code=We(t[p],e);for(T=0;T<4;T++){for(Q=c[T],r=[],p=0,Z=t.length,k=Z-1;p<Z;k=p++)E=t[p],N=t[k],E._code&Q?N._code&Q||(it=mn(N,E,Q,e,n),it._code=We(it,e),r.push(it)):(N._code&Q&&(it=mn(N,E,Q,e,n),it._code=We(it,e),r.push(it)),r.push(E));t=r}return t}function po(t,e){var n,r,c,p,k,T,E,N,Z;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Q=[];for(var it in t)Q.push(e.project(ot(t[it])));var Gt=Q.length;for(T=E=N=0,n=0,r=Gt-1;n<Gt;r=n++)c=Q[n],p=Q[r],k=c.y*p.x-p.y*c.x,E+=(c.x+p.x)*k,N+=(c.y+p.y)*k,T+=k*3;return T===0?Z=Q[0]:Z=[E/T,N/T],e.unproject(J(Z))}var is={__proto__:null,clipPolygon:fo,polygonCenter:po},Qn={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new rt(t.y,t.x)},bounds:new mt([-180,-90],[180,90])},to={R:6378137,R_MINOR:6356752314245179e-9,bounds:new mt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,c=this.R_MINOR/n,p=Math.sqrt(1-c*c),k=p*Math.sin(r),T=Math.tan(Math.PI/4-r/2)/Math.pow((1-k)/(1+k),p/2);return r=-n*Math.log(Math.max(T,1e-10)),new G(t.lng*e*n,r)},unproject:function(t){for(var e=180/Math.PI,n=this.R,r=this.R_MINOR/n,c=Math.sqrt(1-r*r),p=Math.exp(-t.y/n),k=Math.PI/2-2*Math.atan(p),T=0,E=.1,N;T<15&&Math.abs(E)>1e-7;T++)N=c*Math.sin(k),N=Math.pow((1-N)/(1+N),c/2),E=Math.PI/2-2*Math.atan(p*N)-k,k+=E;return new rt(k*e,t.x*e/n)}},ns={__proto__:null,LonLat:Qn,Mercator:to,SphericalMercator:ye},os=g({},At,{code:"EPSG:3395",projection:to,transformation:function(){var t=.5/(Math.PI*to.R);return be(t,.5,-t,.5)}()}),mo=g({},At,{code:"EPSG:4326",projection:Qn,transformation:be(1/180,1,-1/180,.5)}),ss=g({},wt,{projection:Qn,transformation:be(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});wt.Earth=At,wt.EPSG3395=os,wt.EPSG3857=Ae,wt.EPSG900913=gi,wt.EPSG4326=mo,wt.Simple=ss;var Xt=_e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[O(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[O(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(!!e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});d.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=O(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=O(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return O(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?Ft(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[O(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=O(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var c=this._zoomBoundLayers[r].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),e=c.maxZoom===void 0?e:Math.max(e,c.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var li=Xt.extend({initialize:function(t,e){ct(this,e),this._layers={};var n,r;if(t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[t]&&r[t].apply(r,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return O(t)}}),rs=function(t,e){return new li(t,e)},ue=li.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),li.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),li.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Nt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),as=function(t,e){return new ue(t,e)},ci=Yt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){ct(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];typeof r=="number"&&(r=[r,r]);var c=J(r),p=J(e==="shadow"&&n.shadowAnchor||n.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),p&&(t.style.marginLeft=-p.x+"px",t.style.marginTop=-p.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return V.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ls(t){return new ci(t)}var Ri=ci.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ri.imagePath!="string"&&(Ri.imagePath=this._detectIconPath()),(this.options.imagePath||Ri.imagePath)+ci.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,r,c){var p=r.exec(n);return p&&p[c]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=nt("div","leaflet-default-icon-path",document.body),e=Oe(t,"background-image")||Oe(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),vo=gt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new bt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,p=ae(e._icon),k=n.getPixelBounds(),T=n.getPixelOrigin(),E=zt(k.min._subtract(T).add(c),k.max._subtract(T).subtract(c));if(!E.contains(p)){var N=J((Math.max(E.max.x,p.x)-E.max.x)/(k.max.x-E.max.x)-(Math.min(E.min.x,p.x)-E.min.x)/(k.min.x-E.min.x),(Math.max(E.max.y,p.y)-E.max.y)/(k.max.y-E.max.y)-(Math.min(E.min.y,p.y)-E.min.y)/(k.min.y-E.min.y)).multiplyBy(r);n.panBy(N,{animate:!1}),this._draggable._newPos._add(N),this._draggable._startPos._add(N),kt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=pt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Bt(this._panRequest),this._panRequest=pt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=ae(e._icon),c=e._map.layerPointToLatLng(r);n&&kt(n,r),e._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Bt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),vn=Xt.extend({options:{icon:new Ri,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){ct(this,e),this._latlng=ot(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=ot(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),tt(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(n,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),p=!1;c!==this._shadow&&(this._removeShadow(),p=!0),c&&(tt(c,e),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&p&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(this._icon,"focus",this._panOnFocus,this),vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&kt(this._icon,t),this._shadow&&kt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!!this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Zt(this._icon,t),this._shadow&&Zt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var e=this.options.icon.options,n=e.iconSize?J(e.iconSize):J(0,0),r=e.iconAnchor?J(e.iconAnchor):J(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cs(t,e){return new vn(t,e)}var Te=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return ct(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gn=Te.extend({options:{fill:!0,radius:10},initialize:function(t,e){ct(this,e),this._latlng=ot(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=ot(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Te.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new mt(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function hs(t,e){return new gn(t,e)}var eo=gn.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=g({},n,{radius:e})),ct(this,e),this._latlng=ot(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Nt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Te.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===At.distance){var c=Math.PI/180,p=this._mRadius/At.R/c,k=n.project([e+p,t]),T=n.project([e-p,t]),E=k.add(T).divideBy(2),N=n.unproject(E).lat,Z=Math.acos((Math.cos(p*c)-Math.sin(e*c)*Math.sin(N*c))/(Math.cos(e*c)*Math.cos(N*c)))/c;(isNaN(Z)||Z===0)&&(Z=p/Math.cos(Math.PI/180*e)),this._point=E.subtract(n.getPixelOrigin()),this._radius=isNaN(Z)?0:E.x-n.project([N,t-Z]).x,this._radiusY=E.y-k.y}else{var Q=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(Q).x}this._updateBounds()}});function us(t,e,n){return new eo(t,e,n)}var de=Te.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){ct(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,r=Bi,c,p,k=0,T=this._parts.length;k<T;k++)for(var E=this._parts[k],N=1,Z=E.length;N<Z;N++){c=E[N-1],p=E[N];var Q=r(t,c,p,!0);Q<e&&(e=Q,n=r(t,c,p))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=ot(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Nt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Kt(t),r=0,c=t.length;r<c;r++)n?(e[r]=ot(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new mt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new G(t,t);!this._rawPxBounds||(this._pxBounds=new mt([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var r=t[0]instanceof rt,c=t.length,p,k;if(r){for(k=[],p=0;p<c;p++)k[p]=this._map.latLngToLayerPoint(t[p]),n.extend(k[p]);e.push(k)}else for(p=0;p<c;p++)this._projectLatlngs(t[p],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,r,c,p,k,T,E;for(n=0,c=0,p=this._rings.length;n<p;n++)for(E=this._rings[n],r=0,k=E.length;r<k-1;r++)T=pn(E[r],E[r+1],t,r,!0),T&&(e[c]=e[c]||[],e[c].push(T[0]),(T[1]!==E[r+1]||r===k-2)&&(e[c].push(T[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=Et(t[n],e)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,c,p,k,T,E=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,p=this._parts.length;n<p;n++)for(T=this._parts[n],r=0,k=T.length,c=k-1;r<k;c=r++)if(!(!e&&r===0)&&Ve(t,T[c],T[r])<=E)return!0;return!1}});function ds(t,e){return new de(t,e)}de._flat=ho;var hi=de.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return po(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=de.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof rt&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){de.prototype._setLatLngs.call(this,t),Kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new G(e,e);if(t=new mt(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,c=this._rings.length,p;r<c;r++)p=fo(this._rings[r],t,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,r,c,p,k,T,E,N;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(p=0,E=this._parts.length;p<E;p++)for(n=this._parts[p],k=0,N=n.length,T=N-1;k<N;T=k++)r=n[k],c=n[T],r.y>t.y!=c.y>t.y&&t.x<(c.x-r.x)*(t.y-r.y)/(c.y-r.y)+r.x&&(e=!e);return e||de.prototype._containsPoint.call(this,t,!0)}});function fs(t,e){return new hi(t,e)}var fe=ue.extend({initialize:function(t,e){ct(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=Ft(t)?t:t.features,n,r,c;if(e){for(n=0,r=e.length;n<r;n++)c=e[n],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var p=this.options;if(p.filter&&!p.filter(t))return this;var k=_n(t,p);return k?(k.feature=wn(t),k.defaultOptions=k.options,this.resetStyle(k),p.onEachFeature&&p.onEachFeature(t,k),this.addLayer(k)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=g({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function _n(t,e){var n=t.type==="Feature"?t.geometry:t,r=n?n.coordinates:null,c=[],p=e&&e.pointToLayer,k=e&&e.coordsToLatLng||io,T,E,N,Z;if(!r&&!n)return null;switch(n.type){case"Point":return T=k(r),go(p,t,T,e);case"MultiPoint":for(N=0,Z=r.length;N<Z;N++)T=k(r[N]),c.push(go(p,t,T,e));return new ue(c);case"LineString":case"MultiLineString":return E=yn(r,n.type==="LineString"?0:1,k),new de(E,e);case"Polygon":case"MultiPolygon":return E=yn(r,n.type==="Polygon"?1:2,k),new hi(E,e);case"GeometryCollection":for(N=0,Z=n.geometries.length;N<Z;N++){var Q=_n({geometry:n.geometries[N],type:"Feature",properties:t.properties},e);Q&&c.push(Q)}return new ue(c);case"FeatureCollection":for(N=0,Z=n.features.length;N<Z;N++){var it=_n(n.features[N],e);it&&c.push(it)}return new ue(c);default:throw new Error("Invalid GeoJSON object.")}}function go(t,e,n,r){return t?t(e,n):new vn(n,r&&r.markersInheritOptions&&r)}function io(t){return new rt(t[1],t[0],t[2])}function yn(t,e,n){for(var r=[],c=0,p=t.length,k;c<p;c++)k=e?yn(t[c],e-1,n):(n||io)(t[c]),r.push(k);return r}function no(t,e){return t=ot(t),t.alt!==void 0?[ut(t.lng,e),ut(t.lat,e),ut(t.alt,e)]:[ut(t.lng,e),ut(t.lat,e)]}function bn(t,e,n,r){for(var c=[],p=0,k=t.length;p<k;p++)c.push(e?bn(t[p],Kt(t[p])?0:e-1,n,r):no(t[p],r));return!e&&n&&c.push(c[0].slice()),c}function ui(t,e){return t.feature?g({},t.feature,{geometry:e}):wn(e)}function wn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var oo={toGeoJSON:function(t){return ui(this,{type:"Point",coordinates:no(this.getLatLng(),t)})}};vn.include(oo),eo.include(oo),gn.include(oo),de.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),n=bn(this._latlngs,e?1:0,!1,t);return ui(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),hi.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),n=e&&!Kt(this._latlngs[0]),r=bn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),ui(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),li.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),ui(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",r=[];return this.eachLayer(function(c){if(c.toGeoJSON){var p=c.toGeoJSON(t);if(n)r.push(p.geometry);else{var k=wn(p);k.type==="FeatureCollection"?r.push.apply(r,k.features):r.push(k)}}}),n?ui(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function _o(t,e){return new fe(t,e)}var ps=_o,kn=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=Lt(e),ct(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Se(this._image),this},bringToBack:function(){return this._map&&Ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Lt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:nt("img");if(tt(e,"leaflet-image-layer"),this._zoomAnimated&&tt(e,"leaflet-zoom-animated"),this.options.className&&tt(e,this.options.className),e.onselectstart=U,e.onmousemove=U,e.onload=m(this.fire,this,"load"),e.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;re(this._image,n,e)},_reset:function(){var t=this._image,e=new mt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();kt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Zt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ms=function(t,e,n){return new kn(t,e,n)},yo=kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:nt("video");if(tt(e,"leaflet-image-layer"),this._zoomAnimated&&tt(e,"leaflet-zoom-animated"),this.options.className&&tt(e,this.options.className),e.onselectstart=U,e.onmousemove=U,e.onloadeddata=m(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],c=0;c<n.length;c++)r.push(n[c].src);this._url=n.length>0?r:[e.src];return}Ft(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var k=nt("source");k.src=this._url[p],e.appendChild(k)}}});function vs(t,e,n){return new yo(t,e,n)}var bo=kn.extend({_initImage:function(){var t=this._image=this._url;tt(t,"leaflet-image-layer"),this._zoomAnimated&&tt(t,"leaflet-zoom-animated"),this.options.className&&tt(t,this.options.className),t.onselectstart=U,t.onmousemove=U}});function gs(t,e,n){return new bo(t,e,n)}var ee=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof rt||Ft(t))?(this._latlng=ot(t),ct(this,e)):(ct(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Zt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Zt(this._container,1),this.bringToFront(),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Zt(this._container,0),this._removeTimeout=setTimeout(m(vt,void 0,this._container),200)):vt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ot(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Se(this._container),this},bringToBack:function(){return this._map&&Ce(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof ue){e=null;var n=this._source._layers;for(var r in n)if(n[r]._map){e=n[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=J(this.options.offset),n=this._getAnchor();this._zoomAnimated?kt(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});d.include({_initOverlay:function(t,e,n,r){var c=e;return c instanceof t||(c=new t(r).setContent(e)),n&&c.setLatLng(n),c}}),Xt.include({_initOverlay:function(t,e,n,r){var c=n;return c instanceof t?(ct(c,r),c._source=this):(c=e&&!r?e:new t(r,this),c.setContent(n)),c}});var xn=ee.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ee.prototype.openOn.call(this,t)},onAdd:function(t){ee.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Te||this._source.on("preclick",le))},onRemove:function(t){ee.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Te||this._source.off("preclick",le))},getEvents:function(){var t=ee.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=nt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=nt("div",t+"-content-wrapper",e);if(this._contentNode=nt("div",t+"-content",n),Ze(e),zi(this._contentNode),Y(e,"contextmenu",le),this._tipContainer=nt("div",t+"-tip-container",e),this._tip=nt("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=nt("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Y(r,"click",function(c){Dt(c),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,c=this.options.maxHeight,p="leaflet-popup-scrolled";c&&r>c?(e.height=c+"px",tt(t,p)):yt(t,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();kt(this._container,e.add(n))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,c=new G(this._containerLeft,-n-this._containerBottom);c._add(ae(this._container));var p=t.layerPointToContainerPoint(c),k=J(this.options.autoPanPadding),T=J(this.options.autoPanPaddingTopLeft||k),E=J(this.options.autoPanPaddingBottomRight||k),N=t.getSize(),Z=0,Q=0;p.x+r+E.x>N.x&&(Z=p.x+r-N.x+E.x),p.x-Z-T.x<0&&(Z=p.x-T.x),p.y+n+E.y>N.y&&(Q=p.y+n-N.y+E.y),p.y-Q-T.y<0&&(Q=p.y-T.y),(Z||Q)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Z,Q]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_s=function(t,e){return new xn(t,e)};d.mergeOptions({closePopupOnClick:!0}),d.include({openPopup:function(t,e,n){return this._initOverlay(xn,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Xt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(xn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ue||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ce(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Te)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Sn=ee.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ee.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ee.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ee.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+O(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,c=this._container,p=r.latLngToContainerPoint(r.getCenter()),k=r.layerPointToContainerPoint(t),T=this.options.direction,E=c.offsetWidth,N=c.offsetHeight,Z=J(this.options.offset),Q=this._getAnchor();T==="top"?(e=E/2,n=N):T==="bottom"?(e=E/2,n=0):T==="center"?(e=E/2,n=N/2):T==="right"?(e=0,n=N/2):T==="left"?(e=E,n=N/2):k.x<p.x?(T="right",e=0,n=N/2):(T="left",e=E+(Z.x+Q.x)*2,n=N/2),t=t.subtract(J(e,n,!0)).add(Z).add(Q),yt(c,"leaflet-tooltip-right"),yt(c,"leaflet-tooltip-left"),yt(c,"leaflet-tooltip-top"),yt(c,"leaflet-tooltip-bottom"),tt(c,"leaflet-tooltip-"+T),kt(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Zt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ys=function(t,e){return new Sn(t,e)};d.include({openTooltip:function(t,e,n){return this._initOverlay(Sn,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Xt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Sn,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ue||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=t.getElement();e&&(Y(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Y(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e=t.latlng,n,r;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(e)}});var wo=ci.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ti(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=J(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function bs(t){return new wo(t)}ci.Default=Ri;var Hi=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:V.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){ct(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),vt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=q(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),r=0,c=e.length,p;r<c;r++)p=e[r].style.zIndex,e[r]!==this._container&&p&&(n=t(n,+p));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!V.ielt9){Zt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var c=this._tiles[r];if(!(!c.current||!c.loaded)){var p=Math.min(1,(t-c.loaded)/200);Zt(c.el,p),p<1?e=!0:(c.active?n=!0:this._onOpaqueTile(c),c.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(Bt(this._fadeFrame),this._fadeFrame=pt(this._updateOpacity,this))}},_onOpaqueTile:U,_initContainer:function(){this._container||(this._container=nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(vt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],c=this._map;return r||(r=this._levels[t]={},r.el=nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,c.getCenter(),c.getZoom()),U(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:U,_onRemoveLevel:U,_onCreateLevel:U,_pruneTiles:function(){if(!!this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)vt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var c=Math.floor(t/2),p=Math.floor(e/2),k=n-1,T=new G(+c,+p);T.z=+k;var E=this._tileCoordsToKey(T),N=this._tiles[E];return N&&N.active?(N.retain=!0,!0):(N&&N.loaded&&(N.retain=!0),k>r?this._retainParent(c,p,k,r):!1)},_retainChildren:function(t,e,n,r){for(var c=2*t;c<2*t+2;c++)for(var p=2*e;p<2*e+2;p++){var k=new G(c,p);k.z=n+1;var T=this._tileCoordsToKey(k),E=this._tiles[T];if(E&&E.active){E.retain=!0;continue}else E&&E.loaded&&(E.retain=!0);n+1<r&&this._retainChildren(c,p,n+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var c=Math.round(e);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var p=this.options.updateWhenZooming&&c!==this._tileZoom;(!r||p)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),c=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();V.any3d?re(t.el,c,r):kt(t.el,c)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),c=e.project(t,this._tileZoom).floor(),p=e.getSize().divideBy(r*2);return new mt(c.subtract(p),c.add(p))},_update:function(t){var e=this._map;if(!!e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(r),p=c.getCenter(),k=[],T=this.options.keepBuffer,E=new mt(c.getBottomLeft().subtract([T,-T]),c.getTopRight().add([T,-T]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var N in this._tiles){var Z=this._tiles[N].coords;(Z.z!==this._tileZoom||!E.contains(new G(Z.x,Z.y)))&&(this._tiles[N].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var Q=c.min.y;Q<=c.max.y;Q++)for(var it=c.min.x;it<=c.max.x;it++){var Gt=new G(it,Q);if(Gt.z=this._tileZoom,!!this._isValidTile(Gt)){var je=this._tiles[this._tileCoordsToKey(Gt)];je?je.current=!0:k.push(Gt)}}if(k.sort(function(Pe,so){return Pe.distanceTo(p)-so.distanceTo(p)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(it=0;it<k.length;it++)this._addTile(k[it],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return Lt(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),c=r.add(n),p=e.unproject(r,t.z),k=e.unproject(c,t.z);return[p,k]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new Nt(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new G(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];!e||(vt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){tt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=U,t.onmousemove=U,V.ielt9&&this.options.opacity<1&&Zt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),m(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&pt(m(this._tileReady,this,t,null,c)),kt(c,n),this._tiles[r]={el:c,coords:t,current:!0},e.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Zt(n.el,0),Bt(this._fadeFrame),this._fadeFrame=pt(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(tt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),V.ielt9||!this._map._fadeAnimated?pt(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new G(this._wrapX?z(t.x,this._wrapX):t.x,this._wrapY?z(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new mt(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ws(t){return new Hi(t)}var di=Hi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=ct(this,e),e.detectRetina&&V.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Y(n,"load",m(this._tileOnLoad,this,e,n)),Y(n,"error",m(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:V.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return et(this._url,g(e,this.options))},_tileOnLoad:function(t,e){V.ielt9?setTimeout(m(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=U,e.onerror=U,!e.complete)){e.src=Me;var n=this._tiles[t].coords;vt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(!!e)return e.el.setAttribute("src",Me),Hi.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===Me))return Hi.prototype._tileReady.call(this,t,e,n)}});function ko(t,e){return new di(t,e)}var xo=di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=g({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);e=ct(this,e);var c=e.detectRetina&&V.retina?2:1,p=this.getTileSize();n.width=p.x*c,n.height=p.y*c,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,di.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=zt(n.project(e[0]),n.project(e[1])),c=r.min,p=r.max,k=(this._wmsVersion>=1.3&&this._crs===mo?[c.y,c.x,p.y,p.x]:[c.x,c.y,p.x,p.y]).join(","),T=di.prototype.getTileUrl.call(this,t);return T+_t(this.wmsParams,T,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(t,e){return g(this.wmsParams,t),e||this.redraw(),this}});function ks(t,e){return new xo(t,e)}di.WMS=xo,ko.wms=ks;var pe=Xt.extend({options:{padding:.1},initialize:function(t){ct(this,t),O(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,e),p=r.multiplyBy(-n).add(c).subtract(this._map._getNewPixelOrigin(t,e));V.any3d?re(this._container,p,n):kt(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new mt(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),So=pe.extend({options:{tolerance:0},getEvents:function(){var t=pe.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Y(t,"mousemove",this._onMouseMove,this),Y(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Y(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Bt(this._redrawRequest),delete this._ctx,vt(this._container),lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pe.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=V.retina?2:1;kt(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",V.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){pe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[O(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[O(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],r,c;for(c=0;c<e.length;c++){if(r=Number(e[c]),isNaN(r))return;n.push(r)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||pt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mt,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(!!this._drawing){var n,r,c,p,k=t._parts,T=k.length,E=this._ctx;if(!!T){for(E.beginPath(),n=0;n<T;n++){for(r=0,c=k[n].length;r<c;r++)p=k[n][r],E[r?"lineTo":"moveTo"](p.x,p.y);e&&E.closePath()}this._fillStroke(E,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||r)/r;c!==1&&(n.save(),n.scale(1,c)),n.beginPath(),n.arc(e.x,e.y/c,r,0,Math.PI*2,!1),c!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,r,c=this._drawFirst;c;c=c.next)n=c.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(yt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,c=this._drawFirst;c;c=c.next)n=c.layer,n.options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(tt(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(!!e){var n=e.next,r=e.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(!!e){var n=e.next,r=e.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Co(t){return V.canvas?new So(t):null}var $i=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xs={_initContainer:function(){this._container=nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pe.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=$i("shape");tt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=$i("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[O(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;vt(e),t.removeInteractiveTarget(e),delete this._layers[O(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,c=t._container;c.stroked=!!r.stroke,c.filled=!!r.fill,r.stroke?(e||(e=t._stroke=$i("stroke")),c.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=Ft(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(c.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=$i("fill")),c.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(c.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Se(t._container)},_bringToBack:function(t){Ce(t._container)}},Cn=V.vml?$i:De,Fi=pe.extend({_initContainer:function(){this._container=Cn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vt(this._container),lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pe.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),kt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Cn("path");t.options.className&&tt(e,t.options.className),t.options.interactive&&tt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[O(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){vt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[O(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;!e||(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,we(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,c="a"+n+","+r+" 0 1,0 ",p=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+c+n*2+",0 "+c+-n*2+",0 ";this._setPath(t,p)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Se(t._path)},_bringToBack:function(t){Ce(t._path)}});V.vml&&Fi.include(xs);function Lo(t){return V.svg||V.vml?new Fi(t):null}d.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||Lo(t)}});var To=hi.extend({initialize:function(t,e){hi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Lt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ss(t,e){return new To(t,e)}Fi.create=Cn,Fi.pointsToPath=we,fe.geometryToLayer=_n,fe.coordsToLatLng=io,fe.coordsToLatLngs=yn,fe.latLngToCoords=no,fe.latLngsToCoords=bn,fe.getFeature=ui,fe.asFeature=wn,d.mergeOptions({boxZoom:!0});var Po=gt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Be(),Ei(),this._startPoint=this._map.mouseEventToContainerPoint(t),Y(document,{contextmenu:ce,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=nt("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new mt(this._point,this._startPoint),n=e.getSize();kt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(vt(this._box),yt(this._container,"leaflet-crosshair")),Re(),$e(),lt(document,{contextmenu:ce,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var e=new Nt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});d.addInitHook("addHandler","boxZoom",Po),d.mergeOptions({doubleClickZoom:!0});var Eo=gt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,c=t.originalEvent.shiftKey?n-r:n+r;e.options.doubleClickZoom==="center"?e.setZoom(c):e.setZoomAround(t.containerPoint,c)}});d.addInitHook("addHandler","doubleClickZoom",Eo),d.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mo=gt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new bt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=Lt(this._map.options.maxBounds);this._offsetLimit=zt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,c=(r-e+n)%t+e-n,p=(r+e+n)%t-e-n,k=Math.abs(c+n)<Math.abs(p+n)?c:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,k=n.easeLinearity,T=c.multiplyBy(k/p),E=T.distanceTo([0,0]),N=Math.min(n.inertiaMaxSpeed,E),Z=T.multiplyBy(N/E),Q=N/(n.inertiaDeceleration*k),it=Z.multiplyBy(-Q/2).round();!it.x&&!it.y?e.fire("moveend"):(it=e._limitOffset(it,e.options.maxBounds),pt(function(){e.panBy(it,{duration:Q,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});d.addInitHook("addHandler","dragging",Mo),d.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ao=gt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Y(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,r,c;for(r=0,c=n.left.length;r<c;r++)e[n.left[r]]=[-1*t,0];for(r=0,c=n.right.length;r<c;r++)e[n.right[r]]=[t,0];for(r=0,c=n.down.length;r<c;r++)e[n.down[r]]=[0,t];for(r=0,c=n.up.length;r<c;r++)e[n.up[r]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,r,c;for(r=0,c=n.zoomIn.length;r<c;r++)e[n.zoomIn[r]]=t;for(r=0,c=n.zoomOut.length;r<c;r++)e[n.zoomOut[r]]=-t},_addHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,r;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[e],t.shiftKey&&(r=J(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(J(r),n.options.maxBounds)),n.options.worldCopyJump){var c=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(c)}else n.panBy(r)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;ce(t)}}});d.addInitHook("addHandler","keyboard",Ao),d.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Do=gt.extend({addHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=f(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),r),ce(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,p=n?Math.ceil(c/n)*n:c,k=t._limitZoom(e+(this._delta>0?p:-p))-e;this._delta=0,this._startTime=null,k&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+k):t.setZoomAround(this._lastMousePos,e+k))}});d.addInitHook("addHandler","scrollWheelZoom",Do);var Cs=600;d.mergeOptions({tapHold:V.touchNative&&V.safari&&V.mobile,tapTolerance:15});var Io=gt.extend({addHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new G(e.clientX,e.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Y(document,"touchend",Dt),Y(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Cs),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){lt(document,"touchend",Dt),lt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new G(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});d.addInitHook("addHandler","tapHold",Io),d.mergeOptions({touchZoom:V.touch,bounceAtZoomLimits:!0});var zo=gt.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),Dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),c=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(c,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&c<1||this._zoom>e.getMaxZoom()&&c>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var p=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(c===1&&p.x===0&&p.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),Bt(this._animRequest);var k=m(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=pt(k,this,!0),Dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Bt(this._animRequest),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});d.addInitHook("addHandler","touchZoom",zo),d.BoxZoom=Po,d.DoubleClickZoom=Eo,d.Drag=Mo,d.Keyboard=Ao,d.ScrollWheelZoom=Do,d.TapHold=Io,d.TouchZoom=zo,u.Bounds=mt,u.Browser=V,u.CRS=wt,u.Canvas=So,u.Circle=eo,u.CircleMarker=gn,u.Class=Yt,u.Control=b,u.DivIcon=wo,u.DivOverlay=ee,u.DomEvent=o,u.DomUtil=si,u.Draggable=bt,u.Evented=_e,u.FeatureGroup=ue,u.GeoJSON=fe,u.GridLayer=Hi,u.Handler=gt,u.Icon=ci,u.ImageOverlay=kn,u.LatLng=rt,u.LatLngBounds=Nt,u.Layer=Xt,u.LayerGroup=li,u.LineUtil=es,u.Map=d,u.Marker=vn,u.Mixin=xt,u.Path=Te,u.Point=G,u.PolyUtil=is,u.Polygon=hi,u.Polyline=de,u.Popup=xn,u.PosAnimation=l,u.Projection=ns,u.Rectangle=To,u.Renderer=pe,u.SVG=Fi,u.SVGOverlay=bo,u.TileLayer=di,u.Tooltip=Sn,u.Transformation=jt,u.Util=ge,u.VideoOverlay=yo,u.bind=m,u.bounds=zt,u.canvas=Co,u.circle=us,u.circleMarker=hs,u.control=w,u.divIcon=bs,u.extend=g,u.featureGroup=as,u.geoJSON=_o,u.geoJson=ps,u.gridLayer=ws,u.icon=ls,u.imageOverlay=ms,u.latLng=ot,u.latLngBounds=Lt,u.layerGroup=rs,u.map=_,u.marker=cs,u.point=J,u.polygon=fs,u.polyline=ds,u.popup=_s,u.rectangle=Ss,u.setOptions=ct,u.stamp=O,u.svg=Lo,u.svgOverlay=gs,u.tileLayer=ko,u.tooltip=ys,u.transformation=be,u.version=v,u.videoOverlay=vs;var Ls=window.L;u.noConflict=function(){return window.L=Ls,this},window.L=u})})(ji,ji.exports);const ao=ji.exports,_r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";/*! Summernote v0.8.19 | (c) 2013- Alan Hong and contributors | MIT license */(function(P,a){if(typeof exports=="object"&&typeof module=="object")module.exports=a(require("jquery"));else if(typeof define=="function"&&define.amd)define(["jquery"],a);else{var u=a(typeof exports=="object"?require("jquery"):P.jQuery);for(var v in u)(typeof exports=="object"?exports:P)[v]=u[v]}})(self,function(P){return(()=>{var a={9770:(S,m,I)=>{var O=I(5549),q=I.n(O);q().summernote=q().summernote||{lang:{}},q().extend(!0,q().summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size",sizeunit:"Font Size Unit"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Google Drive, Vimeo, Vine, Instagram, DailyMotion, Youku, Peertube)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window",useProtocol:"Use default protocol"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Text Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{escape:"Escape",insertParagraph:"Insert Paragraph",undo:"Undo the last command",redo:"Redo the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"},output:{noSelection:"No Selection Made!"}}})},5549:S=>{S.exports=P}},u={};function v(S){var m=u[S];if(m!==void 0)return m.exports;var I=u[S]={exports:{}};return a[S](I,I.exports,v),I.exports}v.n=S=>{var m=S&&S.__esModule?()=>S.default:()=>S;return v.d(m,{a:m}),m},v.d=(S,m)=>{for(var I in m)v.o(m,I)&&!v.o(S,I)&&Object.defineProperty(S,I,{enumerable:!0,get:m[I]})},v.o=(S,m)=>Object.prototype.hasOwnProperty.call(S,m),v.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var g={};return(()=>{v.r(g);var S=v(5549),m=v.n(S),I=(v(9770),["sans-serif","serif","monospace","cursive","fantasy"]);function O(s){return m().inArray(s.toLowerCase(),I)===-1?"'".concat(s,"'"):s}var q,z=navigator.userAgent,U=/MSIE|Trident/i.test(z);if(U){var ut=/MSIE (\d+[.]\d+)/.exec(z);ut&&(q=parseFloat(ut[1])),(ut=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(z))&&(q=parseFloat(ut[1]))}var St=/Edge\/\d+/.test(z),It="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,ct=U?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";const _t={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:U,isEdge:St,isFF:!St&&/firefox/i.test(z),isPhantom:/PhantomJS/i.test(z),isWebkit:!St&&/webkit/i.test(z),isChrome:!St&&/chrome/i.test(z),isSafari:!St&&/safari/i.test(z)&&!/chrome/i.test(z),browserVersion:q,isSupportTouch:It,isFontInstalled:function(s){var h=s==="Comic Sans MS"?"Courier New":"Comic Sans MS",f=document.createElement("canvas"),i=f.getContext("2d",{willReadFrequently:!0});function o(l){return i.clearRect(0,0,40,20),i.font="20px "+O(l)+', "'+h+'"',i.fillText("mw",20,10),i.getImageData(0,0,40,20).data.join("")}return f.width=40,f.height=20,i.textAlign="center",i.fillStyle="black",i.textBaseline="middle",o(h)!==o(s)},isW3CRangeSupport:!!document.createRange,inputEventName:ct,genericFontFamilies:I,validFontName:O};var qi=0;const et={eq:function(s){return function(h){return s===h}},eq2:function(s,h){return s===h},peq2:function(s){return function(h,f){return h[s]===f[s]}},ok:function(){return!0},fail:function(){return!1},self:function(s){return s},not:function(s){return function(){return!s.apply(s,arguments)}},and:function(s,h){return function(f){return s(f)&&h(f)}},invoke:function(s,h){return function(){return s[h].apply(s,arguments)}},resetUniqueId:function(){qi=0},uniqueId:function(s){var h=++qi+"";return s?s+h:h},rect2bnd:function(s){var h=m()(document);return{top:s.top+h.scrollTop(),left:s.left+h.scrollLeft(),width:s.right-s.left,height:s.bottom-s.top}},invertObject:function(s){var h={};for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(h[s[f]]=f);return h},namespaceToCamel:function(s,h){return(h=h||"")+s.split(".").map(function(f){return f.substring(0,1).toUpperCase()+f.substring(1)}).join("")},debounce:function(s,h,f){var i;return function(){var o=this,l=arguments,d=function(){i=null,f||s.apply(o,l)},_=f&&!i;clearTimeout(i),i=setTimeout(d,h),_&&s.apply(o,l)}},isValidUrl:function(s){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(s)}};function Ft(s){return s[0]}function Ee(s){return s[s.length-1]}function Me(s){return s.slice(1)}function qe(s,h){if(s&&s.length&&h){if(s.indexOf)return s.indexOf(h)!==-1;if(s.contains)return s.contains(h)}return!1}const B={head:Ft,last:Ee,initial:function(s){return s.slice(0,s.length-1)},tail:Me,prev:function(s,h){if(s&&s.length&&h){var f=s.indexOf(h);return f===-1?null:s[f-1]}return null},next:function(s,h){if(s&&s.length&&h){var f=s.indexOf(h);return f===-1?null:s[f+1]}return null},find:function(s,h){for(var f=0,i=s.length;f<i;f++){var o=s[f];if(h(o))return o}},contains:qe,all:function(s,h){for(var f=0,i=s.length;f<i;f++)if(!h(s[f]))return!1;return!0},sum:function(s,h){return h=h||et.self,s.reduce(function(f,i){return f+h(i)},0)},from:function(s){for(var h=[],f=s.length,i=-1;++i<f;)h[i]=s[i];return h},isEmpty:function(s){return!s||!s.length},clusterBy:function(s,h){return s.length?Me(s).reduce(function(f,i){var o=Ee(f);return h(Ee(o),i)?o[o.length]=i:f[f.length]=[i],f},[[Ft(s)]]):[]},compact:function(s){for(var h=[],f=0,i=s.length;f<i;f++)s[f]&&h.push(s[f]);return h},unique:function(s){for(var h=[],f=0,i=s.length;f<i;f++)qe(h,s[f])||h.push(s[f]);return h}};var Ke=String.fromCharCode(160);function $t(s){return s&&m()(s).hasClass("note-editable")}function Ct(s){return s=s.toUpperCase(),function(h){return h&&h.nodeName.toUpperCase()===s}}function pt(s){return s&&s.nodeType===3}function Bt(s){return s&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(s.nodeName.toUpperCase())}function ge(s){return!$t(s)&&s&&/^DIV|^P|^LI|^H[1-7]/.test(s.nodeName.toUpperCase())}var Yt=Ct("PRE"),Ki=Ct("LI"),Rt=Ct("TABLE"),_e=Ct("DATA");function G(s){return!(Nt(s)||mi(s)||J(s)||ge(s)||Rt(s)||zt(s)||_e(s))}function mi(s){return s&&/^UL|^OL/.test(s.nodeName.toUpperCase())}var J=Ct("HR");function mt(s){return s&&/^TD|^TH/.test(s.nodeName.toUpperCase())}var zt=Ct("BLOCKQUOTE");function Nt(s){return mt(s)||zt(s)||$t(s)}var Lt=Ct("A"),rt=Ct("BODY"),ot=_t.isMSIE&&_t.browserVersion<11?"&nbsp;":"<br>";function wt(s){return pt(s)?s.nodeValue.length:s?s.childNodes.length:0}function At(s){var h=wt(s);return h===0||!pt(s)&&h===1&&s.innerHTML===ot||!(!B.all(s.childNodes,pt)||s.innerHTML!=="")}function vi(s){Bt(s)||wt(s)||(s.innerHTML=ot)}function ye(s,h){for(;s;){if(h(s))return s;if($t(s))break;s=s.parentNode}return null}function jt(s,h){h=h||et.fail;var f=[];return ye(s,function(i){return $t(i)||f.push(i),h(i)}),f}function be(s,h){h=h||et.fail;for(var f=[];s&&!h(s);)f.push(s),s=s.nextSibling;return f}function Ae(s,h){var f=h.nextSibling,i=h.parentNode;return f?i.insertBefore(s,f):i.appendChild(s),s}function gi(s,h){return m().each(h,function(f,i){s.appendChild(i)}),s}function De(s){return s.offset===0}function we(s){return s.offset===wt(s.node)}function Ge(s){return De(s)||we(s)}function Ie(s,h){for(;s&&s!==h;){if(Jt(s)!==0)return!1;s=s.parentNode}return!0}function Gi(s,h){if(!h)return!1;for(;s&&s!==h;){if(Jt(s)!==wt(s.parentNode)-1)return!1;s=s.parentNode}return!0}function Jt(s){for(var h=0;s=s.previousSibling;)h+=1;return h}function oe(s){return!!(s&&s.childNodes&&s.childNodes.length)}function _i(s,h){var f,i;if(s.offset===0){if($t(s.node))return null;f=s.node.parentNode,i=Jt(s.node)}else oe(s.node)?i=wt(f=s.node.childNodes[s.offset-1]):(f=s.node,i=h?0:s.offset-1);return{node:f,offset:i}}function yi(s,h){var f,i;if(wt(s.node)===s.offset){if($t(s.node))return null;var o=Ji(s.node);o?(f=o,i=0):(f=s.node.parentNode,i=Jt(s.node)+1)}else oe(s.node)?(f=s.node.childNodes[s.offset],i=0):(f=s.node,i=h?wt(s.node):s.offset+1);return{node:f,offset:i}}function Yi(s,h){var f,i=0;if(At(s.node))return s.node===null?null:{node:f=s.node.nextSibling,offset:i=0};if(wt(s.node)===s.offset){if($t(s.node))return null;f=s.node.parentNode,i=Jt(s.node)+1,$t(f)&&(f=s.node.nextSibling,i=0)}else if(oe(s.node)){if(i=0,At(f=s.node.childNodes[s.offset]))return At(s.node.nextSibling)?null:{node:s.node.nextSibling,offset:i}}else if(f=s.node,i=h?wt(s.node):s.offset+1,At(f))return null;return{node:f,offset:i}}function Ji(s){if(s.nextSibling&&s.parent===s.nextSibling.parent)return pt(s.nextSibling)?s.nextSibling:Ji(s.nextSibling)}function Ye(s,h){return s.node===h.node&&s.offset===h.offset}function Je(s,h){var f=h&&h.isSkipPaddingBlankHTML,i=h&&h.isNotSplitEdgePoint,o=h&&h.isDiscardEmptySplits;if(o&&(f=!0),Ge(s)&&(pt(s.node)||i)){if(De(s))return s.node;if(we(s))return s.node.nextSibling}if(pt(s.node))return s.node.splitText(s.offset);var l=s.node.childNodes[s.offset],d=Ae(s.node.cloneNode(!1),s.node);return gi(d,be(l)),f||(vi(s.node),vi(d)),o&&(At(s.node)&&ke(s.node),At(d))?(ke(d),s.node.nextSibling):d}function bi(s,h,f){var i=jt(h.node,et.eq(s));if(!i.length)return null;if(i.length===1)return Je(h,f);if(i.length>2){var o=i.slice(0,i.length-1).find(function(_){return _.nextSibling});if(o&&h.offset!=0&&we(h)){var l,d=o.nextSibling;d.nodeType==1?(i=jt(l=d.childNodes[0],et.eq(s)),h={node:l,offset:0}):d.nodeType!=3||d.data.match(/[\n\r]/g)||(i=jt(l=d,et.eq(s)),h={node:l,offset:0})}}return i.reduce(function(_,b){return _===h.node&&(_=Je(h,f)),Je({node:b,offset:_?Jt(_):wt(b)},f)})}function Xi(s){return document.createElement(s)}function ke(s,h){if(s&&s.parentNode){if(s.removeNode)return s.removeNode(h);var f=s.parentNode;if(!h){for(var i=[],o=0,l=s.childNodes.length;o<l;o++)i.push(s.childNodes[o]);for(var d=0,_=i.length;d<_;d++)f.insertBefore(i[d],s)}f.removeChild(s)}}var wi=Ct("TEXTAREA");function Qi(s,h){var f=wi(s[0])?s.val():s.html();return h?f.replace(/[\n\r]/g,""):f}const y={NBSP_CHAR:Ke,ZERO_WIDTH_NBSP_CHAR:"\uFEFF",blank:ot,emptyPara:"<p>".concat(ot,"</p>"),makePredByNodeName:Ct,isEditable:$t,isControlSizing:function(s){return s&&m()(s).hasClass("note-control-sizing")},isText:pt,isElement:function(s){return s&&s.nodeType===1},isVoid:Bt,isPara:ge,isPurePara:function(s){return ge(s)&&!Ki(s)},isHeading:function(s){return s&&/^H[1-7]/.test(s.nodeName.toUpperCase())},isInline:G,isBlock:et.not(G),isBodyInline:function(s){return G(s)&&!ye(s,ge)},isBody:rt,isParaInline:function(s){return G(s)&&!!ye(s,ge)},isPre:Yt,isList:mi,isTable:Rt,isData:_e,isCell:mt,isBlockquote:zt,isBodyContainer:Nt,isAnchor:Lt,isDiv:Ct("DIV"),isLi:Ki,isBR:Ct("BR"),isSpan:Ct("SPAN"),isB:Ct("B"),isU:Ct("U"),isS:Ct("S"),isI:Ct("I"),isImg:Ct("IMG"),isTextarea:wi,deepestChildIsEmpty:function(s){do if(s.firstElementChild===null||s.firstElementChild.innerHTML==="")break;while(s=s.firstElementChild);return At(s)},isEmpty:At,isEmptyAnchor:et.and(Lt,At),isClosestSibling:function(s,h){return s.nextSibling===h||s.previousSibling===h},withClosestSiblings:function(s,h){h=h||et.ok;var f=[];return s.previousSibling&&h(s.previousSibling)&&f.push(s.previousSibling),f.push(s),s.nextSibling&&h(s.nextSibling)&&f.push(s.nextSibling),f},nodeLength:wt,isLeftEdgePoint:De,isRightEdgePoint:we,isEdgePoint:Ge,isLeftEdgeOf:Ie,isRightEdgeOf:Gi,isLeftEdgePointOf:function(s,h){return De(s)&&Ie(s.node,h)},isRightEdgePointOf:function(s,h){return we(s)&&Gi(s.node,h)},prevPoint:_i,nextPoint:yi,nextPointWithEmptyNode:Yi,isSamePoint:Ye,isVisiblePoint:function(s){if(pt(s.node)||!oe(s.node)||At(s.node))return!0;var h=s.node.childNodes[s.offset-1],f=s.node.childNodes[s.offset];return!((h&&!Bt(h)||f&&!Bt(f))&&!Rt(f))},prevPointUntil:function(s,h){for(;s;){if(h(s))return s;s=_i(s)}return null},nextPointUntil:function(s,h){for(;s;){if(h(s))return s;s=yi(s)}return null},isCharPoint:function(s){if(!pt(s.node))return!1;var h=s.node.nodeValue.charAt(s.offset-1);return h&&h!==" "&&h!==Ke},isSpacePoint:function(s){if(!pt(s.node))return!1;var h=s.node.nodeValue.charAt(s.offset-1);return h===" "||h===Ke},walkPoint:function(s,h,f,i){for(var o=s;o&&(f(o),!Ye(o,h));)o=Yi(o,i&&s.node!==o.node&&h.node!==o.node)},ancestor:ye,singleChildAncestor:function(s,h){for(s=s.parentNode;s&&wt(s)===1;){if(h(s))return s;if($t(s))break;s=s.parentNode}return null},listAncestor:jt,lastAncestor:function(s,h){var f=jt(s);return B.last(f.filter(h))},listNext:be,listPrev:function(s,h){h=h||et.fail;for(var f=[];s&&!h(s);)f.push(s),s=s.previousSibling;return f},listDescendant:function(s,h){var f=[];return h=h||et.ok,function i(o){s!==o&&h(o)&&f.push(o);for(var l=0,d=o.childNodes.length;l<d;l++)i(o.childNodes[l])}(s),f},commonAncestor:function(s,h){for(var f=jt(s),i=h;i;i=i.parentNode)if(f.indexOf(i)>-1)return i;return null},wrap:function(s,h){var f=s.parentNode,i=m()("<"+h+">")[0];return f.insertBefore(i,s),i.appendChild(s),i},insertAfter:Ae,appendChildNodes:gi,position:Jt,hasChildren:oe,makeOffsetPath:function(s,h){return jt(h,et.eq(s)).map(Jt).reverse()},fromOffsetPath:function(s,h){for(var f=s,i=0,o=h.length;i<o;i++)f=f.childNodes.length<=h[i]?f.childNodes[f.childNodes.length-1]:f.childNodes[h[i]];return f},splitTree:bi,splitPoint:function(s,h){var f,i,o=h?ge:Nt,l=jt(s.node,o),d=B.last(l)||s.node;o(d)?(f=l[l.length-2],i=d):i=(f=d).parentNode;var _=f&&bi(f,s,{isSkipPaddingBlankHTML:h,isNotSplitEdgePoint:h});return _||i!==s.node||(_=s.node.childNodes[s.offset]),{rightNode:_,container:i}},create:Xi,createText:function(s){return document.createTextNode(s)},remove:ke,removeWhile:function(s,h){for(;s&&!$t(s)&&h(s);){var f=s.parentNode;ke(s),s=f}},replace:function(s,h){if(s.nodeName.toUpperCase()===h.toUpperCase())return s;var f=Xi(h);return s.style.cssText&&(f.style.cssText=s.style.cssText),gi(f,B.from(s.childNodes)),Ae(f,s),ke(s),f},html:function(s,h){var f=Qi(s);return h&&(f=(f=f.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(i,o,l){l=l.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(l)&&!!o,_=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(l);return i+(d||_?`
`:"")})).trim()),f},value:Qi,posFromPlaceholder:function(s){var h=m()(s),f=h.offset(),i=h.outerHeight(!0);return{left:f.left,top:f.top+i}},attachEvents:function(s,h){Object.keys(h).forEach(function(f){s.on(f,h[f])})},detachEvents:function(s,h){Object.keys(h).forEach(function(f){s.off(f,h[f])})},isCustomStyleTag:function(s){return s&&!pt(s)&&B.contains(s.classList,"note-styletag")}};function ki(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var tn=function(){function s(i,o){(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.$note=i,this.memos={},this.modules={},this.layoutInfo={},this.options=m().extend(!0,{},o),m().summernote.ui=m().summernote.ui_template(this.options),this.ui=m().summernote.ui,this.initialize()}var h,f;return h=s,f=[{key:"initialize",value:function(){return this.layoutInfo=this.ui.createLayout(this.$note),this._initialize(),this.$note.hide(),this}},{key:"destroy",value:function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)}},{key:"reset",value:function(){var i=this.isDisabled();this.code(y.emptyPara),this._destroy(),this._initialize(),i&&this.disable()}},{key:"_initialize",value:function(){var i=this;this.options.id=et.uniqueId(m().now()),this.options.container=this.options.container||this.layoutInfo.editor;var o=m().extend({},this.options.buttons);Object.keys(o).forEach(function(d){i.memo("button."+d,o[d])});var l=m().extend({},this.options.modules,m().summernote.plugins||{});Object.keys(l).forEach(function(d){i.module(d,l[d],!0)}),Object.keys(this.modules).forEach(function(d){i.initializeModule(d)})}},{key:"_destroy",value:function(){var i=this;Object.keys(this.modules).reverse().forEach(function(o){i.removeModule(o)}),Object.keys(this.memos).forEach(function(o){i.removeMemo(o)}),this.triggerEvent("destroy",this)}},{key:"code",value:function(i){var o=this.invoke("codeview.isActivated");if(i===void 0)return this.invoke("codeview.sync"),o?this.layoutInfo.codable.val():this.layoutInfo.editable.html();o?this.invoke("codeview.sync",i):this.layoutInfo.editable.html(i),this.$note.val(i),this.triggerEvent("change",i,this.layoutInfo.editable)}},{key:"isDisabled",value:function(){return this.layoutInfo.editable.attr("contenteditable")==="false"}},{key:"enable",value:function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1),this.options.editing=!0}},{key:"disable",value:function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.options.editing=!1,this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)}},{key:"triggerEvent",value:function(){var i=B.head(arguments),o=B.tail(B.from(arguments)),l=this.options.callbacks[et.namespaceToCamel(i,"on")];l&&l.apply(this.$note[0],o),this.$note.trigger("summernote."+i,o)}},{key:"initializeModule",value:function(i){var o=this.modules[i];o.shouldInitialize=o.shouldInitialize||et.ok,o.shouldInitialize()&&(o.initialize&&o.initialize(),o.events&&y.attachEvents(this.$note,o.events))}},{key:"module",value:function(i,o,l){if(arguments.length===1)return this.modules[i];this.modules[i]=new o(this),l||this.initializeModule(i)}},{key:"removeModule",value:function(i){var o=this.modules[i];o.shouldInitialize()&&(o.events&&y.detachEvents(this.$note,o.events),o.destroy&&o.destroy()),delete this.modules[i]}},{key:"memo",value:function(i,o){if(arguments.length===1)return this.memos[i];this.memos[i]=o}},{key:"removeMemo",value:function(i){this.memos[i]&&this.memos[i].destroy&&this.memos[i].destroy(),delete this.memos[i]}},{key:"createInvokeHandlerAndUpdateState",value:function(i,o){var l=this;return function(d){l.createInvokeHandler(i,o)(d),l.invoke("buttons.updateCurrentStyle")}}},{key:"createInvokeHandler",value:function(i,o){var l=this;return function(d){d.preventDefault();var _=m()(d.target);l.invoke(i,o||_.closest("[data-value]").data("value"),_)}}},{key:"invoke",value:function(){var i=B.head(arguments),o=B.tail(B.from(arguments)),l=i.split("."),d=l.length>1,_=d&&B.head(l),b=d?B.last(l):B.head(l),w=this.modules[_||"editor"];return!_&&this[b]?this[b].apply(this,o):w&&w[b]&&w.shouldInitialize()?w[b].apply(w,o):void 0}}],f&&ki(h.prototype,f),s}();function xi(s){return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},xi(s)}function ze(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function en(s,h){var f,i,o=s.parentElement(),l=document.body.createTextRange(),d=B.from(o.childNodes);for(f=0;f<d.length;f++)if(!y.isText(d[f])){if(l.moveToElementText(d[f]),l.compareEndPoints("StartToStart",s)>=0)break;i=d[f]}if(f!==0&&y.isText(d[f-1])){var _=document.body.createTextRange(),b=null;_.moveToElementText(i||o),_.collapse(!i),b=i?i.nextSibling:o.firstChild;var w=s.duplicate();w.setEndPoint("StartToStart",_);for(var C=w.text.replace(/[\r\n]/g,"").length;C>b.nodeValue.length&&b.nextSibling;)C-=b.nodeValue.length,b=b.nextSibling;b.nodeValue,h&&b.nextSibling&&y.isText(b.nextSibling)&&C===b.nodeValue.length&&(C-=b.nodeValue.length,b=b.nextSibling),o=b,f=C}return{cont:o,offset:f}}function nn(s){var h=document.body.createTextRange(),f=function i(o,l){var d,_;if(y.isText(o)){var b=y.listPrev(o,et.not(y.isText)),w=B.last(b).previousSibling;d=w||o.parentNode,l+=B.sum(B.tail(b),y.nodeLength),_=!w}else{if(d=o.childNodes[l]||o,y.isText(d))return i(d,0);l=0,_=!1}return{node:d,collapseToStart:_,offset:l}}(s.node,s.offset);return h.moveToElementText(f.node),h.collapse(f.collapseToStart),h.moveStart("character",f.offset),h}m().fn.extend({summernote:function(){var s=xi(B.head(arguments)),h=s==="string",f=s==="object",i=m().extend({},m().summernote.options,f?B.head(arguments):{});i.langInfo=m().extend(!0,{},m().summernote.lang["en-US"],m().summernote.lang[i.lang]),i.icons=m().extend(!0,{},m().summernote.options.icons,i.icons),i.tooltip=i.tooltip==="auto"?!_t.isSupportTouch:i.tooltip,this.each(function(d,_){var b=m()(_);if(!b.data("summernote")){var w=new tn(b,i);b.data("summernote",w),b.data("summernote").triggerEvent("init",w.layoutInfo)}});var o=this.first();if(o.length){var l=o.data("summernote");if(h)return l.invoke.apply(l,B.from(arguments));i.focus&&l.invoke("editor.focus")}return this}});var xe=function(){function s(i,o,l,d){(function(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")})(this,s),this.sc=i,this.so=o,this.ec=l,this.eo=d,this.isOnEditable=this.makeIsOn(y.isEditable),this.isOnList=this.makeIsOn(y.isList),this.isOnAnchor=this.makeIsOn(y.isAnchor),this.isOnCell=this.makeIsOn(y.isCell),this.isOnData=this.makeIsOn(y.isData)}var h,f;return h=s,f=[{key:"nativeRange",value:function(){if(_t.isW3CRangeSupport){var i=document.createRange();return i.setStart(this.sc,this.so),i.setEnd(this.ec,this.eo),i}var o=nn({node:this.sc,offset:this.so});return o.setEndPoint("EndToEnd",nn({node:this.ec,offset:this.eo})),o}},{key:"getPoints",value:function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}}},{key:"getStartPoint",value:function(){return{node:this.sc,offset:this.so}}},{key:"getEndPoint",value:function(){return{node:this.ec,offset:this.eo}}},{key:"select",value:function(){var i=this.nativeRange();if(_t.isW3CRangeSupport){var o=document.getSelection();o.rangeCount>0&&o.removeAllRanges(),o.addRange(i)}else i.select();return this}},{key:"scrollIntoView",value:function(i){var o=m()(i).height();return i.scrollTop+o<this.sc.offsetTop&&(i.scrollTop+=Math.abs(i.scrollTop+o-this.sc.offsetTop)),this}},{key:"normalize",value:function(){var i=function(d,_){if(!d||y.isVisiblePoint(d)&&(!y.isEdgePoint(d)||y.isRightEdgePoint(d)&&!_||y.isLeftEdgePoint(d)&&_||y.isRightEdgePoint(d)&&_&&y.isVoid(d.node.nextSibling)||y.isLeftEdgePoint(d)&&!_&&y.isVoid(d.node.previousSibling)||y.isBlock(d.node)&&y.isEmpty(d.node)))return d;var b=y.ancestor(d.node,y.isBlock),w=!1;if(!w){var C=y.prevPoint(d)||{node:null};w=(y.isLeftEdgePointOf(d,b)||y.isVoid(C.node))&&!_}var M=!1;if(!M){var D=y.nextPoint(d)||{node:null};M=(y.isRightEdgePointOf(d,b)||y.isVoid(D.node))&&_}if(w||M){if(y.isVisiblePoint(d))return d;_=!_}return(_?y.nextPointUntil(y.nextPoint(d),y.isVisiblePoint):y.prevPointUntil(y.prevPoint(d),y.isVisiblePoint))||d},o=i(this.getEndPoint(),!1),l=this.isCollapsed()?o:i(this.getStartPoint(),!0);return new s(l.node,l.offset,o.node,o.offset)}},{key:"nodes",value:function(i,o){i=i||et.ok;var l=o&&o.includeAncestor,d=o&&o.fullyContains,_=this.getStartPoint(),b=this.getEndPoint(),w=[],C=[];return y.walkPoint(_,b,function(M){var D;y.isEditable(M.node)||(d?(y.isLeftEdgePoint(M)&&C.push(M.node),y.isRightEdgePoint(M)&&B.contains(C,M.node)&&(D=M.node)):D=l?y.ancestor(M.node,i):M.node,D&&i(D)&&w.push(D))},!0),B.unique(w)}},{key:"commonAncestor",value:function(){return y.commonAncestor(this.sc,this.ec)}},{key:"expand",value:function(i){var o=y.ancestor(this.sc,i),l=y.ancestor(this.ec,i);if(!o&&!l)return new s(this.sc,this.so,this.ec,this.eo);var d=this.getPoints();return o&&(d.sc=o,d.so=0),l&&(d.ec=l,d.eo=y.nodeLength(l)),new s(d.sc,d.so,d.ec,d.eo)}},{key:"collapse",value:function(i){return i?new s(this.sc,this.so,this.sc,this.so):new s(this.ec,this.eo,this.ec,this.eo)}},{key:"splitText",value:function(){var i=this.sc===this.ec,o=this.getPoints();return y.isText(this.ec)&&!y.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),y.isText(this.sc)&&!y.isEdgePoint(this.getStartPoint())&&(o.sc=this.sc.splitText(this.so),o.so=0,i&&(o.ec=o.sc,o.eo=this.eo-this.so)),new s(o.sc,o.so,o.ec,o.eo)}},{key:"deleteContents",value:function(){if(this.isCollapsed())return this;var i=this.splitText(),o=i.nodes(null,{fullyContains:!0}),l=y.prevPointUntil(i.getStartPoint(),function(_){return!B.contains(o,_.node)}),d=[];return m().each(o,function(_,b){var w=b.parentNode;l.node!==w&&y.nodeLength(w)===1&&d.push(w),y.remove(b,!1)}),m().each(d,function(_,b){y.remove(b,!1)}),new s(l.node,l.offset,l.node,l.offset).normalize()}},{key:"makeIsOn",value:function(i){return function(){var o=y.ancestor(this.sc,i);return!!o&&o===y.ancestor(this.ec,i)}}},{key:"isLeftEdgeOf",value:function(i){if(!y.isLeftEdgePoint(this.getStartPoint()))return!1;var o=y.ancestor(this.sc,i);return o&&y.isLeftEdgeOf(this.sc,o)}},{key:"isCollapsed",value:function(){return this.sc===this.ec&&this.so===this.eo}},{key:"wrapBodyInlineWithPara",value:function(){if(y.isBodyContainer(this.sc)&&y.isEmpty(this.sc))return this.sc.innerHTML=y.emptyPara,new s(this.sc.firstChild,0,this.sc.firstChild,0);var i,o=this.normalize();if(y.isParaInline(this.sc)||y.isPara(this.sc))return o;if(y.isInline(o.sc)){var l=y.listAncestor(o.sc,et.not(y.isInline));i=B.last(l),y.isInline(i)||(i=l[l.length-2]||o.sc.childNodes[o.so])}else i=o.sc.childNodes[o.so>0?o.so-1:0];if(i){var d=y.listPrev(i,y.isParaInline).reverse();if((d=d.concat(y.listNext(i.nextSibling,y.isParaInline))).length){var _=y.wrap(B.head(d),"p");y.appendChildNodes(_,B.tail(d))}}return this.normalize()}},{key:"insertNode",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=this;(y.isText(i)||y.isInline(i))&&(l=this.wrapBodyInlineWithPara().deleteContents());var d=y.splitPoint(l.getStartPoint(),y.isInline(i));return d.rightNode?(d.rightNode.parentNode.insertBefore(i,d.rightNode),y.isEmpty(d.rightNode)&&(o||y.isPara(i))&&d.rightNode.parentNode.removeChild(d.rightNode)):d.container.appendChild(i),i}},{key:"pasteHTML",value:function(i){i=m().trim(i);var o=m()("<div></div>").html(i)[0],l=B.from(o.childNodes),d=this,_=!1;return d.so>=0&&(l=l.reverse(),_=!0),l=l.map(function(b){return d.insertNode(b,!y.isInline(b))}),_&&(l=l.reverse()),l}},{key:"toString",value:function(){var i=this.nativeRange();return _t.isW3CRangeSupport?i.toString():i.text}},{key:"getWordRange",value:function(i){var o=this.getEndPoint();if(!y.isCharPoint(o))return this;var l=y.prevPointUntil(o,function(d){return!y.isCharPoint(d)});return i&&(o=y.nextPointUntil(o,function(d){return!y.isCharPoint(d)})),new s(l.node,l.offset,o.node,o.offset)}},{key:"getWordsRange",value:function(i){var o=this.getEndPoint(),l=function(_){return!y.isCharPoint(_)&&!y.isSpacePoint(_)};if(l(o))return this;var d=y.prevPointUntil(o,l);return i&&(o=y.nextPointUntil(o,l)),new s(d.node,d.offset,o.node,o.offset)}},{key:"getWordsMatchRange",value:function(i){var o=this.getEndPoint(),l=y.prevPointUntil(o,function(w){if(!y.isCharPoint(w)&&!y.isSpacePoint(w))return!0;var C=new s(w.node,w.offset,o.node,o.offset),M=i.exec(C.toString());return M&&M.index===0}),d=new s(l.node,l.offset,o.node,o.offset),_=d.toString(),b=i.exec(_);return b&&b[0].length===_.length?d:null}},{key:"bookmark",value:function(i){return{s:{path:y.makeOffsetPath(i,this.sc),offset:this.so},e:{path:y.makeOffsetPath(i,this.ec),offset:this.eo}}}},{key:"paraBookmark",value:function(i){return{s:{path:B.tail(y.makeOffsetPath(B.head(i),this.sc)),offset:this.so},e:{path:B.tail(y.makeOffsetPath(B.last(i),this.ec)),offset:this.eo}}}},{key:"getClientRects",value:function(){return this.nativeRange().getClientRects()}}],f&&ze(h.prototype,f),s}();const st={create:function(s,h,f,i){if(arguments.length===4)return new xe(s,h,f,i);if(arguments.length===2)return new xe(s,h,f=s,i=h);var o=this.createFromSelection();if(!o&&arguments.length===1){var l=arguments[0];return y.isEditable(l)&&(l=l.lastChild),this.createFromBodyElement(l,y.emptyPara===arguments[0].innerHTML)}return o},createFromBodyElement:function(s){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1],f=this.createFromNode(s);return f.collapse(h)},createFromSelection:function(){var s,h,f,i;if(_t.isW3CRangeSupport){var o=document.getSelection();if(!o||o.rangeCount===0||y.isBody(o.anchorNode))return null;var l=o.getRangeAt(0);s=l.startContainer,h=l.startOffset,f=l.endContainer,i=l.endOffset}else{var d=document.selection.createRange(),_=d.duplicate();_.collapse(!1);var b=d;b.collapse(!0);var w=en(b,!0),C=en(_,!1);y.isText(w.node)&&y.isLeftEdgePoint(w)&&y.isTextNode(C.node)&&y.isRightEdgePoint(C)&&C.node.nextSibling===w.node&&(w=C),s=w.cont,h=w.offset,f=C.cont,i=C.offset}return new xe(s,h,f,i)},createFromNode:function(s){var h=s,f=0,i=s,o=y.nodeLength(i);return y.isVoid(h)&&(f=y.listPrev(h).length-1,h=h.parentNode),y.isBR(i)?(o=y.listPrev(i).length-1,i=i.parentNode):y.isVoid(i)&&(o=y.listPrev(i).length,i=i.parentNode),this.create(h,f,i,o)},createFromNodeBefore:function(s){return this.createFromNode(s).collapse(!0)},createFromNodeAfter:function(s){return this.createFromNode(s).collapse()},createFromBookmark:function(s,h){var f=y.fromOffsetPath(s,h.s.path),i=h.s.offset,o=y.fromOffsetPath(s,h.e.path),l=h.e.offset;return new xe(f,i,o,l)},createFromParaBookmark:function(s,h){var f=s.s.offset,i=s.e.offset,o=y.fromOffsetPath(B.head(h),s.s.path),l=y.fromOffsetPath(B.last(h),s.e.path);return new xe(o,f,l,i)}};var Tt={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34};const at={isEdit:function(s){return B.contains([Tt.BACKSPACE,Tt.TAB,Tt.ENTER,Tt.SPACE,Tt.DELETE],s)},isRemove:function(s){return B.contains([Tt.BACKSPACE,Tt.DELETE],s)},isMove:function(s){return B.contains([Tt.LEFT,Tt.UP,Tt.RIGHT,Tt.DOWN],s)},isNavigation:function(s){return B.contains([Tt.HOME,Tt.END,Tt.PAGEUP,Tt.PAGEDOWN],s)},nameFromCode:et.invertObject(Tt),code:Tt};function zn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Nn=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.stack=[],this.stackOffset=-1,this.context=i,this.$editable=i.layoutInfo.editable,this.editable=this.$editable[0]}var h,f;return h=s,(f=[{key:"makeSnapshot",value:function(){var i=st.create(this.editable);return{contents:this.$editable.html(),bookmark:i&&i.isOnEditable()?i.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}}},{key:"applySnapshot",value:function(i){i.contents!==null&&this.$editable.html(i.contents),i.bookmark!==null&&st.createFromBookmark(this.editable,i.bookmark).select()}},{key:"rewind",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])}},{key:"commit",value:function(){this.stack=[],this.stackOffset=-1,this.recordUndo()}},{key:"reset",value:function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()}},{key:"undo",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"redo",value:function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"recordUndo",value:function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot()),this.stack.length>this.context.options.historyLimit&&(this.stack.shift(),this.stackOffset-=1)}}])&&zn(h.prototype,f),s}();function On(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Bn=function(){function s(){(function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")})(this,s)}var h,f;return h=s,f=[{key:"jQueryCSS",value:function(i,o){var l={};return m().each(o,function(d,_){l[_]=i.css(_)}),l}},{key:"fromNode",value:function(i){var o=this.jQueryCSS(i,["font-family","font-size","text-align","list-style-type","line-height"])||{},l=i[0].style.fontSize||o["font-size"];return o["font-size"]=parseInt(l,10),o["font-size-unit"]=l.match(/[a-z%]+$/),o}},{key:"stylePara",value:function(i,o){m().each(i.nodes(y.isPara,{includeAncestor:!0}),function(l,d){m()(d).css(o)})}},{key:"styleNodes",value:function(i,o){i=i.splitText();var l=o&&o.nodeName||"SPAN",d=!(!o||!o.expandClosestSibling),_=!(!o||!o.onlyPartialContains);if(i.isCollapsed())return[i.insertNode(y.create(l))];var b=y.makePredByNodeName(l),w=i.nodes(y.isText,{fullyContains:!0}).map(function(M){return y.singleChildAncestor(M,b)||y.wrap(M,l)});if(d){if(_){var C=i.nodes();b=et.and(b,function(M){return B.contains(C,M)})}return w.map(function(M){var D=y.withClosestSiblings(M,b),R=B.head(D),W=B.tail(D);return m().each(W,function(H,j){y.appendChildNodes(R,j.childNodes),y.remove(j)}),B.head(D)})}return w}},{key:"current",value:function(i){var o=m()(y.isElement(i.sc)?i.sc:i.sc.parentNode),l=this.fromNode(o);try{l=m().extend(l,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||l["font-family"]})}catch{}if(i.isOnList()){var d=["circle","disc","disc-leading-zero","square"].indexOf(l["list-style-type"])>-1;l["list-style"]=d?"unordered":"ordered"}else l["list-style"]="none";var _=y.ancestor(i.sc,y.isPara);if(_&&_.style["line-height"])l["line-height"]=_.style.lineHeight;else{var b=parseInt(l["line-height"],10)/parseInt(l["font-size"],10);l["line-height"]=b.toFixed(1)}return l.anchor=i.isOnAnchor()&&y.ancestor(i.sc,y.isAnchor),l.ancestors=y.listAncestor(i.sc,y.isEditable),l.range=i,l}}],f&&On(h.prototype,f),s}();function Rn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Xe=function(){function s(){(function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")})(this,s)}var h,f;return h=s,f=[{key:"insertOrderedList",value:function(i){this.toggleList("OL",i)}},{key:"insertUnorderedList",value:function(i){this.toggleList("UL",i)}},{key:"indent",value:function(i){var o=this,l=st.create(i).wrapBodyInlineWithPara(),d=l.nodes(y.isPara,{includeAncestor:!0}),_=B.clusterBy(d,et.peq2("parentNode"));m().each(_,function(b,w){var C=B.head(w);if(y.isLi(C)){var M=o.findList(C.previousSibling);M?w.map(function(D){return M.appendChild(D)}):(o.wrapList(w,C.parentNode.nodeName),w.map(function(D){return D.parentNode}).map(function(D){return o.appendToPrevious(D)}))}else m().each(w,function(D,R){m()(R).css("marginLeft",function(W,H){return(parseInt(H,10)||0)+25})})}),l.select()}},{key:"outdent",value:function(i){var o=this,l=st.create(i).wrapBodyInlineWithPara(),d=l.nodes(y.isPara,{includeAncestor:!0}),_=B.clusterBy(d,et.peq2("parentNode"));m().each(_,function(b,w){var C=B.head(w);y.isLi(C)?o.releaseList([w]):m().each(w,function(M,D){m()(D).css("marginLeft",function(R,W){return(W=parseInt(W,10)||0)>25?W-25:""})})}),l.select()}},{key:"toggleList",value:function(i,o){var l=this,d=st.create(o).wrapBodyInlineWithPara(),_=d.nodes(y.isPara,{includeAncestor:!0}),b=d.paraBookmark(_),w=B.clusterBy(_,et.peq2("parentNode"));if(B.find(_,y.isPurePara)){var C=[];m().each(w,function(D,R){C=C.concat(l.wrapList(R,i))}),_=C}else{var M=d.nodes(y.isList,{includeAncestor:!0}).filter(function(D){return!m().nodeName(D,i)});M.length?m().each(M,function(D,R){y.replace(R,i)}):_=this.releaseList(w,!0)}st.createFromParaBookmark(b,_).select()}},{key:"wrapList",value:function(i,o){var l=B.head(i),d=B.last(i),_=y.isList(l.previousSibling)&&l.previousSibling,b=y.isList(d.nextSibling)&&d.nextSibling,w=_||y.insertAfter(y.create(o||"UL"),d);return i=i.map(function(C){return y.isPurePara(C)?y.replace(C,"LI"):C}),y.appendChildNodes(w,i),b&&(y.appendChildNodes(w,B.from(b.childNodes)),y.remove(b)),i}},{key:"releaseList",value:function(i,o){var l=this,d=[];return m().each(i,function(_,b){var w=B.head(b),C=B.last(b),M=o?y.lastAncestor(w,y.isList):w.parentNode,D=M.parentNode;if(M.parentNode.nodeName==="LI")b.map(function(j){var X=l.findNextSiblings(j);D.nextSibling?D.parentNode.insertBefore(j,D.nextSibling):D.parentNode.appendChild(j),X.length&&(l.wrapList(X,M.nodeName),j.appendChild(X[0].parentNode))}),M.children.length===0&&D.removeChild(M),D.childNodes.length===0&&D.parentNode.removeChild(D);else{var R=M.childNodes.length>1?y.splitTree(M,{node:C.parentNode,offset:y.position(C)+1},{isSkipPaddingBlankHTML:!0}):null,W=y.splitTree(M,{node:w.parentNode,offset:y.position(w)},{isSkipPaddingBlankHTML:!0});b=o?y.listDescendant(W,y.isLi):B.from(W.childNodes).filter(y.isLi),!o&&y.isList(M.parentNode)||(b=b.map(function(j){return y.replace(j,"P")})),m().each(B.from(b).reverse(),function(j,X){y.insertAfter(X,M)});var H=B.compact([M,W,R]);m().each(H,function(j,X){var ht=[X].concat(y.listDescendant(X,y.isList));m().each(ht.reverse(),function(gt,xt){y.nodeLength(xt)||y.remove(xt,!0)})})}d=d.concat(b)}),d}},{key:"appendToPrevious",value:function(i){return i.previousSibling?y.appendChildNodes(i.previousSibling,[i]):this.wrapList([i],"LI")}},{key:"findList",value:function(i){return i?B.find(i.children,function(o){return["OL","UL"].indexOf(o.nodeName)>-1}):null}},{key:"findNextSiblings",value:function(i){for(var o=[];i.nextSibling;)o.push(i.nextSibling),i=i.nextSibling;return o}}],f&&Rn(h.prototype,f),s}();function Hn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var $n=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.bullet=new Xe,this.options=i.options}var h,f;return h=s,f=[{key:"insertTab",value:function(i,o){var l=y.createText(new Array(o+1).join(y.NBSP_CHAR));(i=i.deleteContents()).insertNode(l,!0),(i=st.create(l,o)).select()}},{key:"insertParagraph",value:function(i,o){o=(o=(o=o||st.create(i)).deleteContents()).wrapBodyInlineWithPara();var l,d=y.ancestor(o.sc,y.isPara);if(d){if(y.isLi(d)&&(y.isEmpty(d)||y.deepestChildIsEmpty(d)))return void this.bullet.toggleList(d.parentNode.nodeName);var _=null;if(this.options.blockquoteBreakingLevel===1?_=y.ancestor(d,y.isBlockquote):this.options.blockquoteBreakingLevel===2&&(_=y.lastAncestor(d,y.isBlockquote)),_){l=m()(y.emptyPara)[0],y.isRightEdgePoint(o.getStartPoint())&&y.isBR(o.sc.nextSibling)&&m()(o.sc.nextSibling).remove();var b=y.splitTree(_,o.getStartPoint(),{isDiscardEmptySplits:!0});b?b.parentNode.insertBefore(l,b):y.insertAfter(l,_)}else{l=y.splitTree(d,o.getStartPoint());var w=y.listDescendant(d,y.isEmptyAnchor);w=w.concat(y.listDescendant(l,y.isEmptyAnchor)),m().each(w,function(M,D){y.remove(D)}),(y.isHeading(l)||y.isPre(l)||y.isCustomStyleTag(l))&&y.isEmpty(l)&&(l=y.replace(l,"p"))}}else{var C=o.sc.childNodes[o.so];l=m()(y.emptyPara)[0],C?o.sc.insertBefore(l,C):o.sc.appendChild(l)}st.create(l,0).normalize().select().scrollIntoView(i)}}],f&&Hn(h.prototype,f),s}();function Fn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var dt=function s(h,f,i,o){var l={colPos:0,rowPos:0},d=[],_=[];function b(H,j,X,ht,gt,xt,Ht){var bt={baseRow:X,baseCell:ht,isRowSpan:gt,isColSpan:xt,isVirtual:Ht};d[H]||(d[H]=[]),d[H][j]=bt}function w(H,j,X,ht){return{baseCell:H.baseCell,action:j,virtualTable:{rowIndex:X,cellIndex:ht}}}function C(H,j){if(!d[H]||!d[H][j])return j;for(var X=j;d[H][X];)if(X++,!d[H][X])return X}function M(H,j){var X=C(H.rowIndex,j.cellIndex),ht=j.colSpan>1,gt=j.rowSpan>1,xt=H.rowIndex===l.rowPos&&j.cellIndex===l.colPos;b(H.rowIndex,X,H,j,gt,ht,!1);var Ht=j.attributes.rowSpan?parseInt(j.attributes.rowSpan.value,10):0;if(Ht>1)for(var bt=1;bt<Ht;bt++){var Et=H.rowIndex+bt;D(Et,X,j,xt),b(Et,X,H,j,!0,ht,!0)}var Ve=j.attributes.colSpan?parseInt(j.attributes.colSpan.value,10):0;if(Ve>1)for(var he=1;he<Ve;he++){var Ue=C(H.rowIndex,X+he);D(H.rowIndex,Ue,j,xt),b(H.rowIndex,Ue,H,j,gt,!0,!0)}}function D(H,j,X,ht){H===l.rowPos&&l.colPos>=X.cellIndex&&X.cellIndex<=j&&!ht&&l.colPos++}function R(H){switch(f){case s.where.Column:if(H.isColSpan)return s.resultAction.SubtractSpanCount;break;case s.where.Row:if(!H.isVirtual&&H.isRowSpan)return s.resultAction.AddCell;if(H.isRowSpan)return s.resultAction.SubtractSpanCount}return s.resultAction.RemoveCell}function W(H){switch(f){case s.where.Column:if(H.isColSpan)return s.resultAction.SumSpanCount;if(H.isRowSpan&&H.isVirtual)return s.resultAction.Ignore;break;case s.where.Row:if(H.isRowSpan)return s.resultAction.SumSpanCount;if(H.isColSpan&&H.isVirtual)return s.resultAction.Ignore}return s.resultAction.AddCell}this.getActionList=function(){for(var H=f===s.where.Row?l.rowPos:-1,j=f===s.where.Column?l.colPos:-1,X=0,ht=!0;ht;){var gt=H>=0?H:X,xt=j>=0?j:X,Ht=d[gt];if(!Ht)return ht=!1,_;var bt=Ht[xt];if(!bt)return ht=!1,_;var Et=s.resultAction.Ignore;switch(i){case s.requestAction.Add:Et=W(bt);break;case s.requestAction.Delete:Et=R(bt)}_.push(w(bt,Et,gt,xt)),X++}return _},h&&h.tagName&&(h.tagName.toLowerCase()==="td"||h.tagName.toLowerCase()==="th")&&(l.colPos=h.cellIndex,h.parentElement&&h.parentElement.tagName&&h.parentElement.tagName.toLowerCase()==="tr"&&(l.rowPos=h.parentElement.rowIndex)),function(){for(var H=o.rows,j=0;j<H.length;j++)for(var X=H[j].cells,ht=0;ht<X.length;ht++)M(H[j],X[ht])}()};dt.where={Row:0,Column:1},dt.requestAction={Add:0,Delete:1},dt.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var qt=function(){function s(){(function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")})(this,s)}var h,f;return h=s,f=[{key:"tab",value:function(i,o){var l=y.ancestor(i.commonAncestor(),y.isCell),d=y.ancestor(l,y.isTable),_=y.listDescendant(d,y.isCell),b=B[o?"prev":"next"](_,l);b&&st.create(b,0).select()}},{key:"addRow",value:function(i,o){for(var l=y.ancestor(i.commonAncestor(),y.isCell),d=m()(l).closest("tr"),_=this.recoverAttributes(d),b=m()("<tr"+_+"></tr>"),w=new dt(l,dt.where.Row,dt.requestAction.Add,m()(d).closest("table")[0]).getActionList(),C=0;C<w.length;C++){var M=w[C],D=this.recoverAttributes(M.baseCell);switch(M.action){case dt.resultAction.AddCell:b.append("<td"+D+">"+y.blank+"</td>");break;case dt.resultAction.SumSpanCount:if(o==="top"&&(M.baseCell.parent?M.baseCell.closest("tr").rowIndex:0)<=d[0].rowIndex){var R=m()("<div></div>").append(m()("<td"+D+">"+y.blank+"</td>").removeAttr("rowspan")).html();b.append(R);break}var W=parseInt(M.baseCell.rowSpan,10);W++,M.baseCell.setAttribute("rowSpan",W)}}if(o==="top")d.before(b);else{if(l.rowSpan>1){var H=d[0].rowIndex+(l.rowSpan-2);return void m()(m()(d).parent().find("tr")[H]).after(m()(b))}d.after(b)}}},{key:"addCol",value:function(i,o){var l=y.ancestor(i.commonAncestor(),y.isCell),d=m()(l).closest("tr");m()(d).siblings().push(d);for(var _=new dt(l,dt.where.Column,dt.requestAction.Add,m()(d).closest("table")[0]).getActionList(),b=0;b<_.length;b++){var w=_[b],C=this.recoverAttributes(w.baseCell);switch(w.action){case dt.resultAction.AddCell:o==="right"?m()(w.baseCell).after("<td"+C+">"+y.blank+"</td>"):m()(w.baseCell).before("<td"+C+">"+y.blank+"</td>");break;case dt.resultAction.SumSpanCount:if(o==="right"){var M=parseInt(w.baseCell.colSpan,10);M++,w.baseCell.setAttribute("colSpan",M)}else m()(w.baseCell).before("<td"+C+">"+y.blank+"</td>")}}}},{key:"recoverAttributes",value:function(i){var o="";if(!i)return o;for(var l=i.attributes||[],d=0;d<l.length;d++)l[d].name.toLowerCase()!=="id"&&l[d].specified&&(o+=" "+l[d].name+"='"+l[d].value+"'");return o}},{key:"deleteRow",value:function(i){for(var o=y.ancestor(i.commonAncestor(),y.isCell),l=m()(o).closest("tr"),d=l.children("td, th").index(m()(o)),_=l[0].rowIndex,b=new dt(o,dt.where.Row,dt.requestAction.Delete,m()(l).closest("table")[0]).getActionList(),w=0;w<b.length;w++)if(b[w]){var C=b[w].baseCell,M=b[w].virtualTable,D=C.rowSpan&&C.rowSpan>1,R=D?parseInt(C.rowSpan,10):0;switch(b[w].action){case dt.resultAction.Ignore:continue;case dt.resultAction.AddCell:var W=l.next("tr")[0];if(!W)continue;var H=l[0].cells[d];D&&(R>2?(R--,W.insertBefore(H,W.cells[d]),W.cells[d].setAttribute("rowSpan",R),W.cells[d].innerHTML=""):R===2&&(W.insertBefore(H,W.cells[d]),W.cells[d].removeAttribute("rowSpan"),W.cells[d].innerHTML=""));continue;case dt.resultAction.SubtractSpanCount:D&&(R>2?(R--,C.setAttribute("rowSpan",R),M.rowIndex!==_&&C.cellIndex===d&&(C.innerHTML="")):R===2&&(C.removeAttribute("rowSpan"),M.rowIndex!==_&&C.cellIndex===d&&(C.innerHTML="")));continue;case dt.resultAction.RemoveCell:continue}}l.remove()}},{key:"deleteCol",value:function(i){for(var o=y.ancestor(i.commonAncestor(),y.isCell),l=m()(o).closest("tr"),d=l.children("td, th").index(m()(o)),_=new dt(o,dt.where.Column,dt.requestAction.Delete,m()(l).closest("table")[0]).getActionList(),b=0;b<_.length;b++)if(_[b])switch(_[b].action){case dt.resultAction.Ignore:continue;case dt.resultAction.SubtractSpanCount:var w=_[b].baseCell;if(w.colSpan&&w.colSpan>1){var C=w.colSpan?parseInt(w.colSpan,10):0;C>2?(C--,w.setAttribute("colSpan",C),w.cellIndex===d&&(w.innerHTML="")):C===2&&(w.removeAttribute("colSpan"),w.cellIndex===d&&(w.innerHTML=""))}continue;case dt.resultAction.RemoveCell:y.remove(_[b].baseCell,!0);continue}}},{key:"createTable",value:function(i,o,l){for(var d,_=[],b=0;b<i;b++)_.push("<td>"+y.blank+"</td>");d=_.join("");for(var w,C=[],M=0;M<o;M++)C.push("<tr>"+d+"</tr>");w=C.join("");var D=m()("<table>"+w+"</table>");return l&&l.tableClassName&&D.addClass(l.tableClassName),D[0]}},{key:"deleteTable",value:function(i){var o=y.ancestor(i.commonAncestor(),y.isCell);m()(o).closest("table").remove()}}],f&&Fn(h.prototype,f),s}();function V(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var on=function(){function s(i){var o=this;(function(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$note=i.layoutInfo.note,this.$editor=i.layoutInfo.editor,this.$editable=i.layoutInfo.editable,this.options=i.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.snapshot=null,this.style=new Bn,this.table=new qt,this.typing=new $n(i),this.bullet=new Xe,this.history=new Nn(i),this.context.memo("help.escape",this.lang.help.escape),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var l=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],d=0,_=l.length;d<_;d++)this[l[d]]=function(w){return function(C){o.beforeCommand(),document.execCommand(w,!1,C),o.afterCommand(!0)}}(l[d]),this.context.memo("help."+l[d],this.lang.help[l[d]]);this.fontName=this.wrapCommand(function(w){return o.fontStyling("font-family",_t.validFontName(w))}),this.fontSize=this.wrapCommand(function(w){var C=o.currentStyle()["font-size-unit"];return o.fontStyling("font-size",w+C)}),this.fontSizeUnit=this.wrapCommand(function(w){var C=o.currentStyle()["font-size"];return o.fontStyling("font-size",C+w)});for(var b=1;b<=6;b++)this["formatH"+b]=function(w){return function(){o.formatBlock("H"+w)}}(b),this.context.memo("help.formatH"+b,this.lang.help["formatH"+b]);this.insertParagraph=this.wrapCommand(function(){o.typing.insertParagraph(o.editable)}),this.insertOrderedList=this.wrapCommand(function(){o.bullet.insertOrderedList(o.editable)}),this.insertUnorderedList=this.wrapCommand(function(){o.bullet.insertUnorderedList(o.editable)}),this.indent=this.wrapCommand(function(){o.bullet.indent(o.editable)}),this.outdent=this.wrapCommand(function(){o.bullet.outdent(o.editable)}),this.insertNode=this.wrapCommand(function(w){o.isLimited(m()(w).text().length)||(o.getLastRange().insertNode(w),o.setLastRange(st.createFromNodeAfter(w).select()))}),this.insertText=this.wrapCommand(function(w){if(!o.isLimited(w.length)){var C=o.getLastRange().insertNode(y.createText(w));o.setLastRange(st.create(C,y.nodeLength(C)).select())}}),this.pasteHTML=this.wrapCommand(function(w){if(!o.isLimited(w.length)){w=o.context.invoke("codeview.purify",w);var C=o.getLastRange().pasteHTML(w);o.setLastRange(st.createFromNodeAfter(B.last(C)).select())}}),this.formatBlock=this.wrapCommand(function(w,C){var M=o.options.callbacks.onApplyCustomStyle;M?M.call(o,C,o.context,o.onFormatBlock):o.onFormatBlock(w,C)}),this.insertHorizontalRule=this.wrapCommand(function(){var w=o.getLastRange().insertNode(y.create("HR"));w.nextSibling&&o.setLastRange(st.create(w.nextSibling,0).normalize().select())}),this.lineHeight=this.wrapCommand(function(w){o.style.stylePara(o.getLastRange(),{lineHeight:w})}),this.createLink=this.wrapCommand(function(w){var C=[],M=w.url,D=w.text,R=w.isNewWindow,W=w.checkProtocol,H=o.options.linkAddNoReferrer,j=o.options.linkAddNoOpener,X=w.range||o.getLastRange(),ht=D.length-X.toString().length;if(!(ht>0&&o.isLimited(ht))){var gt=X.toString()!==D;typeof M=="string"&&(M=M.trim()),o.options.onCreateLink?M=o.options.onCreateLink(M):W&&(M=/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(M)?M:o.options.defaultProtocol+M);var xt=[];if(gt){var Ht=(X=X.deleteContents()).insertNode(m()("<A>"+D+"</A>")[0]);xt.push(Ht)}else xt=o.style.styleNodes(X,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});m().each(xt,function(bt,Et){m()(Et).attr("href",M),R?(m()(Et).attr("target","_blank"),H&&C.push("noreferrer"),j&&C.push("noopener"),C.length&&m()(Et).attr("rel",C.join(" "))):m()(Et).removeAttr("target")}),o.setLastRange(o.createRangeFromList(xt).select())}}),this.color=this.wrapCommand(function(w){var C=w.foreColor,M=w.backColor;C&&document.execCommand("foreColor",!1,C),M&&document.execCommand("backColor",!1,M)}),this.foreColor=this.wrapCommand(function(w){document.execCommand("foreColor",!1,w)}),this.insertTable=this.wrapCommand(function(w){var C=w.split("x");o.getLastRange().deleteContents().insertNode(o.table.createTable(C[0],C[1],o.options))}),this.removeMedia=this.wrapCommand(function(){var w=m()(o.restoreTarget()).parent();w.closest("figure").length?w.closest("figure").remove():w=m()(o.restoreTarget()).detach(),o.context.triggerEvent("media.delete",w,o.$editable)}),this.floatMe=this.wrapCommand(function(w){var C=m()(o.restoreTarget());C.toggleClass("note-float-left",w==="left"),C.toggleClass("note-float-right",w==="right"),C.css("float",w==="none"?"":w)}),this.resize=this.wrapCommand(function(w){var C=m()(o.restoreTarget());(w=parseFloat(w))===0?C.css("width",""):C.css({width:100*w+"%",height:""})})}var h,f;return h=s,f=[{key:"initialize",value:function(){var i=this;this.$editable.on("keydown",function(o){if(o.keyCode===at.code.ENTER&&i.context.triggerEvent("enter",o),i.context.triggerEvent("keydown",o),i.snapshot=i.history.makeSnapshot(),i.hasKeyShortCut=!1,o.isDefaultPrevented()||(i.options.shortcuts?i.hasKeyShortCut=i.handleKeyMap(o):i.preventDefaultEditableShortCuts(o)),i.isLimited(1,o)){var l=i.getLastRange();if(l.eo-l.so==0)return!1}i.setLastRange(),i.options.recordEveryKeystroke&&i.hasKeyShortCut===!1&&i.history.recordUndo()}).on("keyup",function(o){i.setLastRange(),i.context.triggerEvent("keyup",o)}).on("focus",function(o){i.setLastRange(),i.context.triggerEvent("focus",o)}).on("blur",function(o){i.context.triggerEvent("blur",o)}).on("mousedown",function(o){i.context.triggerEvent("mousedown",o)}).on("mouseup",function(o){i.setLastRange(),i.history.recordUndo(),i.context.triggerEvent("mouseup",o)}).on("scroll",function(o){i.context.triggerEvent("scroll",o)}).on("paste",function(o){i.setLastRange(),i.context.triggerEvent("paste",o)}).on("input",function(){i.isLimited(0)&&i.snapshot&&i.history.applySnapshot(i.snapshot)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.attr("autocorrect",this.options.spellCheck),this.options.disableGrammar&&this.$editable.attr("data-gramm",!1),this.$editable.html(y.html(this.$note)||y.emptyPara),this.$editable.on(_t.inputEventName,et.debounce(function(){i.context.triggerEvent("change",i.$editable.html(),i.$editable)},10)),this.$editable.on("focusin",function(o){i.context.triggerEvent("focusin",o)}).on("focusout",function(o){i.context.triggerEvent("focusout",o)}),this.options.airMode?this.options.overrideContextMenu&&this.$editor.on("contextmenu",function(o){return i.context.triggerEvent("contextmenu",o),!1}):(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo(),this.setLastRange()}},{key:"destroy",value:function(){this.$editable.off()}},{key:"handleKeyMap",value:function(i){var o=this.options.keyMap[_t.isMac?"mac":"pc"],l=[];i.metaKey&&l.push("CMD"),i.ctrlKey&&!i.altKey&&l.push("CTRL"),i.shiftKey&&l.push("SHIFT");var d=at.nameFromCode[i.keyCode];d&&l.push(d);var _=o[l.join("+")];if(d!=="TAB"||this.options.tabDisable)if(_){if(this.context.invoke(_)!==!1)return i.preventDefault(),!0}else at.isEdit(i.keyCode)&&(at.isRemove(i.keyCode)&&this.context.invoke("removed"),this.afterCommand());else this.afterCommand();return!1}},{key:"preventDefaultEditableShortCuts",value:function(i){(i.ctrlKey||i.metaKey)&&B.contains([66,73,85],i.keyCode)&&i.preventDefault()}},{key:"isLimited",value:function(i,o){return i=i||0,(o===void 0||!(at.isMove(o.keyCode)||at.isNavigation(o.keyCode)||o.ctrlKey||o.metaKey||B.contains([at.code.BACKSPACE,at.code.DELETE],o.keyCode)))&&this.options.maxTextLength>0&&this.$editable.text().length+i>this.options.maxTextLength}},{key:"createRange",value:function(){return this.focus(),this.setLastRange(),this.getLastRange()}},{key:"createRangeFromList",value:function(i){var o=st.createFromNodeBefore(B.head(i)).getStartPoint(),l=st.createFromNodeAfter(B.last(i)).getEndPoint();return st.create(o.node,o.offset,l.node,l.offset)}},{key:"setLastRange",value:function(i){i?this.lastRange=i:(this.lastRange=st.create(this.editable),m()(this.lastRange.sc).closest(".note-editable").length===0&&(this.lastRange=st.createFromBodyElement(this.editable)))}},{key:"getLastRange",value:function(){return this.lastRange||this.setLastRange(),this.lastRange}},{key:"saveRange",value:function(i){i&&this.getLastRange().collapse().select()}},{key:"restoreRange",value:function(){this.lastRange&&(this.lastRange.select(),this.focus())}},{key:"saveTarget",value:function(i){this.$editable.data("target",i)}},{key:"clearTarget",value:function(){this.$editable.removeData("target")}},{key:"restoreTarget",value:function(){return this.$editable.data("target")}},{key:"currentStyle",value:function(){var i=st.create();return i&&(i=i.normalize()),i?this.style.current(i):this.style.fromNode(this.$editable)}},{key:"styleFromNode",value:function(i){return this.style.fromNode(i)}},{key:"undo",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"commit",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"redo",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"beforeCommand",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),document.execCommand("styleWithCSS",!1,this.options.styleWithCSS),this.focus()}},{key:"afterCommand",value:function(i){this.normalizeContent(),this.history.recordUndo(),i||this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"tab",value:function(){var i=this.getLastRange();if(i.isCollapsed()&&i.isOnCell())this.table.tab(i);else{if(this.options.tabSize===0)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(i,this.options.tabSize),this.afterCommand())}}},{key:"untab",value:function(){var i=this.getLastRange();if(i.isCollapsed()&&i.isOnCell())this.table.tab(i,!0);else if(this.options.tabSize===0)return!1}},{key:"wrapCommand",value:function(i){return function(){this.beforeCommand(),i.apply(this,arguments),this.afterCommand()}}},{key:"removed",value:function(i,o,l){(i=st.create()).isCollapsed()&&i.isOnCell()&&(l=(o=i.ec).tagName)&&o.childElementCount===1&&o.childNodes[0].tagName==="BR"&&(l==="P"?o.remove():["TH","TD"].indexOf(l)>=0&&o.firstChild.remove())}},{key:"insertImage",value:function(i,o){var l,d=this;return(l=i,m().Deferred(function(_){var b=m()("<img>");b.one("load",function(){b.off("error abort"),_.resolve(b)}).one("error abort",function(){b.off("load").detach(),_.reject(b)}).css({display:"none"}).appendTo(document.body).attr("src",l)}).promise()).then(function(_){d.beforeCommand(),typeof o=="function"?o(_):(typeof o=="string"&&_.attr("data-filename",o),_.css("width",Math.min(d.$editable.width(),_.width()))),_.show(),d.getLastRange().insertNode(_[0]),d.setLastRange(st.createFromNodeAfter(_[0]).select()),d.afterCommand()}).fail(function(_){d.context.triggerEvent("image.upload.error",_)})}},{key:"insertImagesAsDataURL",value:function(i){var o=this;m().each(i,function(l,d){var _=d.name;o.options.maximumImageFileSize&&o.options.maximumImageFileSize<d.size?o.context.triggerEvent("image.upload.error",o.lang.image.maximumFileSizeError):function(b){return m().Deferred(function(w){m().extend(new FileReader,{onload:function(C){var M=C.target.result;w.resolve(M)},onerror:function(C){w.reject(C)}}).readAsDataURL(b)}).promise()}(d).then(function(b){return o.insertImage(b,_)}).fail(function(){o.context.triggerEvent("image.upload.error")})})}},{key:"insertImagesOrCallback",value:function(i){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",i):this.insertImagesAsDataURL(i)}},{key:"getSelectedText",value:function(){var i=this.getLastRange();return i.isOnAnchor()&&(i=st.createFromNode(y.ancestor(i.sc,y.isAnchor))),i.toString()}},{key:"onFormatBlock",value:function(i,o){if(document.execCommand("FormatBlock",!1,_t.isMSIE?"<"+i+">":i),o&&o.length&&(o[0].tagName.toUpperCase()!==i.toUpperCase()&&(o=o.find(i)),o&&o.length)){var l=this.createRange(),d=m()([l.sc,l.ec]).closest(i);d.removeClass();var _=o[0].className||"";_&&d.addClass(_)}}},{key:"formatPara",value:function(){this.formatBlock("P")}},{key:"fontStyling",value:function(i,o){var l=this.getLastRange();if(l!==""){var d=this.style.styleNodes(l);if(this.$editor.find(".note-status-output").html(""),m()(d).css(i,o),l.isCollapsed()){var _=B.head(d);_&&!y.nodeLength(_)&&(_.innerHTML=y.ZERO_WIDTH_NBSP_CHAR,st.createFromNode(_.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",_))}else l.select()}else{var b=m().now();this.$editor.find(".note-status-output").html('<div id="note-status-output-'+b+'" class="alert alert-info">'+this.lang.output.noSelection+"</div>"),setTimeout(function(){m()("#note-status-output-"+b).remove()},5e3)}}},{key:"unlink",value:function(){var i=this.getLastRange();if(i.isOnAnchor()){var o=y.ancestor(i.sc,y.isAnchor);(i=st.createFromNode(o)).select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}}},{key:"getLinkInfo",value:function(){var i=this.getLastRange().expand(y.isAnchor),o=m()(B.head(i.nodes(y.isAnchor))),l={range:i,text:i.toString(),url:o.length?o.attr("href"):""};return o.length&&(l.isNewWindow=o.attr("target")==="_blank"),l}},{key:"addRow",value:function(i){var o=this.getLastRange(this.$editable);o.isCollapsed()&&o.isOnCell()&&(this.beforeCommand(),this.table.addRow(o,i),this.afterCommand())}},{key:"addCol",value:function(i){var o=this.getLastRange(this.$editable);o.isCollapsed()&&o.isOnCell()&&(this.beforeCommand(),this.table.addCol(o,i),this.afterCommand())}},{key:"deleteRow",value:function(){var i=this.getLastRange(this.$editable);i.isCollapsed()&&i.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(i),this.afterCommand())}},{key:"deleteCol",value:function(){var i=this.getLastRange(this.$editable);i.isCollapsed()&&i.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(i),this.afterCommand())}},{key:"deleteTable",value:function(){var i=this.getLastRange(this.$editable);i.isCollapsed()&&i.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(i),this.afterCommand())}},{key:"resizeTo",value:function(i,o,l){var d;if(l){var _=i.y/i.x,b=o.data("ratio");d={width:b>_?i.x:i.y/b,height:b>_?i.x*b:i.y}}else d={width:i.x,height:i.y};o.css(d)}},{key:"hasFocus",value:function(){return this.$editable.is(":focus")}},{key:"focus",value:function(){this.hasFocus()||this.$editable.focus()}},{key:"isEmpty",value:function(){return y.isEmpty(this.$editable[0])||y.emptyPara===this.$editable.html()}},{key:"empty",value:function(){this.context.invoke("code",y.emptyPara)}},{key:"normalizeContent",value:function(){this.$editable[0].normalize()}}],f&&V(h.prototype,f),s}();function sn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var rn=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$editable=i.layoutInfo.editable}var h,f;return h=s,(f=[{key:"initialize",value:function(){this.$editable.on("paste",this.pasteByEvent.bind(this))}},{key:"pasteByEvent",value:function(i){var o=this;if(!this.context.isDisabled()){var l=i.originalEvent.clipboardData;if(l&&l.items&&l.items.length){var d=l.items.length>1?l.items[1]:B.head(l.items);d.kind==="file"&&d.type.indexOf("image/")!==-1?(this.context.invoke("editor.insertImagesOrCallback",[d.getAsFile()]),i.preventDefault()):d.kind==="string"&&this.context.invoke("editor.isLimited",l.getData("Text").length)&&i.preventDefault()}else if(window.clipboardData){var _=window.clipboardData.getData("text");this.context.invoke("editor.isLimited",_.length)&&i.preventDefault()}setTimeout(function(){o.context.invoke("editor.afterCommand")},10)}}}])&&sn(h.prototype,f),s}();function an(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Si=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$eventListener=m()(document),this.$editor=i.layoutInfo.editor,this.$editable=i.layoutInfo.editable,this.options=i.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=m()(['<div class="note-dropzone">','<div class="note-dropzone-message"></div>',"</div>"].join("")).prependTo(this.$editor)}var h,f;return h=s,f=[{key:"initialize",value:function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(i){i.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}},{key:"attachDragAndDropEvent",value:function(){var i=this,o=m()(),l=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(d){var _=i.context.invoke("codeview.isActivated"),b=i.$editor.width()>0&&i.$editor.height()>0;_||o.length||!b||(i.$editor.addClass("dragover"),i.$dropzone.width(i.$editor.width()),i.$dropzone.height(i.$editor.height()),l.text(i.lang.image.dragImageHere)),o=o.add(d.target)},this.documentEventHandlers.onDragleave=function(d){(o=o.not(d.target)).length&&d.target.nodeName!=="BODY"||(o=m()(),i.$editor.removeClass("dragover"))},this.documentEventHandlers.onDrop=function(){o=m()(),i.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){i.$dropzone.addClass("hover"),l.text(i.lang.image.dropImage)}).on("dragleave",function(){i.$dropzone.removeClass("hover"),l.text(i.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(d){var _=d.originalEvent.dataTransfer;d.preventDefault(),_&&_.files&&_.files.length?(i.$editable.focus(),i.context.invoke("editor.insertImagesOrCallback",_.files)):m().each(_.types,function(b,w){if(!(w.toLowerCase().indexOf("_moz_")>-1)){var C=_.getData(w);w.toLowerCase().indexOf("text")>-1?i.context.invoke("editor.pasteHTML",C):m()(C).each(function(M,D){i.context.invoke("editor.insertNode",D)})}})}).on("dragover",!1)}},{key:"destroy",value:function(){var i=this;Object.keys(this.documentEventHandlers).forEach(function(o){i.$eventListener.off(o.slice(2).toLowerCase(),i.documentEventHandlers[o])}),this.documentEventHandlers={}}}],f&&an(h.prototype,f),s}();function ln(s,h){var f=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!f){if(Array.isArray(s)||(f=function(b,w){if(!!b){if(typeof b=="string")return se(b,w);var C=Object.prototype.toString.call(b).slice(8,-1);if(C==="Object"&&b.constructor&&(C=b.constructor.name),C==="Map"||C==="Set")return Array.from(b);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return se(b,w)}}(s))||h&&s&&typeof s.length=="number"){f&&(s=f);var i=0,o=function(){};return{s:o,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(b){throw b},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,d=!0,_=!1;return{s:function(){f=f.call(s)},n:function(){var b=f.next();return d=b.done,b},e:function(b){_=!0,l=b},f:function(){try{d||f.return==null||f.return()}finally{if(_)throw l}}}}function se(s,h){(h==null||h>s.length)&&(h=s.length);for(var f=0,i=new Array(h);f<h;f++)i[f]=s[f];return i}function cn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Zn=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$editor=i.layoutInfo.editor,this.$editable=i.layoutInfo.editable,this.$codable=i.layoutInfo.codable,this.options=i.options,this.CodeMirrorConstructor=window.CodeMirror,this.options.codemirror.CodeMirrorConstructor&&(this.CodeMirrorConstructor=this.options.codemirror.CodeMirrorConstructor)}var h,f;return h=s,f=[{key:"sync",value:function(i){var o=this.isActivated(),l=this.CodeMirrorConstructor;o&&(i?l?this.$codable.data("cmEditor").getDoc().setValue(i):this.$codable.val(i):l&&this.$codable.data("cmEditor").save())}},{key:"initialize",value:function(){var i=this;this.$codable.on("keyup",function(o){o.keyCode===at.code.ESCAPE&&i.deactivate()})}},{key:"isActivated",value:function(){return this.$editor.hasClass("codeview")}},{key:"toggle",value:function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")}},{key:"purify",value:function(i){if(this.options.codeviewFilter&&(i=i.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var o=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);i=i.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(l){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(l))return"";var d,_=ln(o);try{for(_.s();!(d=_.n()).done;){var b=d.value;if(new RegExp('src="(https?:)?//'+b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(l))return l}}catch(w){_.e(w)}finally{_.f()}return""})}return i}},{key:"activate",value:function(){var i=this,o=this.CodeMirrorConstructor;if(this.$codable.val(y.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.context.invoke("airPopover.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),o){var l=o.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var d=new o.TernServer(this.options.codemirror.tern);l.ternServer=d,l.on("cursorActivity",function(_){d.updateArgHints(_)})}l.on("blur",function(_){i.context.triggerEvent("blur.codeview",l.getValue(),_)}),l.on("change",function(){i.context.triggerEvent("change.codeview",l.getValue(),l)}),l.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",l)}else this.$codable.on("blur",function(_){i.context.triggerEvent("blur.codeview",i.$codable.val(),_)}),this.$codable.on("input",function(){i.context.triggerEvent("change.codeview",i.$codable.val(),i.$codable)})}},{key:"deactivate",value:function(){if(this.CodeMirrorConstructor){var i=this.$codable.data("cmEditor");this.$codable.val(i.getValue()),i.toTextArea()}var o=this.purify(y.value(this.$codable,this.options.prettifyHtml)||y.emptyPara),l=this.$editable.html()!==o;this.$editable.html(o),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),l&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1),this.context.invoke("airPopover.updateCodeview",!1)}},{key:"destroy",value:function(){this.isActivated()&&this.deactivate()}}],f&&cn(h.prototype,f),s}();function Vn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Un=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.$document=m()(document),this.$statusbar=i.layoutInfo.statusbar,this.$editable=i.layoutInfo.editable,this.$codable=i.layoutInfo.codable,this.options=i.options}var h,f;return h=s,(f=[{key:"initialize",value:function(){var i=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(o){o.preventDefault(),o.stopPropagation();var l=i.$editable.offset().top-i.$document.scrollTop(),d=i.$codable.offset().top-i.$document.scrollTop(),_=function(b){var w=b.clientY-(l+24),C=b.clientY-(d+24);w=i.options.minheight>0?Math.max(w,i.options.minheight):w,w=i.options.maxHeight>0?Math.min(w,i.options.maxHeight):w,C=i.options.minheight>0?Math.max(C,i.options.minheight):C,C=i.options.maxHeight>0?Math.min(C,i.options.maxHeight):C,i.$editable.height(w),i.$codable.height(C)};i.$document.on("mousemove",_).one("mouseup",function(){i.$document.off("mousemove",_)})})}},{key:"destroy",value:function(){this.$statusbar.off(),this.$statusbar.addClass("locked")}}])&&Vn(h.prototype,f),s}();function Wn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var hn=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$editor=i.layoutInfo.editor,this.$toolbar=i.layoutInfo.toolbar,this.$editable=i.layoutInfo.editable,this.$codable=i.layoutInfo.codable,this.$window=m()(window),this.$scrollbar=m()("html, body"),this.scrollbarClassName="note-fullscreen-body",this.onResize=function(){o.resizeTo({h:o.$window.height()-o.$toolbar.outerHeight()})}}var h,f;return h=s,(f=[{key:"resizeTo",value:function(i){this.$editable.css("height",i.h),this.$codable.css("height",i.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,i.h)}},{key:"toggle",value:function(){this.$editor.toggleClass("fullscreen");var i=this.isFullscreen();this.$scrollbar.toggleClass(this.scrollbarClassName,i),i?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight"))),this.context.invoke("toolbar.updateFullscreen",i)}},{key:"isFullscreen",value:function(){return this.$editor.hasClass("fullscreen")}},{key:"destroy",value:function(){this.$scrollbar.removeClass(this.scrollbarClassName)}}])&&Wn(h.prototype,f),s}();function jn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Qe=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$document=m()(document),this.$editingArea=i.layoutInfo.editingArea,this.options=i.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(l,d){o.update(d.target,d)&&d.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){o.update()},"summernote.disable summernote.blur":function(){o.hide()},"summernote.codeview.toggled":function(){o.update()}}}var h,f;return h=s,(f=[{key:"initialize",value:function(){var i=this;this.$handle=m()(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(o){if(y.isControlSizing(o.target)){o.preventDefault(),o.stopPropagation();var l=i.$handle.find(".note-control-selection").data("target"),d=l.offset(),_=i.$document.scrollTop(),b=function(w){i.context.invoke("editor.resizeTo",{x:w.clientX-d.left,y:w.clientY-(d.top-_)},l,!w.shiftKey),i.update(l[0],w)};i.$document.on("mousemove",b).one("mouseup",function(w){w.preventDefault(),i.$document.off("mousemove",b),i.context.invoke("editor.afterCommand")}),l.data("ratio")||l.data("ratio",l.height()/l.width())}}),this.$handle.on("wheel",function(o){o.preventDefault(),i.update()})}},{key:"destroy",value:function(){this.$handle.remove()}},{key:"update",value:function(i,o){if(this.context.isDisabled())return!1;var l=y.isImg(i),d=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",i,o),l){var _=m()(i),b=this.$editingArea[0].getBoundingClientRect(),w=i.getBoundingClientRect();d.css({display:"block",left:w.left-b.left,top:w.top-b.top,width:w.width,height:w.height}).data("target",_);var C=new Image;C.src=_.attr("src");var M=w.width+"x"+w.height+" ("+this.lang.image.original+": "+C.width+"x"+C.height+")";d.find(".note-control-selection-info").text(M),this.context.invoke("editor.saveTarget",i)}else this.hide();return l}},{key:"hide",value:function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()}}])&&jn(h.prototype,f),s}();function qn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Kn=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|tel:|mailto:[A-Z0-9._%+-]+@|xmpp:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,Gn=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.options=i.options,this.events={"summernote.keyup":function(l,d){d.isDefaultPrevented()||o.handleKeyup(d)},"summernote.keydown":function(l,d){o.handleKeydown(d)}}}var h,f;return h=s,(f=[{key:"initialize",value:function(){this.lastWordRange=null}},{key:"destroy",value:function(){this.lastWordRange=null}},{key:"replace",value:function(){if(this.lastWordRange){var i=this.lastWordRange.toString(),o=i.match(Kn);if(o&&(o[1]||o[2])){var l=o[1]?i:"http://"+i,d=this.options.showDomainOnlyForAutolink?i.replace(/^(?:https?:\/\/)?(?:tel?:?)?(?:mailto?:?)?(?:xmpp?:?)?(?:www\.)?/i,"").split("/")[0]:i,_=m()("<a></a>").html(d).attr("href",l)[0];this.context.options.linkTargetBlank&&m()(_).attr("target","_blank"),this.lastWordRange.insertNode(_),this.lastWordRange=null,this.context.invoke("editor.focus")}}}},{key:"handleKeydown",value:function(i){if(B.contains([at.code.ENTER,at.code.SPACE],i.keyCode)){var o=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=o}}},{key:"handleKeyup",value:function(i){(at.code.SPACE===event.keyCode||at.code.ENTER===event.keyCode&&!event.shiftKey)&&this.replace()}}])&&qn(h.prototype,f),s}();function Yn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Jn=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.$note=i.layoutInfo.note,this.events={"summernote.change":function(){o.$note.val(i.invoke("code"))}}}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return y.isTextarea(this.$note[0])}}])&&Yn(h.prototype,f),s}();function Ci(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Ne=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.options=i.options.replace||{},this.keys=[at.code.ENTER,at.code.SPACE,at.code.PERIOD,at.code.COMMA,at.code.SEMICOLON,at.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":function(l,d){d.isDefaultPrevented()||o.handleKeyup(d)},"summernote.keydown":function(l,d){o.handleKeydown(d)}}}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return!!this.options.match}},{key:"initialize",value:function(){this.lastWord=null}},{key:"destroy",value:function(){this.lastWord=null}},{key:"replace",value:function(){if(this.lastWord){var i=this,o=this.lastWord.toString();this.options.match(o,function(l){if(l){var d="";if(typeof l=="string"?d=y.createText(l):l instanceof jQuery?d=l[0]:l instanceof Node&&(d=l),!d)return;i.lastWord.insertNode(d),i.lastWord=null,i.context.invoke("editor.focus")}})}}},{key:"handleKeydown",value:function(i){if(this.previousKeydownCode&&B.contains(this.keys,this.previousKeydownCode))this.previousKeydownCode=i.keyCode;else{if(B.contains(this.keys,i.keyCode)){var o=this.context.invoke("editor.createRange").getWordRange();this.lastWord=o}this.previousKeydownCode=i.keyCode}}},{key:"handleKeyup",value:function(i){B.contains(this.keys,i.keyCode)&&this.replace()}}])&&Ci(h.prototype,f),s}();function un(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var dn=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$editingArea=i.layoutInfo.editingArea,this.options=i.options,this.options.inheritPlaceholder===!0&&(this.options.placeholder=this.context.$note.attr("placeholder")||this.options.placeholder),this.events={"summernote.init summernote.change":function(){o.update()},"summernote.codeview.toggled":function(){o.update()}}}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return!!this.options.placeholder}},{key:"initialize",value:function(){var i=this;this.$placeholder=m()('<div class="note-placeholder"></div>'),this.$placeholder.on("click",function(){i.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()}},{key:"destroy",value:function(){this.$placeholder.remove()}},{key:"update",value:function(){var i=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(i)}}])&&un(h.prototype,f),s}();function Oe(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var nt=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.ui=m().summernote.ui,this.context=i,this.$toolbar=i.layoutInfo.toolbar,this.options=i.options,this.lang=this.options.langInfo,this.invertedKeyMap=et.invertObject(this.options.keyMap[_t.isMac?"mac":"pc"])}var h,f;return h=s,f=[{key:"representShortcut",value:function(i){var o=this.invertedKeyMap[i];return this.options.shortcuts&&o?(_t.isMac&&(o=o.replace("CMD","\u2318").replace("SHIFT","\u21E7"))," ("+(o=o.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""}},{key:"button",value:function(i){return!this.options.tooltip&&i.tooltip&&delete i.tooltip,i.container=this.options.container,this.ui.button(i)}},{key:"initialize",value:function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}}},{key:"destroy",value:function(){delete this.fontInstalledMap}},{key:"isFontInstalled",value:function(i){return Object.prototype.hasOwnProperty.call(this.fontInstalledMap,i)||(this.fontInstalledMap[i]=_t.isFontInstalled(i)||B.contains(this.options.fontNamesIgnoreCheck,i)),this.fontInstalledMap[i]}},{key:"isFontDeservedToAdd",value:function(i){return(i=i.toLowerCase())!==""&&this.isFontInstalled(i)&&_t.genericFontFamilies.indexOf(i)===-1}},{key:"colorPalette",value:function(i,o,l,d){var _=this;return this.ui.buttonGroup({className:"note-color "+i,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:o,click:function(b){var w=m()(b.currentTarget);l&&d?_.context.invoke("editor.color",{backColor:w.attr("data-backColor"),foreColor:w.attr("data-foreColor")}):l?_.context.invoke("editor.color",{backColor:w.attr("data-backColor")}):d&&_.context.invoke("editor.color",{foreColor:w.attr("data-foreColor")})},callback:function(b){var w=b.find(".note-recent-color");l&&(w.css("background-color",_.options.colorButton.backColor),b.attr("data-backColor",_.options.colorButton.backColor)),d?(w.css("color",_.options.colorButton.foreColor),b.attr("data-foreColor",_.options.colorButton.foreColor)):w.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(l?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.background+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="backColor" data-value="transparent">',this.lang.color.transparent,"</button>","</div>",'<div class="note-holder" data-event="backColor"><!-- back colors --></div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="backColorPicker-'+this.options.id+'">',this.lang.color.cpSelect,"</button>",'<input type="color" id="backColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette-'+this.options.id+'">',"</div>",'<div class="note-holder-custom" id="backColorPalette-'+this.options.id+'" data-event="backColor"></div>',"</div>"].join(""):"")+(d?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.foreground+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"</button>","</div>",'<div class="note-holder" data-event="foreColor"><!-- fore colors --></div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="foreColorPicker-'+this.options.id+'">',this.lang.color.cpSelect,"</button>",'<input type="color" id="foreColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette-'+this.options.id+'">',"</div>",'<div class="note-holder-custom" id="foreColorPalette-'+this.options.id+'" data-event="foreColor"></div>',"</div>"].join(""):""),callback:function(b){b.find(".note-holder").each(function(C,M){var D=m()(M);D.append(_.ui.palette({colors:_.options.colors,colorsName:_.options.colorsName,eventName:D.data("event"),container:_.options.container,tooltip:_.options.tooltip}).render())});var w=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];b.find(".note-holder-custom").each(function(C,M){var D=m()(M);D.append(_.ui.palette({colors:w,colorsName:w,eventName:D.data("event"),container:_.options.container,tooltip:_.options.tooltip}).render())}),b.find("input[type=color]").each(function(C,M){m()(M).on("change",function(){var D=b.find("#"+m()(this).data("event")).find(".note-color-btn").first(),R=this.value.toUpperCase();D.css("background-color",R).attr("aria-label",R).attr("data-value",R).attr("data-original-title",R),D.click()})})},click:function(b){b.stopPropagation();var w=m()("."+i).find(".note-dropdown-menu"),C=m()(b.target),M=C.data("event"),D=C.attr("data-value");if(M==="openPalette"){var R=w.find("#"+D),W=m()(w.find("#"+R.data("event")).find(".note-color-row")[0]),H=W.find(".note-color-btn").last().detach(),j=R.val();H.css("background-color",j).attr("aria-label",j).attr("data-value",j).attr("data-original-title",j),W.prepend(H),R.click()}else{if(B.contains(["backColor","foreColor"],M)){var X=M==="backColor"?"background-color":"color",ht=C.closest(".note-color").find(".note-recent-color"),gt=C.closest(".note-color").find(".note-current-color-button");ht.css(X,D),gt.attr("data-"+M,D)}_.context.invoke("editor."+M,D)}}})]}).render()}},{key:"addToolbarButtons",value:function(){var i=this;this.context.memo("button.style",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents(i.ui.icon(i.options.icons.magic),i.options),tooltip:i.lang.style.style,data:{toggle:"dropdown"}}),i.ui.dropdown({className:"dropdown-style",items:i.options.styleTags,title:i.lang.style.style,template:function(R){typeof R=="string"&&(R={tag:R,title:Object.prototype.hasOwnProperty.call(i.lang.style,R)?i.lang.style[R]:R});var W=R.tag,H=R.title;return"<"+W+(R.style?' style="'+R.style+'" ':"")+(R.className?' class="'+R.className+'"':"")+">"+H+"</"+W+">"},click:i.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var o=function(R,W){var H=i.options.styleTags[R];i.context.memo("button.style."+H,function(){return i.button({className:"note-btn-style-"+H,contents:'<div data-value="'+H+'">'+H.toUpperCase()+"</div>",tooltip:i.lang.style[H],click:i.context.createInvokeHandler("editor.formatBlock")}).render()})},l=0,d=this.options.styleTags.length;l<d;l++)o(l);this.context.memo("button.bold",function(){return i.button({className:"note-btn-bold",contents:i.ui.icon(i.options.icons.bold),tooltip:i.lang.font.bold+i.representShortcut("bold"),click:i.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return i.button({className:"note-btn-italic",contents:i.ui.icon(i.options.icons.italic),tooltip:i.lang.font.italic+i.representShortcut("italic"),click:i.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return i.button({className:"note-btn-underline",contents:i.ui.icon(i.options.icons.underline),tooltip:i.lang.font.underline+i.representShortcut("underline"),click:i.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return i.button({contents:i.ui.icon(i.options.icons.eraser),tooltip:i.lang.font.clear+i.representShortcut("removeFormat"),click:i.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return i.button({className:"note-btn-strikethrough",contents:i.ui.icon(i.options.icons.strikethrough),tooltip:i.lang.font.strikethrough+i.representShortcut("strikethrough"),click:i.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return i.button({className:"note-btn-superscript",contents:i.ui.icon(i.options.icons.superscript),tooltip:i.lang.font.superscript,click:i.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return i.button({className:"note-btn-subscript",contents:i.ui.icon(i.options.icons.subscript),tooltip:i.lang.font.subscript,click:i.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var R=i.context.invoke("editor.currentStyle");return i.options.addDefaultFonts&&m().each(R["font-family"].split(","),function(W,H){H=H.trim().replace(/['"]+/g,""),i.isFontDeservedToAdd(H)&&i.options.fontNames.indexOf(H)===-1&&i.options.fontNames.push(H)}),i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents('<span class="note-current-fontname"></span>',i.options),tooltip:i.lang.font.name,data:{toggle:"dropdown"}}),i.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:i.options.icons.menuCheck,items:i.options.fontNames.filter(i.isFontInstalled.bind(i)),title:i.lang.font.name,template:function(W){return'<span style="font-family: '+_t.validFontName(W)+'">'+W+"</span>"},click:i.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents('<span class="note-current-fontsize"></span>',i.options),tooltip:i.lang.font.size,data:{toggle:"dropdown"}}),i.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:i.options.icons.menuCheck,items:i.options.fontSizes,title:i.lang.font.size,click:i.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.fontsizeunit",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents('<span class="note-current-fontsizeunit"></span>',i.options),tooltip:i.lang.font.sizeunit,data:{toggle:"dropdown"}}),i.ui.dropdownCheck({className:"dropdown-fontsizeunit",checkClassName:i.options.icons.menuCheck,items:i.options.fontSizeUnits,title:i.lang.font.sizeunit,click:i.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit")})]).render()}),this.context.memo("button.color",function(){return i.colorPalette("note-color-all",i.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return i.colorPalette("note-color-fore",i.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return i.colorPalette("note-color-back",i.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return i.button({contents:i.ui.icon(i.options.icons.unorderedlist),tooltip:i.lang.lists.unordered+i.representShortcut("insertUnorderedList"),click:i.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return i.button({contents:i.ui.icon(i.options.icons.orderedlist),tooltip:i.lang.lists.ordered+i.representShortcut("insertOrderedList"),click:i.context.createInvokeHandler("editor.insertOrderedList")}).render()});var _=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),b=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),w=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),C=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),M=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),D=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",et.invoke(_,"render")),this.context.memo("button.justifyCenter",et.invoke(b,"render")),this.context.memo("button.justifyRight",et.invoke(w,"render")),this.context.memo("button.justifyFull",et.invoke(C,"render")),this.context.memo("button.outdent",et.invoke(M,"render")),this.context.memo("button.indent",et.invoke(D,"render")),this.context.memo("button.paragraph",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents(i.ui.icon(i.options.icons.alignLeft),i.options),tooltip:i.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),i.ui.dropdown([i.ui.buttonGroup({className:"note-align",children:[_,b,w,C]}),i.ui.buttonGroup({className:"note-list",children:[M,D]})])]).render()}),this.context.memo("button.height",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents(i.ui.icon(i.options.icons.textHeight),i.options),tooltip:i.lang.font.height,data:{toggle:"dropdown"}}),i.ui.dropdownCheck({items:i.options.lineHeights,checkClassName:i.options.icons.menuCheck,className:"dropdown-line-height",title:i.lang.font.height,click:i.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return i.ui.buttonGroup([i.button({className:"dropdown-toggle",contents:i.ui.dropdownButtonContents(i.ui.icon(i.options.icons.table),i.options),tooltip:i.lang.table.table,data:{toggle:"dropdown"}}),i.ui.dropdown({title:i.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(R){R.find(".note-dimension-picker-mousecatcher").css({width:i.options.insertTableMaxSize.col+"em",height:i.options.insertTableMaxSize.row+"em"}).mousedown(i.context.createInvokeHandler("editor.insertTable")).on("mousemove",i.tableMoveHandler.bind(i))}}).render()}),this.context.memo("button.link",function(){return i.button({contents:i.ui.icon(i.options.icons.link),tooltip:i.lang.link.link+i.representShortcut("linkDialog.show"),click:i.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return i.button({contents:i.ui.icon(i.options.icons.picture),tooltip:i.lang.image.image,click:i.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return i.button({contents:i.ui.icon(i.options.icons.video),tooltip:i.lang.video.video,click:i.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return i.button({contents:i.ui.icon(i.options.icons.minus),tooltip:i.lang.hr.insert+i.representShortcut("insertHorizontalRule"),click:i.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return i.button({className:"btn-fullscreen note-codeview-keep",contents:i.ui.icon(i.options.icons.arrowsAlt),tooltip:i.lang.options.fullscreen,click:i.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return i.button({className:"btn-codeview note-codeview-keep",contents:i.ui.icon(i.options.icons.code),tooltip:i.lang.options.codeview,click:i.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return i.button({contents:i.ui.icon(i.options.icons.redo),tooltip:i.lang.history.redo+i.representShortcut("redo"),click:i.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return i.button({contents:i.ui.icon(i.options.icons.undo),tooltip:i.lang.history.undo+i.representShortcut("undo"),click:i.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return i.button({contents:i.ui.icon(i.options.icons.question),tooltip:i.lang.options.help,click:i.context.createInvokeHandler("helpDialog.show")}).render()})}},{key:"addImagePopoverButtons",value:function(){var i=this;this.context.memo("button.resizeFull",function(){return i.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:i.lang.image.resizeFull,click:i.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.resizeHalf",function(){return i.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:i.lang.image.resizeHalf,click:i.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.resizeQuarter",function(){return i.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:i.lang.image.resizeQuarter,click:i.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.resizeNone",function(){return i.button({contents:i.ui.icon(i.options.icons.rollback),tooltip:i.lang.image.resizeNone,click:i.context.createInvokeHandler("editor.resize","0")}).render()}),this.context.memo("button.floatLeft",function(){return i.button({contents:i.ui.icon(i.options.icons.floatLeft),tooltip:i.lang.image.floatLeft,click:i.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return i.button({contents:i.ui.icon(i.options.icons.floatRight),tooltip:i.lang.image.floatRight,click:i.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return i.button({contents:i.ui.icon(i.options.icons.rollback),tooltip:i.lang.image.floatNone,click:i.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return i.button({contents:i.ui.icon(i.options.icons.trash),tooltip:i.lang.image.remove,click:i.context.createInvokeHandler("editor.removeMedia")}).render()})}},{key:"addLinkPopoverButtons",value:function(){var i=this;this.context.memo("button.linkDialogShow",function(){return i.button({contents:i.ui.icon(i.options.icons.link),tooltip:i.lang.link.edit,click:i.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return i.button({contents:i.ui.icon(i.options.icons.unlink),tooltip:i.lang.link.unlink,click:i.context.createInvokeHandler("editor.unlink")}).render()})}},{key:"addTablePopoverButtons",value:function(){var i=this;this.context.memo("button.addRowUp",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.rowAbove),tooltip:i.lang.table.addRowAbove,click:i.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.rowBelow),tooltip:i.lang.table.addRowBelow,click:i.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.colBefore),tooltip:i.lang.table.addColLeft,click:i.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.colAfter),tooltip:i.lang.table.addColRight,click:i.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.rowRemove),tooltip:i.lang.table.delRow,click:i.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.colRemove),tooltip:i.lang.table.delCol,click:i.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return i.button({className:"btn-md",contents:i.ui.icon(i.options.icons.trash),tooltip:i.lang.table.delTable,click:i.context.createInvokeHandler("editor.deleteTable")}).render()})}},{key:"build",value:function(i,o){for(var l=0,d=o.length;l<d;l++){for(var _=o[l],b=Array.isArray(_)?_[0]:_,w=Array.isArray(_)?_.length===1?[_[0]]:_[1]:[_],C=this.ui.buttonGroup({className:"note-"+b}).render(),M=0,D=w.length;M<D;M++){var R=this.context.memo("button."+w[M]);R&&C.append(typeof R=="function"?R(this.context):R)}C.appendTo(i)}}},{key:"updateCurrentStyle",value:function(i){var o=i||this.$toolbar,l=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(o,{".note-btn-bold":function(){return l["font-bold"]==="bold"},".note-btn-italic":function(){return l["font-italic"]==="italic"},".note-btn-underline":function(){return l["font-underline"]==="underline"},".note-btn-subscript":function(){return l["font-subscript"]==="subscript"},".note-btn-superscript":function(){return l["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return l["font-strikethrough"]==="strikethrough"}}),l["font-family"]){var d=l["font-family"].split(",").map(function(M){return M.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),_=B.find(d,this.isFontInstalled.bind(this));o.find(".dropdown-fontname a").each(function(M,D){var R=m()(D),W=R.data("value")+""==_+"";R.toggleClass("checked",W)}),o.find(".note-current-fontname").text(_).css("font-family",_)}if(l["font-size"]){var b=l["font-size"];o.find(".dropdown-fontsize a").each(function(M,D){var R=m()(D),W=R.data("value")+""==b+"";R.toggleClass("checked",W)}),o.find(".note-current-fontsize").text(b);var w=l["font-size-unit"];o.find(".dropdown-fontsizeunit a").each(function(M,D){var R=m()(D),W=R.data("value")+""==w+"";R.toggleClass("checked",W)}),o.find(".note-current-fontsizeunit").text(w)}if(l["line-height"]){var C=l["line-height"];o.find(".dropdown-line-height a").each(function(M,D){var R=m()(D),W=m()(D).data("value")+""==C+"";R.toggleClass("checked",W)}),o.find(".note-current-line-height").text(C)}}},{key:"updateBtnStates",value:function(i,o){var l=this;m().each(o,function(d,_){l.ui.toggleBtnActive(i.find(d),_())})}},{key:"tableMoveHandler",value:function(i){var o,l=m()(i.target.parentNode),d=l.next(),_=l.find(".note-dimension-picker-mousecatcher"),b=l.find(".note-dimension-picker-highlighted"),w=l.find(".note-dimension-picker-unhighlighted");if(i.offsetX===void 0){var C=m()(i.target).offset();o={x:i.pageX-C.left,y:i.pageY-C.top}}else o={x:i.offsetX,y:i.offsetY};var M=Math.ceil(o.x/18)||1,D=Math.ceil(o.y/18)||1;b.css({width:M+"em",height:D+"em"}),_.data("value",M+"x"+D),M>3&&M<this.options.insertTableMaxSize.col&&w.css({width:M+1+"em"}),D>3&&D<this.options.insertTableMaxSize.row&&w.css({height:D+1+"em"}),d.html(M+" x "+D)}}],f&&Oe(h.prototype,f),s}();function vt(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var ti=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.$window=m()(window),this.$document=m()(document),this.ui=m().summernote.ui,this.$note=i.layoutInfo.note,this.$editor=i.layoutInfo.editor,this.$toolbar=i.layoutInfo.toolbar,this.$editable=i.layoutInfo.editable,this.$statusbar=i.layoutInfo.statusbar,this.options=i.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return!this.options.airMode}},{key:"initialize",value:function(){var i=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){i.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)}},{key:"destroy",value:function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)}},{key:"followScroll",value:function(){if(this.$editor.hasClass("fullscreen"))return!1;var i=this.$editor.outerHeight(),o=this.$editor.width(),l=this.$toolbar.height(),d=this.$statusbar.height(),_=0;this.options.otherStaticBar&&(_=m()(this.options.otherStaticBar).outerHeight());var b=this.$document.scrollTop(),w=this.$editor.offset().top,C=w-_,M=w+i-_-l-d;!this.isFollowing&&b>C&&b<M-l?(this.isFollowing=!0,this.$editable.css({marginTop:this.$toolbar.outerHeight()}),this.$toolbar.css({position:"fixed",top:_,width:o,zIndex:1e3})):this.isFollowing&&(b<C||b>M)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%",zIndex:"auto"}),this.$editable.css({marginTop:""}))}},{key:"changeContainer",value:function(i){i?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.options.followingToolbar&&this.followScroll()}},{key:"updateFullscreen",value:function(i){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),i),this.changeContainer(i)}},{key:"updateCodeview",value:function(i){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),i),i?this.deactivate():this.activate()}},{key:"activate",value:function(i){var o=this.$toolbar.find("button");i||(o=o.not(".note-codeview-keep")),this.ui.toggleBtn(o,!0)}},{key:"deactivate",value:function(i){var o=this.$toolbar.find("button");i||(o=o.not(".note-codeview-keep")),this.ui.toggleBtn(o,!1)}}])&&vt(h.prototype,f),s}();function Se(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Ce=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.$body=m()(document.body),this.$editor=i.layoutInfo.editor,this.options=i.options,this.lang=this.options.langInfo,i.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}var h,f;return h=s,(f=[{key:"initialize",value:function(){var i=this.options.dialogsInBody?this.$body:this.options.container,o=['<div class="form-group note-form-group">','<label for="note-dialog-link-txt-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.link.textToDisplay,"</label>"),'<input id="note-dialog-link-txt-'.concat(this.options.id,'" class="note-link-text form-control note-form-control note-input" type="text"/>'),"</div>",'<div class="form-group note-form-group">','<label for="note-dialog-link-url-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.link.url,"</label>"),'<input id="note-dialog-link-url-'.concat(this.options.id,'" class="note-link-url form-control note-form-control note-input" type="text" value="http://"/>'),"</div>",this.options.disableLinkTarget?"":m()("<div></div>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html(),m()("<div></div>").append(this.ui.checkbox({className:"sn-checkbox-use-protocol",text:this.lang.link.useProtocol,checked:!0}).render()).html()].join(""),l='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-link-btn",'" value="').concat(this.lang.link.insert,'" disabled>');this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:o,footer:l}).render().appendTo(i)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(i,o){i.on("keypress",function(l){l.keyCode===at.code.ENTER&&(l.preventDefault(),o.trigger("click"))})}},{key:"toggleLinkBtn",value:function(i,o,l){this.ui.toggleBtn(i,o.val()&&l.val())}},{key:"showLinkDialog",value:function(i){var o=this;return m().Deferred(function(l){var d=o.$dialog.find(".note-link-text"),_=o.$dialog.find(".note-link-url"),b=o.$dialog.find(".note-link-btn"),w=o.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]"),C=o.$dialog.find(".sn-checkbox-use-protocol input[type=checkbox]");o.ui.onDialogShown(o.$dialog,function(){o.context.triggerEvent("dialog.shown"),!i.url&&et.isValidUrl(i.text)&&(i.url=i.text),d.on("input paste propertychange",function(){i.text=d.val(),o.toggleLinkBtn(b,d,_)}).val(i.text),_.on("input paste propertychange",function(){i.text||d.val(_.val()),o.toggleLinkBtn(b,d,_)}).val(i.url),_t.isSupportTouch||_.trigger("focus"),o.toggleLinkBtn(b,d,_),o.bindEnterKey(_,b),o.bindEnterKey(d,b);var M=i.isNewWindow!==void 0?i.isNewWindow:o.context.options.linkTargetBlank;w.prop("checked",M);var D=!i.url&&o.context.options.useProtocol;C.prop("checked",D),b.one("click",function(R){R.preventDefault(),l.resolve({range:i.range,url:_.val(),text:d.val(),isNewWindow:w.is(":checked"),checkProtocol:C.is(":checked")}),o.ui.hideDialog(o.$dialog)})}),o.ui.onDialogHidden(o.$dialog,function(){d.off(),_.off(),b.off(),l.state()==="pending"&&l.reject()}),o.ui.showDialog(o.$dialog)}).promise()}},{key:"show",value:function(){var i=this,o=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(o).then(function(l){i.context.invoke("editor.restoreRange"),i.context.invoke("editor.createLink",l)}).fail(function(){i.context.invoke("editor.restoreRange")})}}])&&Se(h.prototype,f),s}();function Li(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var tt=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.options=i.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){o.update()},"summernote.disable summernote.dialog.shown":function(){o.hide()},"summernote.blur":function(l,d){d.originalEvent&&d.originalEvent.relatedTarget&&o.$popover[0].contains(d.originalEvent.relatedTarget)||o.hide()}}}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return!B.isEmpty(this.options.popover.link)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(o){o.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var i=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",i,this.options.popover.link),this.$popover.on("mousedown",function(o){o.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(){if(this.context.invoke("editor.hasFocus")){var i=this.context.invoke("editor.getLastRange");if(i.isCollapsed()&&i.isOnAnchor()){var o=y.ancestor(i.sc,y.isAnchor),l=m()(o).attr("href");this.$popover.find("a").attr("href",l).text(l);var d=y.posFromPlaceholder(o),_=m()(this.options.container).offset();d.top-=_.top,d.left-=_.left,this.$popover.css({display:"block",left:d.left,top:d.top})}else this.hide()}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}])&&Li(h.prototype,f),s}();function yt(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Ti=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.$body=m()(document.body),this.$editor=i.layoutInfo.editor,this.options=i.options,this.lang=this.options.langInfo}var h,f;return h=s,(f=[{key:"initialize",value:function(){var i="";if(this.options.maximumImageFileSize){var o=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),l=1*(this.options.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";i="<small>".concat(this.lang.image.maximumFileSize+" : "+l,"</small>")}var d=this.options.dialogsInBody?this.$body:this.options.container,_=['<div class="form-group note-form-group note-group-select-from-files">','<label for="note-dialog-image-file-'+this.options.id+'" class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input id="note-dialog-image-file-'+this.options.id+'" class="note-image-input form-control-file note-form-control note-input" ',' type="file" name="files" accept="'+this.options.acceptImageFileTypes+'" multiple="multiple"/>',i,"</div>",'<div class="form-group note-group-image-url">','<label for="note-dialog-image-url-'+this.options.id+'" class="note-form-label">'+this.lang.image.url+"</label>",'<input id="note-dialog-image-url-'+this.options.id+'" class="note-image-url form-control note-form-control note-input" type="text"/>',"</div>"].join(""),b='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-image-btn",'" value="').concat(this.lang.image.insert,'" disabled>');this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:_,footer:b}).render().appendTo(d)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(i,o){i.on("keypress",function(l){l.keyCode===at.code.ENTER&&(l.preventDefault(),o.trigger("click"))})}},{key:"show",value:function(){var i=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(o){i.ui.hideDialog(i.$dialog),i.context.invoke("editor.restoreRange"),typeof o=="string"?i.options.callbacks.onImageLinkInsert?i.context.triggerEvent("image.link.insert",o):i.context.invoke("editor.insertImage",o):i.context.invoke("editor.insertImagesOrCallback",o)}).fail(function(){i.context.invoke("editor.restoreRange")})}},{key:"showImageDialog",value:function(){var i=this;return m().Deferred(function(o){var l=i.$dialog.find(".note-image-input"),d=i.$dialog.find(".note-image-url"),_=i.$dialog.find(".note-image-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),l.replaceWith(l.clone().on("change",function(b){o.resolve(b.target.files||b.target.value)}).val("")),d.on("input paste propertychange",function(){i.ui.toggleBtn(_,d.val())}).val(""),_t.isSupportTouch||d.trigger("focus"),_.click(function(b){b.preventDefault(),o.resolve(d.val())}),i.bindEnterKey(d,_)}),i.ui.onDialogHidden(i.$dialog,function(){l.off(),d.off(),_.off(),o.state()==="pending"&&o.reject()}),i.ui.showDialog(i.$dialog)})}}])&&yt(h.prototype,f),s}();function ei(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Zt=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.editable=i.layoutInfo.editable[0],this.options=i.options,this.events={"summernote.disable summernote.dialog.shown":function(){o.hide()},"summernote.blur":function(l,d){d.originalEvent&&d.originalEvent.relatedTarget&&o.$popover[0].contains(d.originalEvent.relatedTarget)||o.hide()}}}var h,f;return h=s,f=[{key:"shouldInitialize",value:function(){return!B.isEmpty(this.options.popover.image)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var i=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",i,this.options.popover.image),this.$popover.on("mousedown",function(o){o.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(i,o){if(y.isImg(i)){var l=m()(i).offset(),d=m()(this.options.container).offset(),_={};this.options.popatmouse?(_.left=o.pageX-20,_.top=o.pageY):_=l,_.top-=d.top,_.left-=d.left,this.$popover.css({display:"block",left:_.left,top:_.top})}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}],f&&ei(h.prototype,f),s}();function Xn(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var ii=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.options=i.options,this.events={"summernote.mousedown":function(l,d){o.update(d.target)},"summernote.keyup summernote.scroll summernote.change":function(){o.update()},"summernote.disable summernote.dialog.shown":function(){o.hide()},"summernote.blur":function(l,d){d.originalEvent&&d.originalEvent.relatedTarget&&o.$popover[0].contains(d.originalEvent.relatedTarget)||o.hide()}}}var h,f;return h=s,f=[{key:"shouldInitialize",value:function(){return!B.isEmpty(this.options.popover.table)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var i=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",i,this.options.popover.table),_t.isFF&&document.execCommand("enableInlineTableEditing",!1,!1),this.$popover.on("mousedown",function(o){o.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(i){if(this.context.isDisabled())return!1;var o=y.isCell(i)||y.isCell(i==null?void 0:i.parentElement);if(o){var l=y.posFromPlaceholder(i),d=m()(this.options.container).offset();l.top-=d.top,l.left-=d.left,this.$popover.css({display:"block",left:l.left,top:l.top})}else this.hide();return o}},{key:"hide",value:function(){this.$popover.hide()}}],f&&Xn(h.prototype,f),s}();function re(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var kt=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.$body=m()(document.body),this.$editor=i.layoutInfo.editor,this.options=i.options,this.lang=this.options.langInfo}var h,f;return h=s,(f=[{key:"initialize",value:function(){var i=this.options.dialogsInBody?this.$body:this.options.container,o=['<div class="form-group note-form-group row-fluid">','<label for="note-dialog-video-url-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.video.url,' <small class="text-muted">').concat(this.lang.video.providers,"</small></label>"),'<input id="note-dialog-video-url-'.concat(this.options.id,'" class="note-video-url form-control note-form-control note-input" type="text"/>'),"</div>"].join(""),l='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-video-btn",'" value="').concat(this.lang.video.insert,'" disabled>');this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:o,footer:l}).render().appendTo(i)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(i,o){i.on("keypress",function(l){l.keyCode===at.code.ENTER&&(l.preventDefault(),o.trigger("click"))})}},{key:"createVideoNode",value:function(i){var o,l=i.match(/\/\/(?:(?:www|m)\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),d=i.match(/(?:\.|\/\/)drive\.google\.com\/file\/d\/(.[a-zA-Z0-9_-]*)\/view/),_=i.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),b=i.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),w=i.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),C=i.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),M=i.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),D=i.match(/\/\/(.*)\/videos\/watch\/([^?]*)(?:\?(?:start=(\w*))?(?:&stop=(\w*))?(?:&loop=([10]))?(?:&autoplay=([10]))?(?:&muted=([10]))?)?/),R=i.match(/\/\/v\.qq\.com.*?vid=(.+)/),W=i.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),H=i.match(/^.+.(mp4|m4v)$/),j=i.match(/^.+.(ogg|ogv)$/),X=i.match(/^.+.(webm)$/),ht=i.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(l&&l[1].length===11){var gt=l[1],xt=0;if(l[2]!==void 0){var Ht=l[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(Ht)for(var bt=[3600,60,1],Et=0,Ve=bt.length;Et<Ve;Et++)xt+=Ht[Et+1]!==void 0?bt[Et]*parseInt(Ht[Et+1],10):0}o=m()("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+gt+(xt>0?"?start="+xt:"")).attr("width","640").attr("height","360")}else if(d&&d[0].length)o=m()("<iframe>").attr("frameborder",0).attr("src","https://drive.google.com/file/d/"+d[1]+"/preview").attr("width","640").attr("height","480");else if(_&&_[0].length)o=m()("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+_[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(b&&b[0].length)o=m()("<iframe>").attr("frameborder",0).attr("src",b[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(w&&w[3].length)o=m()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+w[3]).attr("width","640").attr("height","360");else if(C&&C[2].length)o=m()("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+C[2]).attr("width","640").attr("height","360");else if(M&&M[1].length)o=m()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+M[1]);else if(D&&D[0].length){var he=0;D[2]!=="undefined"&&(he=D[2]);var Ue=0;D[3]!=="undefined"&&(Ue=D[3]);var ai=0;D[4]!=="undefined"&&(ai=D[4]);var fn=0;D[5]!=="undefined"&&(fn=D[5]);var Oi=0;D[6]!=="undefined"&&(Oi=D[6]),o=m()('<iframe allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups">').attr("frameborder",0).attr("src","//"+D[1]+"/videos/embed/"+D[2]+"?loop="+ai+"&autoplay="+fn+"&muted="+Oi+(he>0?"&start="+he:"")+(Ue>0?"&end="+xt:"")).attr("width","560").attr("height","315")}else if(R&&R[1].length||W&&W[2].length){var pn=R&&R[1].length?R[1]:W[2];o=m()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","https://v.qq.com/txp/iframe/player.html?vid="+pn+"&amp;auto=0")}else if(H||j||X)o=m()("<video controls>").attr("src",i).attr("width","640").attr("height","360");else{if(!ht||!ht[0].length)return!1;o=m()("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(ht[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true")}return o.addClass("note-video-clip"),o[0]}},{key:"show",value:function(){var i=this,o=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(o).then(function(l){i.ui.hideDialog(i.$dialog),i.context.invoke("editor.restoreRange");var d=i.createVideoNode(l);d&&i.context.invoke("editor.insertNode",d)}).fail(function(){i.context.invoke("editor.restoreRange")})}},{key:"showVideoDialog",value:function(){var i=this;return m().Deferred(function(o){var l=i.$dialog.find(".note-video-url"),d=i.$dialog.find(".note-video-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),l.on("input paste propertychange",function(){i.ui.toggleBtn(d,l.val())}),_t.isSupportTouch||l.trigger("focus"),d.click(function(_){_.preventDefault(),o.resolve(l.val())}),i.bindEnterKey(l,d)}),i.ui.onDialogHidden(i.$dialog,function(){l.off(),d.off(),o.state()==="pending"&&o.reject()}),i.ui.showDialog(i.$dialog)})}}])&&re(h.prototype,f),s}();function ae(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Be=function(){function s(i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.$body=m()(document.body),this.$editor=i.layoutInfo.editor,this.options=i.options,this.lang=this.options.langInfo}var h,f;return h=s,f=[{key:"initialize",value:function(){var i=this.options.dialogsInBody?this.$body:this.options.container,o=['<p class="text-center">','<a href="http://summernote.org/" target="_blank" rel="noopener noreferrer">Summernote 0.8.19</a> \xB7 ','<a href="https://github.com/summernote/summernote" target="_blank" rel="noopener noreferrer">Project</a> \xB7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank" rel="noopener noreferrer">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:o,callback:function(l){l.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(i)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"createShortcutList",value:function(){var i=this,o=this.options.keyMap[_t.isMac?"mac":"pc"];return Object.keys(o).map(function(l){var d=o[l],_=m()('<div><div class="help-list-item"></div></div>');return _.append(m()("<label><kbd>"+l+"</kdb></label>").css({width:180,"margin-right":10})).append(m()("<span></span>").html(i.context.memo("help."+d)||d)),_.html()}).join("")}},{key:"showHelpDialog",value:function(){var i=this;return m().Deferred(function(o){i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),o.resolve()}),i.ui.showDialog(i.$dialog)}).promise()}},{key:"show",value:function(){var i=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){i.context.invoke("editor.restoreRange")})}}],f&&ae(h.prototype,f),s}();function Re(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Pi=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.options=i.options,this.hidable=!0,this.onContextmenu=!1,this.pageX=null,this.pageY=null,this.events={"summernote.contextmenu":function(l){o.options.editing&&(l.preventDefault(),l.stopPropagation(),o.onContextmenu=!0,o.update(!0))},"summernote.mousedown":function(l,d){o.pageX=event.pageX,o.pageY=event.pageY},"summernote.keyup summernote.mouseup summernote.scroll":function(l,d){if(o.options.editing&&!o.onContextmenu){if(d.type=="keyup"){var _=o.context.invoke("editor.getLastRange").getWordRange(),b=et.rect2bnd(B.last(_.getClientRects()));o.pageX=b.left,o.pageY=b.top}else o.pageX=d.pageX,o.pageY=d.pageY;o.update()}o.onContextmenu=!1},"summernote.disable summernote.change summernote.dialog.shown summernote.blur":function(){o.hide()},"summernote.focusout":function(){o.$popover.is(":active,:focus")||o.hide()}}}var h,f;return h=s,(f=[{key:"shouldInitialize",value:function(){return this.options.airMode&&!B.isEmpty(this.options.popover.air)}},{key:"initialize",value:function(){var i=this;this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var o=this.$popover.find(".popover-content");this.context.invoke("buttons.build",o,this.options.popover.air),this.$popover.on("mousedown",function(){i.hidable=!1}),this.$popover.on("mouseup",function(){i.hidable=!0})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(i){var o=this.context.invoke("editor.currentStyle");if(!o.range||o.range.isCollapsed()&&!i)this.hide();else{var l={left:this.pageX,top:this.pageY},d=m()(this.options.container).offset();l.top-=d.top,l.left-=d.left,this.$popover.css({display:"block",left:Math.max(l.left,0)+-5,top:l.top+5}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}},{key:"updateCodeview",value:function(i){this.ui.toggleBtnActive(this.$popover.find(".btn-codeview"),i),i&&this.hide()}},{key:"hide",value:function(){this.hidable&&this.$popover.hide()}}])&&Re(h.prototype,f),s}();function He(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}var Ei=function(){function s(i){var o=this;(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.context=i,this.ui=m().summernote.ui,this.$editable=i.layoutInfo.editable,this.options=i.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(l,d){d.isDefaultPrevented()||o.handleKeyup(d)},"summernote.keydown":function(l,d){o.handleKeydown(d)},"summernote.disable summernote.dialog.shown summernote.blur":function(){o.hide()}}}var h,f;return h=s,f=[{key:"shouldInitialize",value:function(){return this.hints.length>0}},{key:"initialize",value:function(){var i=this;this.lastWordRange=null,this.matchingWord=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(o){i.$content.find(".active").removeClass("active"),m()(o.currentTarget).addClass("active"),i.replace()}),this.$popover.on("mousedown",function(o){o.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"selectItem",value:function(i){this.$content.find(".active").removeClass("active"),i.addClass("active"),this.$content[0].scrollTop=i[0].offsetTop-this.$content.innerHeight()/2}},{key:"moveDown",value:function(){var i=this.$content.find(".note-hint-item.active"),o=i.next();if(o.length)this.selectItem(o);else{var l=i.parent().next();l.length||(l=this.$content.find(".note-hint-group").first()),this.selectItem(l.find(".note-hint-item").first())}}},{key:"moveUp",value:function(){var i=this.$content.find(".note-hint-item.active"),o=i.prev();if(o.length)this.selectItem(o);else{var l=i.parent().prev();l.length||(l=this.$content.find(".note-hint-group").last()),this.selectItem(l.find(".note-hint-item").last())}}},{key:"replace",value:function(){var i=this.$content.find(".note-hint-item.active");if(i.length){var o=this.nodeFromItem(i);if(this.matchingWord!==null&&this.matchingWord.length===0)this.lastWordRange.so=this.lastWordRange.eo;else if(this.matchingWord!==null&&this.matchingWord.length>0&&!this.lastWordRange.isCollapsed()){var l=this.lastWordRange.eo-this.lastWordRange.so-this.matchingWord.length;l>0&&(this.lastWordRange.so+=l)}if(this.lastWordRange.insertNode(o),this.options.hintSelect==="next"){var d=document.createTextNode("");m()(o).after(d),st.createFromNodeBefore(d).select()}else st.createFromNodeAfter(o).select();this.lastWordRange=null,this.hide(),this.context.invoke("editor.focus"),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}}},{key:"nodeFromItem",value:function(i){var o=this.hints[i.data("index")],l=i.data("item"),d=o.content?o.content(l):l;return typeof d=="string"&&(d=y.createText(d)),d}},{key:"createItemTemplates",value:function(i,o){var l=this.hints[i];return o.map(function(d,_){var b=m()('<div class="note-hint-item"></div>');return b.append(l.template?l.template(d):d+""),b.data({index:i,item:d}),i===0&&_===0&&b.addClass("active"),b})}},{key:"handleKeydown",value:function(i){this.$popover.is(":visible")&&(i.keyCode===at.code.ENTER?(i.preventDefault(),this.replace()):i.keyCode===at.code.UP?(i.preventDefault(),this.moveUp()):i.keyCode===at.code.DOWN&&(i.preventDefault(),this.moveDown()))}},{key:"searchKeyword",value:function(i,o,l){var d=this.hints[i];if(d&&d.match.test(o)&&d.search){var _=d.match.exec(o);this.matchingWord=_[0],d.search(_[1],l)}else l()}},{key:"createGroup",value:function(i,o){var l=this,d=m()('<div class="note-hint-group note-hint-group-'+i+'"></div>');return this.searchKeyword(i,o,function(_){(_=_||[]).length&&(d.html(l.createItemTemplates(i,_)),l.show())}),d}},{key:"handleKeyup",value:function(i){var o=this;if(!B.contains([at.code.ENTER,at.code.UP,at.code.DOWN],i.keyCode)){var l,d,_=this.context.invoke("editor.getLastRange");if(this.options.hintMode==="words"){if(l=_.getWordsRange(_),d=l.toString(),this.hints.forEach(function(C){if(C.match.test(d))return l=_.getWordsMatchRange(C.match),!1}),!l)return void this.hide();d=l.toString()}else l=_.getWordRange(),d=l.toString();if(this.hints.length&&d){this.$content.empty();var b=et.rect2bnd(B.last(l.getClientRects())),w=m()(this.options.container).offset();b&&(b.top-=w.top,b.left-=w.left,this.$popover.hide(),this.lastWordRange=l,this.hints.forEach(function(C,M){C.match.test(d)&&o.createGroup(M,d).appendTo(o.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),this.direction==="top"?this.$popover.css({left:b.left,top:b.top-this.$popover.outerHeight()-5}):this.$popover.css({left:b.left,top:b.top+b.height+5}))}else this.hide()}}},{key:"show",value:function(){this.$popover.show()}},{key:"hide",value:function(){this.$popover.hide()}}],f&&He(h.prototype,f),s}();function $e(s){return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},$e(s)}function ni(s,h){for(var f=0;f<h.length;f++){var i=h[f];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}m().summernote=m().extend(m().summernote,{version:"0.8.19",plugins:{},dom:y,range:st,lists:B,options:{langInfo:m().summernote.lang["en-US"],editing:!0,modules:{editor:on,clipboard:rn,dropzone:Si,codeview:Zn,statusbar:Un,fullscreen:hn,handle:Qe,hintPopover:Ei,autoLink:Gn,autoSync:Jn,autoReplace:Ne,placeholder:dn,buttons:nt,toolbar:ti,linkDialog:Ce,linkPopover:tt,imageDialog:Ti,imagePopover:Zt,tablePopover:ii,videoDialog:kt,helpDialog:Be,airPopover:Pi},buttons:{},lang:"en-US",followingToolbar:!1,toolbarPosition:"top",otherStaticBar:"",codeviewKeepButton:!1,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]]]},linkAddNoReferrer:!1,addLinkNoOpener:!1,airMode:!1,overrideContextMenu:!1,width:null,height:null,linkTargetBlank:!0,useProtocol:!0,defaultProtocol:"http://",focus:!1,tabDisable:!1,tabSize:4,styleWithCSS:!1,shortcuts:!0,textareaAutoSync:!0,tooltip:"auto",container:null,maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,disableGrammar:!1,placeholder:null,inheritPlaceholder:!1,recordEveryKeystroke:!1,historyLimit:200,showDomainOnlyForAutolink:!1,hintMode:"word",hintSelect:"after",hintDirection:"bottom",styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],addDefaultFonts:!0,fontSizes:["8","9","10","11","12","14","18","24","36"],fontSizeUnits:["px","pt"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,acceptImageFileTypes:"image/*",callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!0,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","jumpingbean.tv","v.qq.com"],keyMap:{pc:{ESC:"escape",ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ESC:"escape",ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}});var Mi=function(){function s(i,o,l,d){(function(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")})(this,s),this.markup=i,this.children=o,this.options=l,this.callback=d}var h,f;return h=s,(f=[{key:"render",value:function(i){var o=m()(this.markup);if(this.options&&this.options.contents&&o.html(this.options.contents),this.options&&this.options.className&&o.addClass(this.options.className),this.options&&this.options.data&&m().each(this.options.data,function(d,_){o.attr("data-"+d,_)}),this.options&&this.options.click&&o.on("click",this.options.click),this.children){var l=o.find(".note-children-container");this.children.forEach(function(d){d.render(l.length?l:o)})}return this.callback&&this.callback(o,this.options),this.options&&this.options.callback&&this.options.callback(o),i&&i.append(o),o}}])&&ni(h.prototype,f),s}();const Pt=function(s,h){return function(){var f=$e(arguments[1])==="object"?arguments[1]:arguments[0],i=Array.isArray(arguments[0])?arguments[0]:[];return f&&f.children&&(i=f.children),new Mi(s,i,f,h)}};function Le(s){return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},Le(s)}var oi=Pt('<div class="note-editor note-frame card"/>'),Fe=Pt('<div class="note-toolbar card-header" role="toolbar"/>'),si=Pt('<div class="note-editing-area"/>'),Y=Pt('<textarea class="note-codable" aria-multiline="true"/>'),Vt=Pt('<div class="note-editable card-block" contentEditable="true" role="textbox" aria-multiline="true"/>'),lt=Pt(['<output class="note-status-output" role="status" aria-live="polite"></output>','<div class="note-statusbar" role="status">','<div class="note-resizebar" aria-label="Resize">','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>',"</div>","</div>"].join("")),Ai=Pt('<div class="note-editor note-airframe"/>'),ri=Pt(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>','<output class="note-status-output" role="status" aria-live="polite"></output>'].join("")),Di=Pt('<div class="note-btn-group btn-group">'),Ii=Pt('<div class="note-dropdown-menu dropdown-menu" role="list">',function(s,h){var f=Array.isArray(h.items)?h.items.map(function(i){var o=typeof i=="string"?i:i.value||"",l=h.template?h.template(i):i,d=Le(i)==="object"?i.option:void 0;return'<a class="dropdown-item" href="#" '+('data-value="'+o+'"'+(d!==void 0?' data-option="'+d+'"':""))+' role="listitem" aria-label="'+o+'">'+l+"</a>"}).join(""):h.items;s.html(f).attr({"aria-label":h.title}),h&&h.codeviewKeepButton&&s.addClass("note-codeview-keep")}),le=function(s){return s},zi=Pt('<div class="note-dropdown-menu dropdown-menu note-check" role="list">',function(s,h){var f=Array.isArray(h.items)?h.items.map(function(i){var o=typeof i=="string"?i:i.value||"",l=h.template?h.template(i):i;return'<a class="dropdown-item" href="#" data-value="'+o+'" role="listitem" aria-label="'+i+'">'+Ni(h.checkClassName)+" "+l+"</a>"}).join(""):h.items;s.html(f).attr({"aria-label":h.title}),h&&h.codeviewKeepButton&&s.addClass("note-codeview-keep")}),Ze=Pt('<div class="modal note-modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(s,h){h.fade&&s.addClass("fade"),s.attr({"aria-label":h.title}),s.html(['<div class="modal-dialog">','<div class="modal-content">',h.title?'<div class="modal-header"><h4 class="modal-title">'+h.title+'</h4><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" aria-hidden="true"></button></div>':"",'<div class="modal-body">'+h.body+"</div>",h.footer?'<div class="modal-footer">'+h.footer+"</div>":"","</div>","</div>"].join(""))}),Dt=Pt(['<div class="note-popover popover bs-popover-auto show">','<div class="popover-arrow"></div>','<div class="popover-body note-popover-content note-children-container"></div>',"</div>"].join(""),function(s,h){var f=h.direction!==void 0?h.direction:"bottom";s.attr("data-popper-placement",f),h.hideArrow&&s.find(".popover-arrow").hide()}),ce=Pt('<div class="form-check"></div>',function(s,h){s.html(['<label class="form-check-label"'+(h.id?' for="note-'+h.id+'"':"")+">",'<input type="checkbox" class="form-check-input"'+(h.id?' id="note-'+h.id+'"':""),h.checked?" checked":"",' aria-label="'+(h.text?h.text:"")+'"',' aria-checked="'+(h.checked?"true":"false")+'"/>'," "+(h.text?h.text:"")+"</label>"].join(""))}),Ni=function(s,h){return s.match(/^</)?s:"<"+(h=h||"i")+' class="'+s+'"></'+h+">"};m().summernote=m().extend(m().summernote,{ui_template:function(s){return{editor:oi,toolbar:Fe,editingArea:si,codable:Y,editable:Vt,statusbar:lt,airEditor:Ai,airEditable:ri,buttonGroup:Di,dropdown:Ii,dropdownButtonContents:le,dropdownCheck:zi,dialog:Ze,popover:Dt,icon:Ni,checkbox:ce,options:s,palette:function(h,f){return Pt('<div class="note-color-palette"/>',function(i,o){for(var l=[],d=0,_=o.colors.length;d<_;d++){for(var b=o.eventName,w=o.colors[d],C=o.colorsName[d],M=[],D=0,R=w.length;D<R;D++){var W=w[D],H=C[D];M.push(['<button type="button" class="note-color-btn"','style="background-color:',W,'" ','data-event="',b,'" ','data-value="',W,'" ','title="',H,'" ','aria-label="',H,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}l.push('<div class="note-color-row">'+M.join("")+"</div>")}i.html(l.join("")),o.tooltip&&i.find(".note-color-btn").tooltip({container:o.container||s.container,trigger:"hover",placement:"bottom"})})(h,f)},button:function(h,f){return Pt('<button type="button" class="note-btn btn btn-outline-secondary btn-sm" tabindex="-1">',function(i,o){o&&o.data&&o.data.toggle==="dropdown"?(i.removeAttr("data-toggle"),i.attr("data-bs-toggle","dropdown"),o&&o.tooltip&&i.attr({title:o.tooltip,"aria-label":o.tooltip})):o&&o.tooltip&&i.attr({title:o.tooltip,"aria-label":o.tooltip}).tooltip({container:o.container||s.container,trigger:"hover",placement:"bottom"}).on("click",function(l){m()(l.currentTarget).tooltip("hide")}),o&&o.codeviewButton&&i.addClass("note-codeview-keep")})(h,f)},toggleBtn:function(h,f){h.toggleClass("disabled",!f),h.attr("disabled",!f)},toggleBtnActive:function(h,f){h.toggleClass("active",f)},onDialogShown:function(h,f){h.one("shown.bs.modal",f)},onDialogHidden:function(h,f){h.one("hidden.bs.modal",f)},showDialog:function(h){h.modal("show")},hideDialog:function(h){h.modal("hide")},createLayout:function(h){var f=(s.airMode?Ai([si([Y(),ri()])]):s.toolbarPosition==="bottom"?oi([si([Y(),Vt()]),Fe(),lt()]):oi([Fe(),si([Y(),Vt()]),lt()])).render();return f.insertAfter(h),{note:h,editor:f,toolbar:f.find(".note-toolbar"),editingArea:f.find(".note-editing-area"),editable:f.find(".note-editable"),codable:f.find(".note-codable"),statusbar:f.find(".note-statusbar")}},removeLayout:function(h,f){h.html(f.editable.html()),f.editor.remove(),h.show()}}},interface:"bs5"}),m().summernote.options.styleTags=["p",{title:"Blockquote",tag:"blockquote",className:"blockquote",value:"blockquote"},"pre","h1","h2","h3","h4","h5","h6"]})(),g})()});const wr={class:"mt-5 rounded"},kr={class:"row"},xr={class:"col-8"},Sr={class:"col text-truncate"},Cr={key:0,class:"fas fa-calendar"},Lr={key:1},Tr={key:2,class:"fas fa-location-dot"},Pr={key:0,class:"col text-truncate"},Er={key:1,class:"col text-truncate"},Mr={class:"col-4"},Ar={class:"float-end h-100"},Dr=ft("i",{class:"fas fa-eye"},null,-1),Ir=[Dr],zr=ft("i",{class:"fas fa-trash-can"},null,-1),Nr=[zr],Or=ft("div",{id:"preview-box",class:"mt-2 border rounded d-none"},null,-1),Br={methods:{preview(){var P=this.$el.querySelector("#preview-box");if(P.classList.contains("d-none")){var a=JSON.parse(this.content);a.forEach(u=>{var v=document.createElement("p");v.classList.add("ms-2"),v.classList.add("me-2"),v.classList.add("mt-2"),v.innerHTML=u,P.appendChild(v)}),$(P).removeClass("d-none")}else $(P).addClass("d-none"),P.innerHTML=""},remove(){var P=this.$el.querySelector("#btn-delete");P.classList.contains("pending")?(P.classList.add("disabled"),P.classList.add("btn-list-item-action"),P.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',Mn.delete(An+"/v1/articles/"+this.id,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("polifemo_access_token")}}).then(()=>{this.emitter.emit("article-deleted",this.id)}).catch(a=>{loggers.mainLogger.error("articoli","Error while deleting article"),loggers.mainLogger.error("articoli",a),showToast("Errore nell'eliminazione dell'articolo: "+a.response.data.error,"error")})):(P.classList.add("pending"),P.classList.remove("btn-list-item-action"),P.innerHTML="Sicuro?")}}},Rr=Object.assign(Br,{__name:"ArticleListItem",props:{id:{type:Number,required:!0},title:{type:String,required:!0},subtitle:{type:String,required:!1},targettime:{type:String,required:!1},location:{type:Boolean,required:!1},content:{type:String,required:!0}},setup(P){return Uo.add(Wo,Bs,Rs,Hs),(a,u)=>(ie(),me("div",wr,[ft("div",kr,[ft("div",xr,[ft("h5",Sr,[P.targettime!=null?(ie(),me("i",Cr)):En("",!0),P.targettime!=null&&P.location?(ie(),me("span",Lr,"\xA0")):En("",!0),P.location?(ie(),me("i",Tr)):En("",!0),$s(" "+Ro(P.title),1)]),P.subtitle!=null?(ie(),me("div",Pr,Ro(P.subtitle),1)):(ie(),me("div",Er,"Nessun sottotitolo"))]),ft("div",Mr,[ft("div",Ar,[ft("button",{type:"button",id:"btn-preview",onClick:u[0]||(u[0]=(...v)=>a.preview&&a.preview(...v)),class:"btn btn-info rounded-start h-100 btn-list-item-action"},Ir),ft("button",{type:"button",onClick:u[1]||(u[1]=(...v)=>a.remove&&a.remove(...v)),id:"btn-delete",class:"btn btn-danger rounded-end h-100 btn-list-item-action"},Nr)])])]),Or]))}});Uo.add(Zs,Vs,Wo,Us,Ws,js);ji.exports.Marker.prototype.options.icon=ji.exports.icon({iconUrl:_r,iconRetinaUrl:yr,shadowUrl:br,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});const Hr={components:{ArticleListItem:Rr},data(){return{articles:[],canLoadMore:!0}},mounted(){var P=this;const a=qs();let u,v=null,g=0;$("#accordionAggiungi").on("show.bs.collapse",function(){$("#editor").summernote({placeholder:"Scrivi qui...",tabsize:2,height:100}),$("div.note-group-select-from-files").remove();var m=JSON.parse(JSON.stringify(a.perms)),I=JSON.parse(JSON.stringify(a.authorizedauthors));g=0,$("#selectmittente").empty(),m.forEach(O=>{O.grant=="authors"&&($("#selectmittente").append('<option value="'+O.object_id+'">'+I[g]+"</option>"),g++)})}),$("#collapseTwo").on("show.bs.collapse",function(){g=0,$("#selectMittenteDel").empty();var m=JSON.parse(JSON.stringify(a.perms)),I=JSON.parse(JSON.stringify(a.authorizedauthors));$("#selectMittenteDel").append('<option value=""></option>'),m.forEach(O=>{O.grant=="authors"&&($("#selectMittenteDel").append('<option value="'+O.object_id+'">'+I[g]+"</option>"),g++)}),$("#selectMittenteDel").change(function(){P.getArticlesFromAuthor()}),$("#titoloArticoloDel").change(function(){P.getArticlesFromAuthor()})}),Mn.get(An+"/v1/tags").then(m=>{m.data.tags.forEach(I=>{var O=I.name.charAt(0).toUpperCase()+I.name.slice(1).toLowerCase();$("#selectcategoria").append('<option value="'+I.name+'">'+O+"</option>")})}).catch(m=>{Zi("Errore nel caricamento delle categorie","error"),fi.mainLogger.error("articoli",m)});const S=document.querySelectorAll("#articolo");Array.from(S).forEach(m=>{m.addEventListener("submit",I=>{if(m.classList.add("was-validated"),!m.checkValidity())I.preventDefault(),I.stopPropagation();else{I.preventDefault(),I.stopPropagation();var O="",q;if($("#copertinaArticolo").val()!=""&&!$("#copertinaArticolo").val().match(/^(http|https):\/\/[^ "]+$/)){$("#copertinaArticolo").addClass("is-invalid");return}else $("#copertinaArticolo").removeClass("is-invalid"),O=$("#copertinaArticolo").val();$("#submit").attr("disabled",!0),$("#submit").html("Invio...");var z=$("#editor").summernote("code"),U={content:z,title:$("#titoloArticolo").val(),author_id:$("#selectmittente").val(),tag_id:$("#selectcategoria").val()};q=window.extraorario.dates;var ut=$("#sottotitoloArticolo").val();q!=null&&(U.target_time=q.picked),ut!=""&&(U.subtitle=ut),v!=null&&(U.latitude=v.getLatLng().lat,U.longitude=v.getLatLng().lng),O!=""&&(U.image=O),Mn.post(An+"/v1/articles",U,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("polifemo_access_token")}}).then(function(St){Zi("Articolo creato con successo","success");var It=document.getElementById("collapseOne");new bootstrap.Collapse(It,{toggle:!0}),m.classList.remove("was-validated"),fi.mainLogger.info("articoli","Article created successfully"),m.reset()}).catch(function(St){fi.mainLogger.error("articoli","Error while creating article"),fi.mainLogger.error("articoli",St),Zi("Errore nella creazione dell'articolo: "+St.response.data.error,"error")}).finally(function(){$("#submit").attr("disabled",!1),$("#submit").html("Invia")})}},!1)}),this.emitter.on("permissions-refreshed",()=>{Ks("authors")}),this.emitter.on("article-deleted",m=>{this.articles=this.articles.filter(I=>I.id!=m)}),document.getElementById("checkExtra").addEventListener("change",function(){this.checked?(document.getElementById("extra-div").classList.remove("d-none"),document.getElementById("extramappa").style.height="400px",u=ao.map("extramappa").setView([45.47812,9.22818],18),ao.tileLayer("https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",{maxZoom:20}).addTo(u),u.on("click",function(m){v!=null&&u.removeLayer(v),v=new ao.marker(m.latlng).addTo(u)}),window.extraorario=new vr(document.getElementById("extraorario"),{display:{theme:a.darkModeEnabled?"dark":"light"}})):document.getElementById("extra-div").classList.add("d-none")})},methods:{getArticlesFromAuthor(P){var a=$("#selectMittenteDel").val(),u=$("#titoloArticoloDel").val();if(a!=0){$("#loading").removeClass("d-none");var v="/v1/articles?author_id="+a+"&limit=3";if(u!=""&&(v+="&title="+u),P){$("#loadMore").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>');var g=new Date(this.articles[this.articles.length-1].publish_time);g.setSeconds(g.getSeconds()+1),v+="&start="+g.toISOString()}Mn.get(An+v).then(S=>{P?this.articles=this.articles.concat(S.data.results):(this.articles=[],this.articles=S.data.results),S.data.results.length<3?this.canLoadMore=!1:this.canLoadMore=!0},S=>{if(S.response.status==404){if(P){this.canLoadMore=!1;return}this.articles=[],Zi("Nessun articolo trovato","info");return}else fi.mainLogger.error("articoli","Error while fetching articles"),fi.mainLogger.error("articoli",S),Zi("Errore nel caricamento degli articoli: "+(S.response.data.error||S.response.data.title),"error")}).finally(()=>{$("#loading").addClass("d-none"),$("#loadMore").html("Carica altri")})}}}},$r=ft("header",null,[ft("meta",{charset:"utf-8"}),ft("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),ft("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-bs5.css"})],-1),Fr={class:"container mt-5"},Zr={id:"accordionAggiungi",class:"accordion mb-4"},Vr=jo('<div class="accordion-item"><h2 id="headingOne" class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> Aggiungi un articolo </button></h2><div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionAggiungi"><div class="accordion-body"><form id="articolo" class="needs-validation" novalidate><div><label for="mittente" class="form-label"> Mittente articolo </label><select id="selectmittente" class="form-select" aria-label="Seleziona mittente"></select></div><div class="mb-3 mt-4"><label for="titoloArticolo" class="form-label">Titolo</label><input id="titoloArticolo" type="text" class="form-control" required><div class="invalid-feedback"> L&#39;oggetto non pu\xF2 essere vuoto. </div></div><div class="mb-3 mt-4"><label for="oggettoArticolo" class="form-label"> Sottotitolo </label><input id="sottotitoloArticolo" type="text" class="form-control"></div><div class="mb-3 mt-3"><textarea id="editor" class="form-control" name="editordata" required></textarea><div class="invalid-feedback"> Il corpo dell&#39;articolo non pu\xF2 essere vuoto. </div></div><div class="mb-3 mt-4"><label for="copertinaArticolo" class="form-label"> URL immagine di copertina </label><input id="copertinaArticolo" type="text" class="form-control"><div class="invalid-feedback">Deve essere un URL valido.</div></div><div class="mb-3 mt-4"><div class="form-check"><input id="checkExtra" class="form-check-input" type="checkbox" value=""><label class="form-check-label" for="checkExtra"> Allega posizione e orario </label></div></div><div id="extra-div" class="d-none"><br><p>Clicca un punto della mappa per impostarlo come luogo</p><div id="extramappa" class="mb-3" style="height:400px;"></div><div id="extraorario" class="input-group mb-3" data-td-target-input="nearest" style="width:200px;" data-td-target-toggle="nearest"><label for="extraorario">Imposta l&#39;orario dell&#39;evento</label><input id="datetimepicker1Input" type="text" class="form-control" data-td-target="#extraorario"><span class="input-group-text" data-td-target="#extraorario" data-td-toggle="datetimepicker"><span class="fas fa-calendar"></span></span></div></div><div class="mb-3 mt-4"><label for="mittente" class="form-label">Categoria</label><select id="selectcategoria" class="form-select" aria-label="Seleziona categoria" required></select></div><button id="submit" type="submit" class="btn btn-primary rounded"> Invia </button></form></div></div></div>',1),Ur={class:"accordion-item"},Wr=ft("h2",{id:"headingTwo",class:"accordion-header"},[ft("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," Rimuovi un articolo ")],-1),jr={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionAggiungi"},qr={class:"accordion-body"},Kr=jo('<div><label for="mittente" class="form-label"> Mittente articolo </label><select id="selectMittenteDel" class="form-select" aria-label="Seleziona mittente"></select></div><div class="mt-4"><label for="titoloArticolo" class="form-label">Titolo</label><input id="titoloArticoloDel" type="text" class="form-control" required></div>',2),Gr=ft("div",{id:"loading",class:"mt-4 row d-none"},[ft("div",{class:"spinner-border text-primary mx-auto",role:"status"},[ft("span",{class:"visually-hidden"},"Loading...")])],-1),Yr={class:"mb-2"},Jr={key:0,class:"mt-4 row"},Xr={class:"text-primary mx-auto col-auto",role:"status"};function Qr(P,a,u,v,g,S){const m=Gs("ArticleListItem");return ie(),me(Ho,null,[$r,ft("div",Fr,[ft("div",Zr,[Vr,ft("div",Ur,[Wr,ft("div",jr,[ft("div",qr,[Kr,Gr,ft("div",Yr,[(ie(!0),me(Ho,null,Ys(this.articles,I=>(ie(),Js(m,{key:I.id,title:I.title,subtitle:I.subtitle,content:I.content,targettime:I.target_time,location:I.latitude!=null,id:I.id||0},null,8,["title","subtitle","content","targettime","location","id"]))),128)),g.articles.length!=0&&g.canLoadMore?(ie(),me("div",Jr,[ft("div",Xr,[ft("a",{id:"loadMore",href:"#/",onClick:a[0]||(a[0]=I=>S.getArticlesFromAuthor(!0))},"Carica altro")])])):En("",!0)])])])])])])],64)}const ea=Fs(Hr,[["render",Qr]]);export{ea as default};
